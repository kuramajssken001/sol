-- Dreghood Geomancer: Adjust position (should be nearby their formation leader, one of the Illidari Taskmasters)
UPDATE `creature` SET `position_x` = -740.524, `position_y` = 4703.89, `position_z` = 59.5796, `wander_distance` = 0, `MovementType` = 0 WHERE `guid` = 58902;
UPDATE `creature` SET `position_x` = -740.524, `position_y` = 4709.09, `position_z` = 59.3155, `wander_distance` = 0, `MovementType` = 0 WHERE `guid` = 58903;

-- Illidari Taskmasters: Adjust position a bit further away from the ruins so they have more room for their random movement
UPDATE `creature` SET `position_x` = -447.108, `position_y` = 4666.08, `position_z` = 31.7134 WHERE `guid` = 59451;
UPDATE `creature` SET `position_x` = -506.649, `position_y` = 4709.26, `position_z` = 36.1533 WHERE `guid` = 59452;
UPDATE `creature` SET `position_x` = -448.086, `position_y` = 4760.03, `position_z` = 21.1332 WHERE `guid` = 59453;
UPDATE `creature` SET `position_x` = -567.849, `position_y` = 4796.56, `position_z` = 34.4806 WHERE `guid` = 59454;
UPDATE `creature` SET `position_x` = -605.848, `position_y` = 4746.05, `position_z` = 40.9968 WHERE `guid` = 59455;
UPDATE `creature` SET `position_x` = -493.695, `position_y` = 4833.64, `position_z` = 30.7234 WHERE `guid` = 59456;
UPDATE `creature` SET `position_x` = -684.482, `position_y` = 4758.48, `position_z` = 49.3053 WHERE `guid` = 59457;
UPDATE `creature` SET `position_x` = -661.333, `position_y` = 4842.57, `position_z` = 50.7126, `wander_distance` = 5, `MovementType` = 1 WHERE `guid` = 59458; -- Random movement was missing
UPDATE `creature` SET `position_x` = -598.234, `position_y` = 4844.94, `position_z` = 38.6987 WHERE `guid` = 59459;
UPDATE `creature` SET `position_x` = -707.417, `position_y` = 4772.53, `position_z` = 48.8172 WHERE `guid` = 59460;
UPDATE `creature` SET `position_x` = -517.165, `position_y` = 4847.26, `position_z` = 33.4804 WHERE `guid` = 59462;
UPDATE `creature` SET `position_x` = -501.015, `position_y` = 4918.45, `position_z` = 39.7486 WHERE `guid` = 59463;

-- Dreghood Brute: Use "Illidari Taskmaster" template instead as there are 2 other Brutes nearby working but no Taskmaster
UPDATE `creature` SET `id` = 17058, `curhealth` = 4422, `position_x` = -494.003, `position_y` = 4771.27, `position_z` = 27.8378, `wander_distance` = 5, `MovementType` = 1 WHERE `guid` = 58922;

-- Put the Illidari Taskmasters in a formation with their Dreghood Brutes (no movement, only assist each other)
DELETE FROM `creature_formations` WHERE `leaderGUID` IN (59464,59451,59452,59453,59454,59455,59456,59457,59458,59459,59460,59462,59463,58922);
INSERT INTO `creature_formations` (`leaderGUID`, `memberGUID`, `dist`, `angle`, `groupAI`)
VALUES
(59464,59464,0,0,5),
(59464,58904,0,0,5),
(59464,58905,0,0,5),

(59451,59451,0,0,5),
(59451,58906,0,0,5),
(59451,58907,0,0,5),

(59452,59452,0,0,5),
(59452,58908,0,0,5),
(59452,58909,0,0,5),

(59453,59453,0,0,5),
(59453,58910,0,0,5),
(59453,58911,0,0,5),

(59454,59454,0,0,5),
(59454,58913,0,0,5),
(59454,58919,0,0,5),

(59455,59455,0,0,5),
(59455,58916,0,0,5),
(59455,58917,0,0,5),
(59455,58918,0,0,5),

(59456,59456,0,0,5),
(59456,58915,0,0,5),
(59456,58921,0,0,5),

(59457,59457,0,0,5),
(59457,58923,0,0,5),
(59457,58924,0,0,5),

(59458,59458,0,0,5),
(59458,58926,0,0,5),
(59458,58927,0,0,5),

(59459,59459,0,0,5),
(59459,58928,0,0,5),
(59459,58929,0,0,5),

(59460,59460,0,0,5),
(59460,58925,0,0,5),
(59460,58930,0,0,5),
(59460,58931,0,0,5),

(59462,59462,0,0,5),
(59462,58920,0,0,5),
(59462,58932,0,0,5),

(59463,59463,0,0,5),
(59463,58933,0,0,5),
(59463,58934,0,0,5),

(58922,58922,0,0,5),
(58922,58912,0,0,5),
(58922,58914,0,0,5);

UPDATE `creature_template` SET `AIName` = 'SmartAI' WHERE `entry` = 19477;
DELETE FROM `smart_scripts` WHERE `source_type` = 0 AND `entryorguid` IN (19354,17058,16938,16937);
DELETE FROM `smart_scripts` WHERE `source_type` = 9 AND `entryorguid` = 1693800;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(19354,0,0,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Arzeth the Merciless - On Respawn - Set Active On'),
(19354,0,1,0,0,0,100,0,8000,12000,8000,14000,0,11,16856,0,0,0,0,0,2,0,0,0,0,0,0,0,0,'Arzeth the Merciless - IC - Cast ''Mortal Strike'''),
(19354,0,2,0,9,0,100,0,0,30,12000,14000,1,11,15245,1,0,0,0,0,2,0,0,0,0,0,0,0,0,'Arzeth the Merciless - Within 0-30 Range - Cast ''Shadow Bolt Volley'''),
(19354,0,3,4,8,0,100,1,35460,0,0,0,0,36,20680,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Arzeth the Merciless - On Spell Hit ''Fury of the Dreghood Elders'' - Update Template To ''Arzeth the Powerless'''),
(19354,0,4,5,61,0,100,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Arzeth the Merciless - Linked - Say Line 0'),
(19354,0,5,0,61,0,100,0,0,0,0,0,0,49,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,'Arzeth the Merciless - Linked - Start Attack (Invoker)'),
(19354,0,6,0,1,0,100,0,35000,45000,40000,90000,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Arzeth the Merciless - OOC - Say Line 0'),
(19354,0,7,0,7,0,100,0,0,0,0,0,0,36,19354,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Arzeth the Merciless - On Evade - Update Template To ''Arzeth the Merciless'''),

(17058,0,0,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Illidari Taskmaster - On Respawn - Set Active On (CONDITION_OBJECT_ENTRY_GUID)'),
(17058,0,1,0,2,0,100,1,0,20,0,0,0,11,34186,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Illidari Taskmaster - Between 0-20% Health - Cast ''Haste Other'' (No Repeat)'),
(17058,0,2,0,0,0,100,0,2000,4000,20000,40000,0,11,16244,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Illidari Taskmaster - IC - Cast ''Demoralizing Shout'''),
(17058,0,3,0,4,0,100,0,0,0,0,0,0,1,1,0,1,0,0,0,7,0,0,0,0,0,0,0,0,'Illidari Taskmaster - On Aggro - Say Line 1'),
(17058,0,4,0,1,0,100,0,15000,60000,45000,90000,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Illidari Taskmaster - OOC - Say Line 0 (CONDITION_OBJECT_ENTRY_GUID)'),
(17058,0,5,0,6,0,100,0,0,0,0,0,0,45,1,1,0,0,0,0,231,2,0,0,0,0,0,0,0,'Illidari Taskmaster - On Death - Set Data 1 1 (Formation Members)'),

(16938,0,0,0,0,0,100,0,8000,12000,10000,20000,0,11,31553,0,0,0,0,0,2,0,0,0,0,0,0,0,0,'Dreghood Brute - IC - Cast ''Hamstring'''),
(16938,0,1,0,4,0,35,0,0,0,0,0,0,1,0,0,1,0,0,0,7,0,0,0,0,0,0,0,0,'Dreghood Brute - On Aggro - Say Line 0'),
(16938,0,2,0,38,0,100,0,1,1,0,0,0,80,1693800,2,0,0,0,0,1,0,0,0,0,0,0,0,0,'Dreghood Brute - On Data Set 1 1 - Call Timed Action List'),

(1693800,9,0,0,0,0,100,0,0,0,0,0,0,101,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Dreghood Brute - On Script - Set Home Position'),
(1693800,9,1,0,0,0,100,0,0,0,0,0,0,36,19477,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Dreghood Brute - On Script - Update Template To ''Dreghood Fleeing Warrior'''),
(1693800,9,2,0,0,0,100,0,0,0,0,0,0,24,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Dreghood Brute - On Script - Evade'),
(1693800,9,3,0,0,0,100,0,1000,1000,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Dreghood Brute - On Script - Say Line 0'),
(1693800,9,4,0,0,0,100,0,0,0,0,0,0,59,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Dreghood Brute - On Script - Set Run On'),
(1693800,9,5,0,0,0,100,0,0,0,0,0,0,17,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Dreghood Brute - On Script - Set Emote State ''ONESHOT_NONE'''),
(1693800,9,6,0,0,0,100,0,0,0,0,0,0,89,10,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Dreghood Brute - On Script - Enable Random Movement'),
(1693800,9,7,0,0,0,100,0,0,0,0,0,0,41,5000,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Dreghood Brute - On Script - Force Despawn'),

(16937,0,0,0,0,0,100,0,0,0,3000,5000,0,11,34083,64,0,0,0,0,2,0,0,0,0,0,0,0,0,'Dreghood Geomancer - IC - Cast ''Fireball'''),
(16937,0,1,0,2,0,100,1,0,50,0,0,0,11,32734,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Dreghood Geomancer - Between 0-50% Health - Cast ''Earth Shield'' (No Repeat)');

DELETE FROM `conditions` WHERE `SourceTypeOrReferenceId` = 22 AND `SourceEntry` = 17058;
INSERT INTO `conditions` (`SourceTypeOrReferenceId`, `SourceGroup`, `SourceEntry`, `SourceId`, `ElseGroup`, `ConditionTypeOrReference`, `ConditionTarget`, `ConditionValue1`, `ConditionValue2`, `ConditionValue3`, `NegativeCondition`, `ErrorType`, `ErrorTextId`, `Comment`)
VALUES
(22,1,17058,0,0,31,1,3,0,59461,0,0,0,'Illidari Taskmaster - Group 0: Execute SAI ID 0 only if has GUID 59461'),

(22,5,17058,0,0,31,1,3,0,59461,1,0,0,'Illidari Taskmaster - Group 0: Execute SAI ID 4 only if has not GUID 59461'),
(22,5,17058,0,0,31,1,3,0,59464,1,0,0,'Illidari Taskmaster - Group 0: Execute SAI ID 4 only if has not GUID 59464');

DELETE FROM `waypoint_data` WHERE `id` IN (690510,594610);
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `pathfinding`, `action`, `action_chance`, `wpguid`)
VALUES
-- Arzeth the Merciless
(690510,1,-617.618,4800.32,38.5959,6.0912,30000,0,0,0,100,0),
(690510,2,-607.417,4800.29,37.7488,0,0,0,0,0,100,0),
(690510,3,-597.617,4800.27,36.5372,0,0,0,0,0,100,0),
(690510,4,-587.005,4800.24,35.4111,0,0,0,0,0,100,0),
(690510,5,-574.643,4800.21,34.6406,0,0,0,0,0,100,0),
(690510,6,-561.231,4800.18,34.2807,0,0,0,0,0,100,0),
(690510,7,-548.638,4800.14,33.8783,0,0,0,0,0,100,0),
(690510,8,-537.207,4800.11,34.1765,0,0,0,0,0,100,0),
(690510,9,-524.957,4800.08,32.9093,0,0,0,0,0,100,0),
(690510,10,-515.276,4800.06,32.1932,0,0,0,0,0,100,0),
(690510,11,-504.545,4800.03,31.1437,0,0,0,0,0,100,0),
(690510,12,-491.371,4800,30.0572,0,0,0,0,0,100,0),
(690510,13,-480.925,4799.97,28.2086,0,30000,0,0,0,100,0),
(690510,14,-491.371,4800,30.0572,0,0,0,0,0,100,0),
(690510,15,-504.545,4800.03,31.1437,0,0,0,0,0,100,0),
(690510,16,-515.276,4800.06,32.1932,0,0,0,0,0,100,0),
(690510,17,-524.957,4800.08,32.9093,0,0,0,0,0,100,0),
(690510,18,-537.207,4800.11,34.1765,0,0,0,0,0,100,0),
(690510,19,-548.638,4800.14,33.8783,0,0,0,0,0,100,0),
(690510,20,-561.231,4800.18,34.2807,0,0,0,0,0,100,0),
(690510,21,-574.643,4800.21,34.6406,0,0,0,0,0,100,0),
(690510,22,-587.005,4800.24,35.4111,0,0,0,0,0,100,0),
(690510,23,-597.617,4800.27,36.5372,0,0,0,0,0,100,0),
(690510,24,-607.417,4800.29,37.7488,0,0,0,0,0,100,0),
(690510,25,-617.618,4800.32,38.5959,0,0,0,0,0,100,0),
(690510,26,-623.979,4800.24,39.8057,0,0,0,0,0,100,0),
(690510,27,-633.879,4800.13,43.9318,0,0,0,0,0,100,0),
(690510,28,-647.149,4799.97,48.6647,0,0,0,0,0,100,0),
(690510,29,-659.412,4799.82,49.074,0.011963,30000,0,0,0,100,0),
(690510,30,-647.149,4799.97,48.6647,0,0,0,0,0,100,0),
(690510,31,-633.879,4800.13,43.9318,0,0,0,0,0,100,0),
(690510,32,-623.979,4800.24,39.8057,0,0,0,0,0,100,0),
(690510,33,-617.618,4800.32,38.5959,0,0,0,0,0,100,0),
(690510,34,-607.417,4800.29,37.7488,0,0,0,0,0,100,0),
(690510,35,-597.617,4800.27,36.5372,0,0,0,0,0,100,0),
(690510,36,-587.005,4800.24,35.4111,0,0,0,0,0,100,0),
(690510,37,-574.643,4800.21,34.6406,0,0,0,0,0,100,0),
(690510,38,-561.231,4800.18,34.2807,0,0,0,0,0,100,0),
(690510,39,-548.638,4800.14,33.8783,0,0,0,0,0,100,0),
(690510,40,-537.207,4800.11,34.1765,0,0,0,0,0,100,0),
(690510,41,-524.957,4800.08,32.9093,0,0,0,0,0,100,0),
(690510,42,-515.276,4800.06,32.1932,0,0,0,0,0,100,0),
(690510,43,-504.545,4800.03,31.1437,0,0,0,0,0,100,0),
(690510,44,-491.371,4800,30.0572,0,0,0,0,0,100,0),
(690510,45,-480.925,4799.97,28.2086,0,30000,0,0,0,100,0),
(690510,46,-491.371,4800,30.0572,0,0,0,0,0,100,0),
(690510,47,-504.545,4800.03,31.1437,0,0,0,0,0,100,0),
(690510,48,-515.276,4800.06,32.1932,0,0,0,0,0,100,0),
(690510,49,-524.957,4800.08,32.9093,0,0,0,0,0,100,0),
(690510,50,-537.207,4800.11,34.1765,0,0,0,0,0,100,0),
(690510,51,-548.638,4800.14,33.8783,0,0,0,0,0,100,0),
(690510,52,-561.231,4800.18,34.2807,0,0,0,0,0,100,0),
(690510,53,-574.643,4800.21,34.6406,0,0,0,0,0,100,0),
(690510,54,-587.005,4800.24,35.4111,0,0,0,0,0,100,0),
(690510,55,-597.617,4800.27,36.5372,0,0,0,0,0,100,0),
(690510,56,-607.417,4800.29,37.7488,0,0,0,0,0,100,0),
-- Illidari Taskmaster
(594610,1,-739.024,4706.49,59.0593,0,5000,0,0,0,100,0),
(594610,2,-730.025,4710.17,58.4405,0,0,0,0,0,100,0),
(594610,3,-720.46,4714.08,57.9525,0,0,0,0,0,100,0),
(594610,4,-710.782,4722.67,57.1188,0,0,0,0,0,100,0),
(594610,5,-700.324,4731.96,55.0589,0,0,0,0,0,100,0),
(594610,6,-695.843,4739.47,54.2094,0,0,0,0,0,100,0),
(594610,7,-692.023,4745.87,52.551,0,0,0,0,0,100,0),
(594610,8,-688.107,4752.43,50.2667,0,0,0,0,0,100,0),
(594610,9,-685.892,4761.02,49.3474,0,0,0,0,0,100,0),
(594610,10,-683.62,4769.83,49.2056,0,0,0,0,0,100,0),
(594610,11,-677.788,4776.51,49.0267,0,0,0,0,0,100,0),
(594610,12,-671.668,4783.52,48.8028,0,0,0,0,0,100,0),
(594610,13,-669.431,4793.06,49.1975,0,0,0,0,0,100,0),
(594610,14,-666.756,4804.47,49.1657,0,0,0,0,0,100,0),
(594610,15,-659.798,4809.12,49.3101,0,0,0,0,0,100,0),
(594610,16,-652.71,4808.97,48.6888,0,0,0,0,0,100,0),
(594610,17,-647.454,4808.85,48.6464,0,0,0,0,0,100,0),
(594610,18,-634.269,4808.56,43.9152,0,0,0,0,0,100,0),
(594610,19,-624.228,4808.35,39.8272,0,0,0,0,0,100,0),
(594610,20,-614.683,4807.66,38.4561,0,0,0,0,0,100,0),
(594610,21,-606.438,4807.07,37.5357,0,0,0,0,0,100,0),
(594610,22,-600.531,4809.67,36.4392,0,0,0,0,0,100,0),
(594610,23,-601.544,4825.51,36.8504,0,0,0,0,0,100,0),
(594610,24,-599.855,4836.65,37.9918,0,0,0,0,0,100,0),
(594610,25,-593.876,4843.04,38.4913,0,0,0,0,0,100,0),
(594610,26,-587.339,4850.03,38.6515,0,0,0,0,0,100,0),
(594610,27,-580.537,4853.87,38.9705,0,0,0,0,0,100,0),
(594610,28,-574.308,4857.39,38.7341,0,0,0,0,0,100,0),
(594610,29,-564.814,4862.24,38.4729,0,0,0,0,0,100,0),
(594610,30,-553.303,4868.13,37.3201,0,0,0,0,0,100,0),
(594610,31,-546.172,4873.22,37.3897,0,0,0,0,0,100,0),
(594610,32,-537.945,4886.02,36.497,0,0,0,0,0,100,0),
(594610,33,-534.93,4896.67,37.638,0,5000,0,0,0,100,0),
(594610,34,-537.945,4886.02,36.497,0,0,0,0,0,100,0),
(594610,35,-546.172,4873.22,37.3897,0,0,0,0,0,100,0),
(594610,36,-553.303,4868.13,37.3201,0,0,0,0,0,100,0),
(594610,37,-564.814,4862.24,38.4729,0,0,0,0,0,100,0),
(594610,38,-574.308,4857.39,38.7341,0,0,0,0,0,100,0),
(594610,39,-580.537,4853.87,38.9705,0,0,0,0,0,100,0),
(594610,40,-587.339,4850.03,38.6515,0,0,0,0,0,100,0),
(594610,41,-593.876,4843.04,38.4913,0,0,0,0,0,100,0),
(594610,42,-599.855,4836.65,37.9918,0,0,0,0,0,100,0),
(594610,43,-601.544,4825.51,36.8504,0,0,0,0,0,100,0),
(594610,44,-600.531,4809.67,36.4392,0,0,0,0,0,100,0),
(594610,45,-606.438,4807.07,37.5357,0,0,0,0,0,100,0),
(594610,46,-614.683,4807.66,38.4561,0,0,0,0,0,100,0),
(594610,47,-624.228,4808.35,39.8272,0,0,0,0,0,100,0),
(594610,48,-634.269,4808.56,43.9152,0,0,0,0,0,100,0),
(594610,49,-647.454,4808.85,48.6464,0,0,0,0,0,100,0),
(594610,50,-652.71,4808.97,48.6888,0,0,0,0,0,100,0),
(594610,51,-659.798,4809.12,49.3101,0,0,0,0,0,100,0),
(594610,52,-666.756,4804.47,49.1657,0,0,0,0,0,100,0),
(594610,53,-669.431,4793.06,49.1975,0,0,0,0,0,100,0),
(594610,54,-671.668,4783.52,48.8028,0,0,0,0,0,100,0),
(594610,55,-677.788,4776.51,49.0267,0,0,0,0,0,100,0),
(594610,56,-683.62,4769.83,49.2056,0,0,0,0,0,100,0),
(594610,57,-685.892,4761.02,49.3474,0,0,0,0,0,100,0),
(594610,58,-688.107,4752.43,50.2667,0,0,0,0,0,100,0),
(594610,59,-692.023,4745.87,52.551,0,0,0,0,0,100,0),
(594610,60,-695.843,4739.47,54.2094,0,0,0,0,0,100,0),
(594610,61,-700.324,4731.96,55.0589,0,0,0,0,0,100,0),
(594610,62,-710.782,4722.67,57.1188,0,0,0,0,0,100,0),
(594610,63,-720.46,4714.08,57.9525,0,0,0,0,0,100,0),
(594610,64,-730.025,4710.17,58.4405,0,0,0,0,0,100,0);
