-- DB update 2021_02_05_00 -> 2021_02_05_01
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_02_05_00';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_02_05_00 2021_02_05_01 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1612565746605911280'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1612565746605911280');

DELETE FROM `script_waypoint` WHERE `entry` = 16295;
INSERT INTO `script_waypoint` (`entry`, `pointid`, `location_x`, `location_y`, `location_z`, `waittime`, `point_comment`)
VALUES
(16295,0,7545.07,-7359.87,162.354,4000,'SAY_START'),
(16295,1,7550.05,-7362.24,162.236,0,NULL),
(16295,2,7566.98,-7364.32,161.739,0,NULL),
(16295,3,7578.83,-7361.68,161.739,0,NULL),
(16295,4,7590.97,-7359.05,162.258,0,NULL),
(16295,5,7598.35,-7362.82,162.257,4000,'SAY_PROGRESS_1'),
(16295,6,7604.94,-7378.26,162.325,0,NULL),
(16295,7,7605.36,-7388.83,156.941,0,NULL),
(16295,8,7606.13,-7393.89,156.942,0,NULL),
(16295,9,7615.21,-7400.19,157.143,0,NULL),
(16295,10,7618.96,-7402.65,158.202,0,NULL),
(16295,11,7628.4,-7402.18,159.477,0,NULL),
(16295,12,7635.11,-7401.82,162.276,0,NULL),
(16295,13,7636.85,-7401.76,162.145,0,'SAY_PROGRESS_2'),
(16295,14,7637.06,-7404.94,162.207,4000,NULL),
(16295,15,7636.91,-7412.59,162.366,0,NULL),
(16295,16,7637.61,-7425.59,162.631,0,NULL),
(16295,17,7637.82,-7459.06,163.303,0,NULL),
(16295,18,7638.53,-7467.09,163.31,0,NULL),
(16295,19,7638.86,-7470.9,162.517,0,NULL),
(16295,20,7641.4,-7488.22,157.381,0,NULL),
(16295,21,7634.46,-7505.45,154.682,0,NULL),
(16295,22,7631.91,-7516.95,153.597,2000,'SAY_PROGRESS_3'),
(16295,23,7631.91,-7516.95,153.597,0,NULL),
(16295,24,7628.11,-7524.83,153.566,0,NULL),
(16295,25,7622.23,-7537.04,151.587,0,NULL),
(16295,26,7615.6,-7545.03,150.635,0,NULL),
(16295,27,7610.92,-7550.67,149.639,0,NULL),
(16295,28,7605.63,-7555.62,148.546,0,NULL),
(16295,29,7598.23,-7562.55,145.954,0,NULL),
(16295,30,7592.58,-7571.4,147.393,0,NULL),
(16295,31,7588.51,-7577.76,148.294,0,NULL),
(16295,32,7581.29,-7588.24,148.705,0,NULL),
(16295,33,7575.65,-7596.4,148.145,0,NULL),
(16295,34,7567.34,-7608.46,146.006,0,NULL),
(16295,35,7562.55,-7617.42,148.098,0,NULL),
(16295,36,7562.37,-7622.21,150.514,0,NULL),
(16295,37,7562.19,-7627.1,151.284,0,NULL),
(16295,38,7561.81,-7637.13,151.28,0,NULL),
(16295,39,7561.51,-7645.06,151.245,0,NULL),
(16295,40,7563.34,-7654.65,151.227,0,NULL),
(16295,41,7565.53,-7658.3,151.249,0,NULL),
(16295,42,7578.2,-7661.95,151.652,0,'quest complete / SAY_END_1'),
(16295,43,7586.55,-7663.6,151.631,0,NULL),
(16295,44,7592.27,-7664.73,151.672,0,NULL),
(16295,45,7601.09,-7666.47,153.997,0,NULL),
(16295,46,7603.77,-7667,153.998,0,NULL),
(16295,47,7603.77,-7667,153.998,4000,'SAY_END_2'),
(16295,48,7603.77,-7667,153.998,4000,'SAY_CAPTAIN_ANSWER'),
(16295,49,7600.96,-7666.32,153.998,0,NULL),
(16295,50,7592.33,-7664.24,151.673,0,NULL),
(16295,51,7577.97,-7660.77,151.657,0,NULL),
(16295,52,7571.16,-7659.12,151.245,0,NULL);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
