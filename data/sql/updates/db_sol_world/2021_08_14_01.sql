-- DB update 2021_08_14_00 -> 2021_08_14_01
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_08_14_00';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_08_14_00 2021_08_14_01 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1628953135273855288'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1628953135273855288');

UPDATE `creature` SET `MovementType` = 0 WHERE `guid` IN (23466,23467);
UPDATE `creature_addon` SET `path_id` = 0 WHERE `guid` IN (23466,23467);
DELETE FROM `waypoint_data` WHERE `id` IN (234660,234670);

UPDATE `creature_template` SET `AIName` = 'SmartAI' WHERE `entry` = 7847;
DELETE FROM `smart_scripts` WHERE `source_type` = 0 AND `entryorguid` IN (5615,5618,7847);
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(5615,0,0,0,1,0,100,0,1000,1000,1000,1000,0,11,8218,34,0,0,0,0,1,0,0,0,0,0,0,0,0,'Wastewander Rogue - OOC - Cast ''Sneak'''),
(5615,0,1,0,67,0,100,0,3000,6000,0,0,0,11,8721,2,0,0,0,0,2,0,0,0,0,0,0,0,0,'Wastewander Rogue - On Behind Target - Cast ''Backstab'''),

(5618,0,0,0,0,0,100,0,4000,8000,7000,12000,0,11,8629,2,0,1,0,0,2,0,0,0,0,0,0,0,0,'Wastewander Bandit - IC - Cast ''Gouge'''),
(5618,0,1,0,67,0,100,0,3000,6000,0,0,0,11,8721,2,0,0,0,0,2,0,0,0,0,0,0,0,0,'Wastewander Bandit - On Behind Target - Cast ''Backstab'''),

(7847,0,0,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Caliph Scorpidsting - On Respawn - Set Active On');

DELETE FROM `waypoint_data` WHERE `id` = 232860;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(232860,1,-7632.11,-4484.75,9.42574,0,0,0,0,100,0),
(232860,2,-7631.09,-4493.68,8.91861,0,0,0,0,100,0),
(232860,3,-7629.96,-4504.82,8.99366,0,0,0,0,100,0),
(232860,4,-7624.46,-4514.55,9.30387,0,0,0,0,100,0),
(232860,5,-7614.63,-4524.48,9.61623,0,0,0,0,100,0),
(232860,6,-7604.03,-4531.75,9.80899,0,0,0,0,100,0),
(232860,7,-7594.79,-4544.92,9.18175,0,0,0,0,100,0),
(232860,8,-7600.55,-4559.49,9.48004,0,0,0,0,100,0),
(232860,9,-7600.72,-4570.66,9.3134,0,0,0,0,100,0),
(232860,10,-7599.1,-4581.71,9.09115,0,0,0,0,100,0),
(232860,11,-7604.47,-4594.67,8.90585,4.16461,60000,0,0,100,0),
(232860,12,-7594.55,-4589.52,9.00771,0,0,0,0,100,0),
(232860,13,-7584.49,-4586.34,9.73873,0,0,0,0,100,0),
(232860,14,-7572.92,-4584.23,10.6359,0,0,0,0,100,0),
(232860,15,-7560.66,-4583.15,10.59,0,0,0,0,100,0),
(232860,16,-7544.01,-4580.97,9.24722,0,0,0,0,100,0),
(232860,17,-7527.01,-4579.77,9.43472,0,0,0,0,100,0),
(232860,18,-7517.74,-4579.11,10.5473,0,0,0,0,100,0),
(232860,19,-7508.43,-4578.44,11.0417,0,0,0,0,100,0),
(232860,20,-7496.79,-4577.6,10.7032,0,0,0,0,100,0),
(232860,21,-7486.68,-4575.8,9.81394,0,0,0,0,100,0),
(232860,22,-7477.24,-4574.12,9.25929,0,0,0,0,100,0),
(232860,23,-7462.99,-4576.96,8.96629,0,0,0,0,100,0),
(232860,24,-7454.35,-4580.78,8.99006,0,0,0,0,100,0),
(232860,25,-7443.78,-4585.45,8.99293,0,0,0,0,100,0),
(232860,26,-7434.94,-4589.4,9.04839,0,0,0,0,100,0),
(232860,27,-7424.29,-4594.15,8.94048,0,0,0,0,100,0),
(232860,28,-7411.38,-4599.91,8.99302,0,0,0,0,100,0),
(232860,29,-7398.6,-4601.22,9.0521,0,0,0,0,100,0),
(232860,30,-7387.86,-4601.2,9.10397,0,0,0,0,100,0),
(232860,31,-7376.27,-4601.18,9.02304,0,0,0,0,100,0),
(232860,32,-7362.06,-4604.44,8.9394,0,0,0,0,100,0),
(232860,33,-7348.44,-4607.56,8.90977,0,60000,0,0,100,0),
(232860,34,-7356.52,-4603.12,8.99681,0,0,0,0,100,0),
(232860,35,-7364.11,-4598.95,9.06223,0,0,0,0,100,0),
(232860,36,-7374.32,-4594.64,9.07302,0,0,0,0,100,0),
(232860,37,-7384.02,-4590.54,9.00261,0,0,0,0,100,0),
(232860,38,-7387.33,-4582.06,9.15904,0,0,0,0,100,0),
(232860,39,-7390.7,-4573.43,9.42725,0,0,0,0,100,0),
(232860,40,-7387.78,-4563.46,10.3494,0,0,0,0,100,0),
(232860,41,-7384.82,-4553.39,11.3159,0,0,0,0,100,0),
(232860,42,-7393.65,-4546.32,11.9014,0,0,0,0,100,0),
(232860,43,-7401.86,-4539.76,12.1673,0,0,0,0,100,0),
(232860,44,-7410.78,-4533.78,11.6226,0,0,0,0,100,0),
(232860,45,-7419.31,-4528.07,10.9842,0,0,0,0,100,0),
(232860,46,-7427.95,-4521.72,10.6672,0,0,0,0,100,0),
(232860,47,-7436.23,-4515.64,10.4303,0,0,0,0,100,0),
(232860,48,-7444.42,-4509.46,9.7227,0,0,0,0,100,0),
(232860,49,-7452.99,-4502.98,8.97618,0,0,0,0,100,0),
(232860,50,-7459.9,-4496.38,8.37346,0,0,0,0,100,0),
(232860,51,-7467.9,-4488.74,7.99462,3.51455,60000,0,0,100,0),
(232860,52,-7478.07,-4483.27,8.48346,0,0,0,0,100,0),
(232860,53,-7486.19,-4478.9,8.98445,0,0,0,0,100,0),
(232860,54,-7494.86,-4476.17,9.00666,0,0,0,0,100,0),
(232860,55,-7503.73,-4473.37,8.92245,0,0,0,0,100,0),
(232860,56,-7510.55,-4463.82,8.93055,0,0,0,0,100,0),
(232860,57,-7515.83,-4450.81,9.21959,0,0,0,0,100,0),
(232860,58,-7522.29,-4434.92,9.63236,0,0,0,0,100,0),
(232860,59,-7528.74,-4419.26,9.85108,0,0,0,0,100,0),
(232860,60,-7538.78,-4414.27,9.8369,0,0,0,0,100,0),
(232860,61,-7547.53,-4409.92,10.1263,0,0,0,0,100,0),
(232860,62,-7563.08,-4401.59,10.185,0,0,0,0,100,0),
(232860,63,-7567.83,-4392.22,9.73983,0,0,0,0,100,0),
(232860,64,-7572.42,-4383.16,9.60879,0,0,0,0,100,0),
(232860,65,-7574.16,-4374.35,9.1335,0,0,0,0,100,0),
(232860,66,-7575.64,-4366.79,8.97286,2.67627,60000,0,0,100,0),
(232860,67,-7577.5,-4357.36,9.06874,0,0,0,0,100,0),
(232860,68,-7589.19,-4352.2,9.59156,0,0,0,0,100,0),
(232860,69,-7599.21,-4347.77,9.91125,0,0,0,0,100,0),
(232860,70,-7609.75,-4343.12,9.39386,0,0,0,0,100,0),
(232860,71,-7618.35,-4335.23,9.06898,0,0,0,0,100,0),
(232860,72,-7630.64,-4323.95,8.92271,0,0,0,0,100,0),
(232860,73,-7640.69,-4314.72,8.88878,0,0,0,0,100,0),
(232860,74,-7649.18,-4306.59,9.11055,0,0,0,0,100,0),
(232860,75,-7658.35,-4293.77,9.00995,0,0,0,0,100,0),
(232860,76,-7667.92,-4280.39,8.88673,2.48229,60000,0,0,100,0),
(232860,77,-7680.96,-4282.76,9.18084,0,0,0,0,100,0),
(232860,78,-7693.76,-4286.85,10.0593,0,0,0,0,100,0),
(232860,79,-7708.09,-4289.23,9.24063,0,0,0,0,100,0),
(232860,80,-7722.47,-4291.62,9.75947,0,0,0,0,100,0),
(232860,81,-7734.45,-4298.77,11.4524,0,0,0,0,100,0),
(232860,82,-7749.94,-4306.58,12.5152,0,0,0,0,100,0),
(232860,83,-7764.08,-4314.5,11.6996,0,0,0,0,100,0),
(232860,84,-7773.87,-4319.98,10.0576,0,0,0,0,100,0),
(232860,85,-7784.42,-4332.34,8.97198,0,0,0,0,100,0),
(232860,86,-7773.68,-4349.4,8.97198,0,0,0,0,100,0),
(232860,87,-7757.49,-4365.63,8.97198,0,0,0,0,100,0),
(232860,88,-7743.26,-4378.64,8.98147,0,0,0,0,100,0),
(232860,89,-7731.45,-4389.43,8.98059,0,0,0,0,100,0),
(232860,90,-7723.01,-4396.62,8.98676,0,0,0,0,100,0),
(232860,91,-7714.98,-4403.45,8.97299,0,0,0,0,100,0),
(232860,92,-7706.55,-4411.16,8.9947,0,0,0,0,100,0),
(232860,93,-7696.74,-4420.13,10.2243,0,0,0,0,100,0),
(232860,94,-7689.29,-4426.94,11.0171,0,0,0,0,100,0),
(232860,95,-7681.39,-4433.67,11.2938,0,0,0,0,100,0),
(232860,96,-7672.16,-4441.53,11.5514,0,0,0,0,100,0),
(232860,97,-7664.58,-4447.99,11.4495,0,0,0,0,100,0),
(232860,98,-7655.67,-4453.97,11.089,0,0,0,0,100,0),
(232860,99,-7644.63,-4461.39,10.5295,0,0,0,0,100,0),
(232860,100,-7633.9,-4468.6,9.92091,0,0,0,0,100,0),
(232860,101,-7633.04,-4476.33,9.79929,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
