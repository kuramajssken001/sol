-- DB update 2021_03_08_02 -> 2021_03_09_00
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_03_08_02';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_03_08_02 2021_03_09_00 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1615244574113351779'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1615244574113351779');

DELETE FROM `smart_scripts` WHERE `entryorguid` = 18482 AND `source_type` = 0;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(18482,0,0,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Empoor - On Respawn - Set Active On'),
(18482,0,1,0,1,0,100,0,0,0,1000,1000,0,11,12550,32,0,0,0,0,1,0,0,0,0,0,0,0,0,'Empoor - OOC - Cast ''Lightning Shield''');

DELETE FROM `waypoint_data` WHERE `id` = 666050;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(666050,1,-1954.98,4752.3,-2.76344,0,0,0,0,100,0),
(666050,2,-1957.74,4762.07,-2.1277,0,0,0,0,100,0),
(666050,3,-1958.93,4774.6,-1.30567,0,0,0,0,100,0),
(666050,4,-1959.28,4786.45,-0.680666,0,0,0,0,100,0),
(666050,5,-1957.06,4799.9,-0.055666,0,0,0,0,100,0),
(666050,6,-1952.97,4812.15,0.454229,0,0,0,0,100,0),
(666050,7,-1947.46,4824.4,0.695318,0,0,0,0,100,0),
(666050,8,-1940.22,4836.16,1.11686,0,0,0,0,100,0),
(666050,9,-1931.71,4848.86,1.7353,0,0,0,0,100,0),
(666050,10,-1926.99,4857.38,1.7353,0,0,0,0,100,0),
(666050,11,-1922.21,4869.19,1.88885,0,0,0,0,100,0),
(666050,12,-1918.47,4883.84,2.15545,0,0,0,0,100,0),
(666050,13,-1918.33,4893.27,2.52044,0,0,0,0,100,0),
(666050,14,-1921.36,4904.43,4.2868,0,0,0,0,100,0),
(666050,15,-1926.93,4916.87,7.85235,0,0,0,0,100,0),
(666050,16,-1932.68,4930.55,12.625,0,0,0,0,100,0),
(666050,17,-1936.97,4938.17,15.9194,0,0,0,0,100,0),
(666050,18,-1943.33,4944.55,19.0086,0,0,0,0,100,0),
(666050,19,-1946.57,4949.95,21.3639,0,0,0,0,100,0),
(666050,20,-1949.69,4955.15,22.9942,0,0,0,0,100,0),
(666050,21,-1953.6,4963.49,25.1101,0,0,0,0,100,0),
(666050,22,-1957.24,4971.25,26.8332,0,0,0,0,100,0),
(666050,23,-1958.18,4980.71,28.3256,0,0,0,0,100,0),
(666050,24,-1959.03,4989.21,29.7596,0,0,0,0,100,0),
(666050,25,-1959.9,5001.7,31.2713,0,0,0,0,100,0),
(666050,26,-1959.33,5009.64,32.0892,0,0,0,0,100,0),
(666050,27,-1958.82,5016.85,32.7506,0,0,0,0,100,0),
(666050,28,-1956.99,5022.53,32.775,0,0,0,0,100,0),
(666050,29,-1955.5,5027.16,32.0822,0,0,0,0,100,0),
(666050,30,-1952.13,5032.48,29.8483,0,0,0,0,100,0),
(666050,31,-1949.07,5037.3,27.6707,0,0,0,0,100,0),
(666050,32,-1940.84,5049.16,22.1251,0,0,0,0,100,0),
(666050,33,-1933.55,5052.72,20.4811,0,0,0,0,100,0),
(666050,34,-1932.81,5055.97,19.7382,0,0,0,0,100,0),
(666050,35,-1935.72,5059.01,19.1336,0,0,0,0,100,0),
(666050,36,-1938.68,5057.72,19.4552,0,0,0,0,100,0),
(666050,37,-1940.78,5053.98,20.796,0,0,0,0,100,0),
(666050,38,-1940.79,5050.4,21.7823,0,0,0,0,100,0),
(666050,39,-1943.93,5045.26,23.8994,0,0,0,0,100,0),
(666050,40,-1948.46,5038.44,27.0238,0,0,0,0,100,0),
(666050,41,-1952.35,5033.81,29.4981,0,0,0,0,100,0),
(666050,42,-1955.94,5026.93,32.1903,0,0,0,0,100,0),
(666050,43,-1957.25,5023.31,32.721,0,0,0,0,100,0),
(666050,44,-1958.85,5018.87,32.8793,0,0,0,0,100,0),
(666050,45,-1959.73,5012.75,32.4373,0,0,0,0,100,0),
(666050,46,-1960.39,5008.15,32.1039,0,0,0,0,100,0),
(666050,47,-1959.65,4995.39,30.6049,0,0,0,0,100,0),
(666050,48,-1958.53,4982.48,28.7252,0,0,0,0,100,0),
(666050,49,-1956.05,4969.47,26.4947,0,0,0,0,100,0),
(666050,50,-1951.65,4957.23,23.6336,0,0,0,0,100,0),
(666050,51,-1946.11,4948.34,20.8303,0,0,0,0,100,0),
(666050,52,-1939.52,4941.4,17.3329,0,0,0,0,100,0),
(666050,53,-1932.44,4928.97,12.0459,0,0,0,0,100,0),
(666050,54,-1927.23,4916.59,7.91558,0,0,0,0,100,0),
(666050,55,-1922.28,4905.16,4.57122,0,0,0,0,100,0),
(666050,56,-1915.32,4900.36,2.12908,0,0,0,0,100,0),
(666050,57,-1909.36,4900.6,1.0324,0,0,0,0,100,0),
(666050,58,-1901.19,4904.92,-0.753,0,0,0,0,100,0),
(666050,59,-1893.88,4911.84,-3.17073,0,0,0,0,100,0),
(666050,60,-1886.2,4920.9,-6.79732,0,0,0,0,100,0),
(666050,61,-1878.95,4930.25,-11.2615,0,0,0,0,100,0),
(666050,62,-1873.74,4937.32,-14.0713,0,0,0,0,100,0),
(666050,63,-1869.68,4942.98,-16.167,0,0,0,0,100,0),
(666050,64,-1866.75,4948.75,-17.9031,0,0,0,0,100,0),
(666050,65,-1864.94,4956.15,-19.6249,0,0,0,0,100,0),
(666050,66,-1864.55,4965.34,-21.1507,0,0,0,0,100,0),
(666050,67,-1865.52,4969.61,-21.6116,0,0,0,0,100,0),
(666050,68,-1867.73,4970.08,-21.522,0,0,0,0,100,0),
(666050,69,-1869.4,4967.93,-21.2641,0,0,0,0,100,0),
(666050,70,-1868.56,4963.51,-20.6031,0,0,0,0,100,0),
(666050,71,-1866.92,4958.65,-20.0329,0,0,0,0,100,0),
(666050,72,-1867.13,4953.81,-18.9405,0,0,0,0,100,0),
(666050,73,-1868.12,4949.35,-17.8817,0,0,0,0,100,0),
(666050,74,-1870.75,4943.62,-16.1922,0,0,0,0,100,0),
(666050,75,-1874.54,4937.91,-14.2408,0,0,0,0,100,0),
(666050,76,-1879.87,4930.65,-11.2194,0,0,0,0,100,0),
(666050,77,-1886.92,4921.4,-6.74385,0,0,0,0,100,0),
(666050,78,-1894.73,4912.09,-2.99702,0,0,0,0,100,0),
(666050,79,-1901.48,4905.4,-0.835275,0,0,0,0,100,0),
(666050,80,-1908.66,4897.94,1.18841,0,0,0,0,100,0),
(666050,81,-1911.99,4893.3,1.76443,0,0,0,0,100,0),
(666050,82,-1915.19,4888.85,2.12908,0,0,0,0,100,0),
(666050,83,-1919.66,4879.01,2.12908,0,0,0,0,100,0),
(666050,84,-1922.47,4867.42,2.00408,0,0,0,0,100,0),
(666050,85,-1927.96,4855.98,1.7353,0,0,0,0,100,0),
(666050,86,-1934.88,4844.2,1.50553,0,0,0,0,100,0),
(666050,87,-1943.72,4831.17,0.770635,0,0,0,0,100,0),
(666050,88,-1950.08,4818.39,0.579229,0,0,0,0,100,0),
(666050,89,-1957.06,4801.95,0.113653,0,0,0,0,100,0),
(666050,90,-1958.39,4790.06,-0.430666,0,0,0,0,100,0),
(666050,91,-1958.35,4777.87,-1.18067,0,0,0,0,100,0),
(666050,92,-1956.92,4764.74,-1.93239,0,0,0,0,100,0),
(666050,93,-1956.38,4755.67,-2.52003,0,0,0,0,100,0),
(666050,94,-1952.63,4747.66,-2.88844,0,0,0,0,100,0),
(666050,95,-1947.63,4738.14,-3.12416,0,0,0,0,100,0),
(666050,96,-1943.56,4726.11,-3.1066,0,0,0,0,100,0),
(666050,97,-1940.99,4712.54,-2.7316,0,0,0,0,100,0),
(666050,98,-1941.02,4699.2,-2.2491,0,0,0,0,100,0),
(666050,99,-1941.77,4688.91,-2.1241,0,0,0,0,100,0),
(666050,100,-1945.52,4676.24,-1.86056,0,0,0,0,100,0),
(666050,101,-1949.9,4664.79,-1.32178,0,0,0,0,100,0),
(666050,102,-1953.65,4652.4,-0.922855,0,0,0,0,100,0),
(666050,103,-1955.7,4641.48,-0.19678,0,0,0,0,100,0),
(666050,104,-1954.83,4628.33,0.672545,0,0,0,0,100,0),
(666050,105,-1953.23,4618.67,1.83209,0,0,0,0,100,0),
(666050,106,-1949.52,4608.74,3.14838,0,0,0,0,100,0),
(666050,107,-1947.03,4598.14,4.95848,0,0,0,0,100,0),
(666050,108,-1946.53,4587.87,6.83299,0,0,0,0,100,0),
(666050,109,-1948.29,4576.44,8.56211,0,0,0,0,100,0),
(666050,110,-1952.72,4567.67,9.98936,0,0,0,0,100,0),
(666050,111,-1958.15,4560.35,11.1732,0,0,0,0,100,0),
(666050,112,-1965.71,4551.65,12.3972,0,0,0,0,100,0),
(666050,113,-1971.08,4543.3,13.1436,0,0,0,0,100,0),
(666050,114,-1975.56,4532.99,13.4857,0,0,0,0,100,0),
(666050,115,-1977.15,4525.12,13.4151,0,0,0,0,100,0),
(666050,116,-1978.05,4513.06,12.8607,0,0,0,0,100,0),
(666050,117,-1978.59,4501.11,12.1814,0,0,0,0,100,0),
(666050,118,-1981.74,4483.69,11.3608,0,0,0,0,100,0),
(666050,119,-1987.18,4470.06,10.3305,0,0,0,0,100,0),
(666050,120,-1996.76,4455,8.79363,0,0,0,0,100,0),
(666050,121,-2004.44,4442.11,7.64109,0,0,0,0,100,0),
(666050,122,-2007.97,4429.9,6.49989,0,0,0,0,100,0),
(666050,123,-2013.41,4410.7,4.32118,0,0,0,0,100,0),
(666050,124,-2023.1,4394.42,2.78038,0,0,0,0,100,0),
(666050,125,-2032.5,4383.39,2.05858,0,0,0,0,100,0),
(666050,126,-2043.49,4372.46,1.70672,0,0,0,0,100,0),
(666050,127,-2051.5,4359.69,2.09943,0,0,0,0,100,0),
(666050,128,-2054.1,4350.86,2.43354,0,0,0,0,100,0),
(666050,129,-2056.37,4340.22,2.72443,0,0,0,0,100,0),
(666050,130,-2056.54,4330.68,2.99682,0,0,0,0,100,0),
(666050,131,-2056.66,4324.11,2.99682,0,0,0,0,100,0),
(666050,132,-2056.21,4332.02,2.99682,0,0,0,0,100,0),
(666050,133,-2056.04,4340.76,2.72443,0,0,0,0,100,0),
(666050,134,-2054.2,4351.41,2.34943,0,0,0,0,100,0),
(666050,135,-2051.37,4359.92,2.09943,0,0,0,0,100,0),
(666050,136,-2045.29,4369.33,1.69903,0,0,0,0,100,0),
(666050,137,-2036.63,4378.9,1.95672,0,0,0,0,100,0),
(666050,138,-2028.42,4387.35,2.14171,0,0,0,0,100,0),
(666050,139,-2020.79,4397.27,2.93223,0,0,0,0,100,0),
(666050,140,-2014.12,4409.57,4.22499,0,0,0,0,100,0),
(666050,141,-2010.11,4421.34,5.47364,0,0,0,0,100,0),
(666050,142,-2006.27,4435.88,7.07663,0,0,0,0,100,0),
(666050,143,-2000.81,4450.34,8.24387,0,0,0,0,100,0),
(666050,144,-1991.51,4462.02,9.33684,0,0,0,0,100,0),
(666050,145,-1984.12,4478.01,10.909,0,0,0,0,100,0),
(666050,146,-1979.11,4494.06,11.9609,0,0,0,0,100,0),
(666050,147,-1977.87,4513.34,12.8607,0,0,0,0,100,0),
(666050,148,-1977.56,4527.16,13.4319,0,0,0,0,100,0),
(666050,149,-1974.89,4537.26,13.5186,0,0,0,0,100,0),
(666050,150,-1965.71,4550.7,12.5115,0,0,0,0,100,0),
(666050,151,-1956.55,4560.43,11.1547,0,0,0,0,100,0),
(666050,152,-1949.81,4570.69,9.50242,0,0,0,0,100,0),
(666050,153,-1945.96,4583.91,7.29063,0,0,0,0,100,0),
(666050,154,-1947.07,4599.29,4.71727,0,0,0,0,100,0),
(666050,155,-1951.11,4613.88,2.40741,0,0,0,0,100,0),
(666050,156,-1955.16,4628.07,0.703918,0,0,0,0,100,0),
(666050,157,-1955.75,4639.44,-0.117313,0,0,0,0,100,0),
(666050,158,-1952.89,4651.96,-0.86951,0,0,0,0,100,0),
(666050,159,-1949.48,4665.71,-1.32178,0,0,0,0,100,0),
(666050,160,-1945.59,4678.89,-2.18648,0,0,0,0,100,0),
(666050,161,-1942.09,4687.91,-2.1241,0,0,0,0,100,0),
(666050,162,-1941.37,4696.74,-2.2491,0,0,0,0,100,0),
(666050,163,-1941.16,4708.61,-2.7316,0,0,0,0,100,0),
(666050,164,-1942.18,4717.76,-2.85513,0,0,0,0,100,0),
(666050,165,-1945.63,4731.17,-3.2316,0,0,0,0,100,0),
(666050,166,-1949.97,4740.83,-2.9258,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
