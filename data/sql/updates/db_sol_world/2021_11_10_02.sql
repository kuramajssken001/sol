-- DB update 2021_11_10_01 -> 2021_11_10_02
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_11_10_01';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_11_10_01 2021_11_10_02 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1636583172657211524'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1636583172657211524');

DELETE FROM `creature_loot_template` WHERE `Item` = 3818 AND `Entry` IN (
587,588,595,678,681,682,683,684,685,686,694,699,701,702,736,740,
741,757,767,769,856,858,879,937,938,941,1783,1784,1787,1789,1793,1795,
1796,1801,1802,1826,1907,2242,2243,2245,2246,2247,2248,2249,2252,2253,2258,2271,
2318,2319,2349,2358,2359,2376,2406,2407,2420,2431,2534,2553,2554,2559,2560,2561,
2563,2565,2567,2569,2573,2574,2578,2579,2583,2584,2586,2587,2588,2591,2592,2595,
2596,2604,2640,2643,2646,2647,2649,2651,2652,2655,2656,2658,2659,2691,2701,2715,
2717,2718,2719,2720,2727,2728,2731,2732,2745,2760,2761,2762,2763,2817,2829,2830,
2892,2924,2925,2926,2927,2928,2929,3715,3981,4096,4133,4286,4287,4288,4289,4290,
4291,4292,4295,4296,4297,4298,4299,4300,4301,4302,4304,4306,4308,4435,4436,4437,
4438,4440,4442,4457,4458,4459,4461,4467,4469,4493,4494,4506,4511,4514,4515,4516,
4517,4518,4520,4522,4525,4532,4540,4541,4623,4636,4637,4644,4670,4674,5474,5475,
5476,5477,5601,5602,5615,5616,5623,5844,5846,5854,5858,5861,5975,5976,6035,6117,
6126,6129,6185,6194,6199,6200,6426,6547,6556,6557,6733,7011,7012,7022,7025,7026,
7027,7033,7035,7040,7041,7042,7043,7078,7329,7337,7341,7346,7347,7353,7439,7440,
7447,7523,7666,7855,7857,7885,7886,8210,8283,8504,8526,8532,8545,8546,8547,8550,
8558,9096,9097,9197,9216,9241,9257,9259,9263,9266,9269,9583,9692,9693,9817,10382,
10398,10399,10400,10405,10406,10407,10463,10602,11441,11448,11452,11476,11477,11748,11790,11791,
12217,12221,12222,12250);

UPDATE `creature_template` SET `lootid` = 0 WHERE `Entry` IN (5476,11748);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
