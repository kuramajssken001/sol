-- DB update 2021_02_07_01 -> 2021_02_07_02
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_02_07_01';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_02_07_01 2021_02_07_02 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1612722983454422080'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1612722983454422080');

DELETE FROM `waypoint_data` WHERE `id` = 18870;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(18870,1,-4663,-1269,503.382,0,10000,0,0,100,0),
(18870,2,-4652.57,-1281.43,503.382,0,0,0,0,100,0),
(18870,3,-4681.81,-1298.96,503.382,5.24437,10000,0,0,100,0),
(18870,4,-4700.04,-1308.36,503.382,5.06372,5000,0,0,100,0),
(18870,5,-4704.58,-1311.66,503.382,0,0,0,0,100,0),
(18870,6,-4712.42,-1324.41,503.382,3.72462,10000,0,0,100,0),
(18870,7,-4694.95,-1326.21,503.382,0,0,0,0,100,0),
(18870,8,-4674.75,-1311.14,503.382,0,0,0,0,100,0),
(18870,9,-4648.8,-1289.29,503.382,0,0,0,0,100,0),
(18870,10,-4627.78,-1262.4,503.382,0.26494,10000,0,0,100,0),
(18870,11,-4626.95,-1258.42,503.382,0,0,0,0,100,0),
(18870,12,-4604.56,-1237.26,503.382,0.948236,5000,0,0,100,0),
(18870,13,-4609.31,-1233.77,503.382,0,0,0,0,100,0),
(18870,14,-4603.11,-1224.81,503.382,0,0,0,0,100,0),
(18870,15,-4587.56,-1222.73,503.382,5.95909,10000,0,5004,100,0),
(18870,16,-4601.95,-1223.4,503.382,0,0,0,0,100,0),
(18870,17,-4615.15,-1239.59,503.382,0,0,0,0,100,0),
(18870,18,-4630.86,-1258.84,503.382,0,0,0,0,100,0),
(18870,19,-4648.99,-1281.07,503.382,0,0,0,0,100,0);

DELETE FROM `waypoint_scripts` WHERE `guid` = 5004;
INSERT INTO `waypoint_scripts` (`id`, `delay`, `command`, `datalong`, `datalong2`, `dataint`, `x`, `y`, `z`, `o`, `guid`)
VALUES
(5004,2,1,11,0,0,0,0,0,0,5004);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
