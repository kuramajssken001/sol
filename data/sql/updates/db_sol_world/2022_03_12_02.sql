-- DB update 2022_03_12_01 -> 2022_03_12_02
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2022_03_12_01';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2022_03_12_01 2022_03_12_02 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1647096843276088975'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1647096843276088975');

DELETE FROM `creature_formations` WHERE `leaderGUID` = 6251;
INSERT INTO `creature_formations` (`leaderGUID`, `memberGUID`, `dist`, `angle`, `groupAI`)
VALUES
(6251,6251,0,0,2),
(6251,6691,2,315,2),
(6251,6690,2,45,2);

DELETE FROM `waypoint_data` WHERE `id` = 62510;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `pathfinding`, `action`, `action_chance`, `wpguid`)
VALUES
(62510,1,-6725.15,-1616.75,193.867,0,1000,0,0,0,100,0),
(62510,2,-6718.35,-1618.74,195.552,0,0,0,0,0,100,0),
(62510,3,-6708.08,-1622.06,199.538,0,0,0,0,0,100,0),
(62510,4,-6701.76,-1624.45,203.413,0,0,0,0,0,100,0),
(62510,5,-6691.67,-1628.26,209.179,0,0,0,0,0,100,0),
(62510,6,-6684.27,-1632.64,213.292,0,0,0,0,0,100,0),
(62510,7,-6681.28,-1642.27,220.028,0,0,0,0,0,100,0),
(62510,8,-6680.12,-1651.14,224.573,0,0,0,0,0,100,0),
(62510,9,-6676.53,-1658.86,227.004,0,0,0,0,0,100,0),
(62510,10,-6674.09,-1664.28,228.869,0,0,0,0,0,100,0),
(62510,11,-6672.81,-1672.94,231.732,0,0,0,0,0,100,0),
(62510,12,-6671.72,-1680.35,234.202,0,0,0,0,0,100,0),
(62510,13,-6672.98,-1688.65,237.136,0,0,0,0,0,100,0),
(62510,14,-6674.07,-1695.84,240.208,0,0,0,0,0,100,0),
(62510,15,-6675.74,-1702.15,243.457,0,0,0,0,0,100,0),
(62510,16,-6676.95,-1706.72,245.947,0,0,0,0,0,100,0),
(62510,17,-6678.36,-1713.45,248.667,0,0,0,0,0,100,0),
(62510,18,-6679.4,-1718.39,250.558,0,0,0,0,0,100,0),
(62510,19,-6678.15,-1726.11,254.393,0,0,0,0,0,100,0),
(62510,20,-6675.17,-1732.44,257.052,0,0,0,0,0,100,0),
(62510,21,-6672.43,-1738.25,259.335,0,0,0,0,0,100,0),
(62510,22,-6671.17,-1742.82,259.921,0,0,0,0,0,100,0),
(62510,23,-6669.66,-1748.33,259.743,0,0,0,0,0,100,0),
(62510,24,-6668.42,-1752.82,259.743,0,1000,0,0,0,100,0),
(62510,25,-6669.97,-1747.44,259.743,0,0,0,0,0,100,0),
(62510,26,-6671.18,-1743.25,259.892,0,0,0,0,0,100,0),
(62510,27,-6672.81,-1737.6,259.215,0,0,0,0,0,100,0),
(62510,28,-6677.29,-1729.81,255.844,0,0,0,0,0,100,0),
(62510,29,-6680.61,-1724.04,253.074,0,0,0,0,0,100,0),
(62510,30,-6679.88,-1718.89,250.761,0,0,0,0,0,100,0),
(62510,31,-6678.94,-1712.2,248.076,0,0,0,0,0,100,0),
(62510,32,-6678.06,-1705.94,245.666,0,0,0,0,0,100,0),
(62510,33,-6676.08,-1701.08,242.913,0,0,0,0,0,100,0),
(62510,34,-6674.26,-1696.61,240.596,0,0,0,0,0,100,0),
(62510,35,-6673.37,-1689.43,237.439,0,0,0,0,0,100,0),
(62510,36,-6672.56,-1682.89,235.076,0,0,0,0,0,100,0),
(62510,37,-6672.68,-1676.47,232.993,0,0,0,0,0,100,0),
(62510,38,-6672.82,-1669.12,230.316,0,0,0,0,0,100,0),
(62510,39,-6672.93,-1663.49,228.519,0,0,0,0,0,100,0),
(62510,40,-6675.46,-1656.46,226.135,0,0,0,0,0,100,0),
(62510,41,-6677.92,-1649.65,223.977,0,0,0,0,0,100,0),
(62510,42,-6679.52,-1645.23,221.44,0,0,0,0,0,100,0),
(62510,43,-6680.92,-1641.38,219.635,0,0,0,0,0,100,0),
(62510,44,-6683.37,-1635.12,214.931,0,0,0,0,0,100,0),
(62510,45,-6686.22,-1631.57,212.342,0,0,0,0,0,100,0),
(62510,46,-6688.6,-1628.61,210.363,0,0,0,0,0,100,0),
(62510,47,-6693.79,-1627.01,207.912,0,0,0,0,0,100,0),
(62510,48,-6700.63,-1624.9,204.073,0,0,0,0,0,100,0),
(62510,49,-6708.02,-1622.62,199.696,0,0,0,0,0,100,0),
(62510,50,-6714.05,-1620.65,197.035,0,0,0,0,0,100,0),
(62510,51,-6720.01,-1618.56,195.105,0,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
