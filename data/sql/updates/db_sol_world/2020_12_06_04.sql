-- DB update 2020_12_06_03 -> 2020_12_06_04
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2020_12_06_03';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2020_12_06_03 2020_12_06_04 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1607270396960571128'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1607270396960571128');

UPDATE `creature_template` SET `speed_walk` = 1.1 WHERE `entry` = 22060;

UPDATE `creature` SET `wander_distance` = 0, `MovementType` = 2 WHERE `guid` IN (77280,77281);

DELETE FROM `creature_addon` WHERE `guid` IN (77280,77281);
INSERT INTO `creature_addon` (`guid`, `path_id`, `mount`, `bytes1`, `bytes2`, `emote`, `isLarge`, `auras`)
VALUES
(77280,772800,0,131072,1,0,0,'34189'),
(77281,772810,0,131072,1,0,0,'34189');

UPDATE `creature_template` SET `AIName` = 'SmartAI' WHERE `entry` = 22060;
DELETE FROM `smart_scripts` WHERE `entryorguid` = 22060 AND `source_type` = 0;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(22060,0,0,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Fenissa the Assassin - On Respawn - Set Active On');

DELETE FROM `waypoint_data` WHERE `id` IN (772800,772810);
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(772800,1,-2018.4,-10779.8,83.9194,0,0,0,0,100,0),
(772800,2,-2009.19,-10774.9,86.3301,0,0,0,0,100,0),
(772800,3,-1997.48,-10777.2,88.1848,0,0,0,0,100,0),
(772800,4,-1989.05,-10780.9,88.9741,0,0,0,0,100,0),
(772800,5,-1978.68,-10785.4,89.0353,0,0,0,0,100,0),
(772800,6,-1966.53,-10790.7,88.7789,0,0,0,0,100,0),
(772800,7,-1960.01,-10794,88.3989,0,0,0,0,100,0),
(772800,8,-1954.79,-10796.6,87.7502,0,0,0,0,100,0),
(772800,9,-1949.46,-10802,86.7372,0,0,0,0,100,0),
(772800,10,-1943.7,-10807.8,84.992,0,0,0,0,100,0),
(772800,11,-1940.51,-10813.1,83.1146,0,0,0,0,100,0),
(772800,12,-1937.79,-10817.6,81.4528,0,0,0,0,100,0),
(772800,13,-1935.89,-10826.3,78.3668,0,0,0,0,100,0),
(772800,14,-1934.43,-10832.9,76.0153,0,0,0,0,100,0),
(772800,15,-1936.83,-10839.2,73.8802,0,0,0,0,100,0),
(772800,16,-1939.2,-10845.5,71.8459,0,0,0,0,100,0),
(772800,17,-1938.78,-10852.4,69.7248,0,0,0,0,100,0),
(772800,18,-1938.4,-10858.5,68.2741,0,0,0,0,100,0),
(772800,19,-1931.85,-10865,66.9467,0,0,0,0,100,0),
(772800,20,-1925.66,-10871.1,65.9228,0,0,0,0,100,0),
(772800,21,-1919.96,-10871.7,64.9157,0,0,0,0,100,0),
(772800,22,-1913.74,-10872.4,63.2952,0,0,0,0,100,0),
(772800,23,-1907.46,-10870.2,64.024,0,0,0,0,100,0),
(772800,24,-1901.63,-10868.2,65.0126,0,0,0,0,100,0),
(772800,25,-1896.27,-10866.3,66.1058,0,0,0,0,100,0),
(772800,26,-1901.97,-10868.4,64.928,0,0,0,0,100,0),
(772800,27,-1908.54,-10870.7,63.9294,0,0,0,0,100,0),
(772800,28,-1912.27,-10872.1,63.2463,0,0,0,0,100,0),
(772800,29,-1917.51,-10871.8,64.0933,0,0,0,0,100,0),
(772800,30,-1922.76,-10871.6,65.5605,0,0,0,0,100,0),
(772800,31,-1924.78,-10871.5,65.862,0,0,0,0,100,0),
(772800,32,-1930.18,-10867.8,66.4891,0,0,0,0,100,0),
(772800,33,-1935.38,-10864.3,67.0354,0,0,0,0,100,0),
(772800,34,-1937.83,-10859,68.1728,0,0,0,0,100,0),
(772800,35,-1940.43,-10853.4,69.2778,0,0,0,0,100,0),
(772800,36,-1937.82,-10844.6,72.1658,0,0,0,0,100,0),
(772800,37,-1935.72,-10838.8,74.0473,0,0,0,0,100,0),
(772800,38,-1933.96,-10833.9,75.6676,0,0,0,0,100,0),
(772800,39,-1935.61,-10825.3,78.7507,0,0,0,0,100,0),
(772800,40,-1936.99,-10818.1,81.2,0,0,0,0,100,0),
(772800,41,-1939.91,-10813.6,82.9024,0,0,0,0,100,0),
(772800,42,-1943.35,-10808.3,84.7891,0,0,0,0,100,0),
(772800,43,-1948.67,-10802.6,86.6114,0,0,0,0,100,0),
(772800,44,-1953.57,-10797.3,87.5858,0,0,0,0,100,0),
(772800,45,-1959.26,-10794.3,88.3271,0,0,0,0,100,0),
(772800,46,-1966.19,-10790.7,88.7802,0,0,0,0,100,0),
(772800,47,-1977.21,-10785.9,89.026,0,0,0,0,100,0),
(772800,48,-1987.59,-10781.4,89.0122,0,0,0,0,100,0),
(772800,49,-1997.18,-10777.2,88.2231,0,0,0,0,100,0),
(772800,50,-2007.82,-10770.7,86.6695,0,0,0,0,100,0),
(772800,51,-2016.88,-10770.5,85.2932,0,0,0,0,100,0),
(772800,52,-2024.94,-10775.8,83.353,0,0,0,0,100,0),
(772800,53,-2029.05,-10781.7,81.9793,0,0,0,0,100,0),
(772800,54,-2033.24,-10787.8,80.3216,0,0,0,0,100,0),
(772800,55,-2037.53,-10793.6,78.618,0,0,0,0,100,0),
(772800,56,-2041.92,-10799.6,76.6983,0,0,0,0,100,0),
(772800,57,-2046.65,-10804.3,74.8058,0,0,0,0,100,0),
(772800,58,-2051.54,-10809.1,72.7721,0,0,0,0,100,0),
(772800,59,-2056.36,-10813.9,70.8753,0,0,0,0,100,0),
(772800,60,-2062.41,-10818.1,68.7585,0,0,0,0,100,0),
(772800,61,-2068.36,-10822.2,67.4542,0,0,0,0,100,0),
(772800,62,-2073.48,-10822.5,67.0907,0,0,0,0,100,0),
(772800,63,-2078.3,-10822.7,66.9212,0,0,0,0,100,0),
(772800,64,-2085.57,-10818.7,67.1834,0,0,0,0,100,0),
(772800,65,-2089.24,-10811.7,67.1248,0,0,0,0,100,0),
(772800,66,-2093.56,-10803.4,66.9846,0,0,0,0,100,0),
(772800,67,-2088.97,-10812.2,67.1394,0,0,0,0,100,0),
(772800,68,-2085.88,-10817.9,67.1677,0,0,0,0,100,0),
(772800,69,-2081.22,-10820.2,66.9147,0,0,0,0,100,0),
(772800,70,-2075.81,-10822.9,66.981,0,0,0,0,100,0),
(772800,71,-2069.69,-10821.4,67.3729,0,0,0,0,100,0),
(772800,72,-2063.41,-10819.9,68.265,0,0,0,0,100,0),
(772800,73,-2058.95,-10816.1,69.9028,0,0,0,0,100,0),
(772800,74,-2055,-10812.8,71.3805,0,0,0,0,100,0),
(772800,75,-2050.41,-10808.2,73.2009,0,0,0,0,100,0),
(772800,76,-2045.8,-10803.5,75.1481,0,0,0,0,100,0),
(772800,77,-2042.03,-10799.7,76.6537,0,0,0,0,100,0),
(772800,78,-2037.13,-10796,78.2089,0,0,0,0,100,0),
(772800,79,-2030.82,-10791.1,79.9115,0,0,0,0,100,0),
(772800,80,-2024.38,-10786.2,81.8813,0,0,0,0,100,0),

(772810,1,-2087.58,-11384.4,62.8749,0,0,0,0,100,0),
(772810,2,-2080.23,-11385.7,62.8925,0,0,0,0,100,0),
(772810,3,-2073,-11387,63.0597,0,0,0,0,100,0),
(772810,4,-2063.85,-11388.7,62.7058,0,0,0,0,100,0),
(772810,5,-2056.51,-11385.1,62.5987,0,0,0,0,100,0),
(772810,6,-2050.02,-11381.9,62.7033,0,0,0,0,100,0),
(772810,7,-2042.63,-11378.3,63.2969,0,0,0,0,100,0),
(772810,8,-2037.36,-11372.3,64.1124,0,0,0,0,100,0),
(772810,9,-2033.22,-11367.5,64.9342,0,0,0,0,100,0),
(772810,10,-2029.35,-11363.1,66.0157,0,0,0,0,100,0),
(772810,11,-2026.83,-11356.4,65.2633,0,0,0,0,100,0),
(772810,12,-2025.01,-11351.6,65.0329,0,0,0,0,100,0),
(772810,13,-2023.07,-11346.5,65.1823,0,0,0,0,100,0),
(772810,14,-2021.29,-11341.8,64.3625,0,0,0,0,100,0),
(772810,15,-2020.22,-11334,63.4975,0,0,0,0,100,0),
(772810,16,-2021.53,-11328.7,64.772,0,0,0,0,100,0),
(772810,17,-2023.12,-11322.2,66.1525,0,0,0,0,100,0),
(772810,18,-2025.8,-11315.5,66.6907,0,0,0,0,100,0),
(772810,19,-2028.22,-11309.4,67.2899,0,0,0,0,100,0),
(772810,20,-2030.7,-11303.2,67.8879,0,0,0,0,100,0),
(772810,21,-2028.67,-11296.6,68.1452,0,0,0,0,100,0),
(772810,22,-2026.73,-11290.3,69.0449,0,0,0,0,100,0),
(772810,23,-2026.67,-11283.4,70.3952,0,0,0,0,100,0),
(772810,24,-2027.98,-11278.9,69.0787,0,0,0,0,100,0),
(772810,25,-2029.25,-11274.6,67.533,0,0,0,0,100,0),
(772810,26,-2032.87,-11270.6,68.477,0,0,0,0,100,0),
(772810,27,-2036.82,-11266.3,69.8094,0,0,0,0,100,0),
(772810,28,-2041.98,-11264.5,68.7992,0,0,0,0,100,0),
(772810,29,-2046.86,-11262.7,67.8685,0,0,0,0,100,0),
(772810,30,-2052.89,-11261.4,68.5594,0,0,0,0,100,0),
(772810,31,-2059.72,-11259.8,69.7659,0,0,0,0,100,0),
(772810,32,-2065.65,-11258.5,69.4749,0,0,0,0,100,0),
(772810,33,-2072.13,-11257.6,68.5283,0,0,0,0,100,0),
(772810,34,-2076.87,-11257,68.6058,0,0,0,0,100,0),
(772810,35,-2084.64,-11256,69.9936,0,0,0,0,100,0),
(772810,36,-2089.37,-11255.3,70.0774,0,0,0,0,100,0),
(772810,37,-2094.79,-11254.5,68.6893,0,0,0,0,100,0),
(772810,38,-2099.87,-11253.7,67.3001,0,0,0,0,100,0),
(772810,39,-2106.95,-11255.2,66.7411,0,0,0,0,100,0),
(772810,40,-2113.68,-11256.6,66.4249,0,0,0,0,100,0),
(772810,41,-2118.8,-11258.6,67.0509,0,0,0,0,100,0),
(772810,42,-2123.6,-11260.4,68.3167,0,0,0,0,100,0),
(772810,43,-2127.98,-11262.1,68.886,0,0,0,0,100,0),
(772810,44,-2133.3,-11266.4,67.9431,0,0,0,0,100,0),
(772810,45,-2137.41,-11274,68.2033,0,0,0,0,100,0),
(772810,46,-2138.95,-11279,66.1877,0,0,0,0,100,0),
(772810,47,-2140.4,-11283.7,63.0636,0,0,0,0,100,0),
(772810,48,-2141.49,-11287.2,61.278,0,0,0,0,100,0),
(772810,49,-2140.23,-11292.6,60.6705,0,0,0,0,100,0),
(772810,50,-2138.78,-11298.9,60.6863,0,0,0,0,100,0),
(772810,51,-2137.39,-11304.9,61.2644,0,0,0,0,100,0),
(772810,52,-2137.34,-11310.9,62.0372,0,0,0,0,100,0),
(772810,53,-2137.27,-11317.6,62.2886,0,0,0,0,100,0),
(772810,54,-2137.21,-11325.2,62.1899,0,0,0,0,100,0),
(772810,55,-2137.14,-11332.4,61.6994,0,0,0,0,100,0),
(772810,56,-2136.08,-11339.3,62.0144,0,0,0,0,100,0),
(772810,57,-2135.03,-11346.2,62.3047,0,0,0,0,100,0),
(772810,58,-2133.23,-11352.4,63.3396,0,0,0,0,100,0),
(772810,59,-2131.52,-11358.2,63.7687,0,0,0,0,100,0),
(772810,60,-2129.76,-11364.2,63.5013,0,0,0,0,100,0),
(772810,61,-2126.39,-11369.1,63.7609,0,0,0,0,100,0),
(772810,62,-2123.03,-11374,64.2863,0,0,0,0,100,0),
(772810,63,-2115.86,-11376.1,64.254,0,0,0,0,100,0),
(772810,64,-2108.87,-11378.1,64.1418,0,0,0,0,100,0),
(772810,65,-2102.72,-11379.9,63.9232,0,0,0,0,100,0),
(772810,66,-2095.22,-11382.1,63.3858,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
