-- DB update 2020_11_28_01 -> 2020_11_29_00
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2020_11_28_01';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2020_11_28_01 2020_11_29_00 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1606605292905381533'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1606605292905381533');

UPDATE `creature` SET `position_x` = 664.315, `position_y` = -1027.59, `position_z` = 160.39, `MovementType` = 2 WHERE `guid` = 63913;

DELETE FROM `creature_addon` WHERE `guid` = 63913;
INSERT INTO `creature_addon` (`guid`, `path_id`, `mount`, `bytes1`, `bytes2`, `emote`, `isLarge`, `auras`)
VALUES
(63913,639130,0,0,0,0,0,NULL);

DELETE FROM `smart_scripts` WHERE `entryorguid` = 2258 AND `source_type` = 0 AND `id` = 2;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(2258,0,2,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Stone Fury - On Respawn - Set Active On');

DELETE FROM `waypoint_data` WHERE `id` = 639130;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(639130,1,664.315,-1027.59,160.39,0,0,0,0,100,0),
(639130,2,659.729,-1029.71,161.205,0,0,0,0,100,0),
(639130,3,654.02,-1032.34,163.127,0,0,0,0,100,0),
(639130,4,649.146,-1034.61,164.219,0,0,0,0,100,0),
(639130,5,644.732,-1036.66,164.698,0,0,0,0,100,0),
(639130,6,639.87,-1038.93,164.332,0,0,0,0,100,0),
(639130,7,634.638,-1041.36,163.816,0,0,0,0,100,0),
(639130,8,628.343,-1048.57,163.389,0,0,0,0,100,0),
(639130,9,622.304,-1055.48,163.186,0,0,0,0,100,0),
(639130,10,621.917,-1065.85,162.774,0,0,0,0,100,0),
(639130,11,621.503,-1076.93,162.379,0,0,0,0,100,0),
(639130,12,621.111,-1087.42,162.059,0,0,0,0,100,0),
(639130,13,620.645,-1099.9,161.38,0,0,0,0,100,0),
(639130,14,620.168,-1114.91,160.186,0,0,0,0,100,0),
(639130,15,623.432,-1122.64,160.088,0,0,0,0,100,0),
(639130,16,627.218,-1131.61,159.535,0,0,0,0,100,0),
(639130,17,629.468,-1140.07,157.467,0,0,0,0,100,0),
(639130,18,631.939,-1149.35,155.421,0,0,0,0,100,0),
(639130,19,631.52,-1158.33,153.23,0,0,0,0,100,0),
(639130,20,631.02,-1169.05,149.92,0,0,0,0,100,0),
(639130,21,630.509,-1180,147.554,0,0,0,0,100,0),
(639130,22,629.934,-1192.34,145.181,0,0,0,0,100,0),
(639130,23,631.006,-1202.08,143.551,0,0,0,0,100,0),
(639130,24,631.924,-1210.42,141.718,0,0,0,0,100,0),
(639130,25,632.907,-1219.36,139.324,0,0,0,0,100,0),
(639130,26,633.981,-1229.12,136.877,0,0,0,0,100,0),
(639130,27,634.157,-1239.04,133.418,0,0,0,0,100,0),
(639130,28,634.332,-1248.95,129.976,0,0,0,0,100,0),
(639130,29,634.526,-1259.92,125.358,0,0,0,0,100,0),
(639130,30,634.73,-1271.43,121.429,0,0,0,0,100,0),
(639130,31,633.301,-1281.13,118.254,0,0,0,0,100,0),
(639130,32,631.719,-1291.86,114.764,0,0,0,0,100,0),
(639130,33,629.56,-1306.51,110.438,0,0,0,0,100,0),
(639130,34,627.306,-1321.81,106.197,0,0,0,0,100,0),
(639130,35,627.811,-1334.63,103.389,0,0,0,0,100,0),
(639130,36,628.26,-1346.05,100.503,0,0,0,0,100,0),
(639130,37,628.848,-1360.98,96.8927,0,0,0,0,100,0),
(639130,38,629.422,-1375.57,93.9589,0,0,0,0,100,0),
(639130,39,633.985,-1386.05,91.6366,0,0,0,0,100,0),
(639130,40,638.873,-1397.28,88.9119,0,0,0,0,100,0),
(639130,41,643.925,-1408.88,87.1831,0,0,0,0,100,0),
(639130,42,651.347,-1417.57,86.2574,0,0,0,0,100,0),
(639130,43,659.151,-1426.71,84.489,0,0,0,0,100,0),
(639130,44,668.443,-1437.6,81.8552,0,0,0,0,100,0),
(639130,45,679.061,-1442.44,81.6459,0,0,0,0,100,0),
(639130,46,692.763,-1448.68,81.6931,0,0,0,0,100,0),
(639130,47,708.689,-1455.94,81.4619,0,0,0,0,100,0),
(639130,48,721.573,-1457.25,81.5986,0,0,0,0,100,0),
(639130,49,734.108,-1458.52,80.9678,0,0,0,0,100,0),
(639130,50,745.689,-1459.7,80.3421,0,0,0,0,100,0),
(639130,51,734.108,-1458.52,80.9678,0,0,0,0,100,0),
(639130,52,721.573,-1457.25,81.5986,0,0,0,0,100,0),
(639130,53,708.769,-1455.86,81.4599,0,0,0,0,100,0),
(639130,54,692.763,-1448.68,81.6931,0,0,0,0,100,0),
(639130,55,679.061,-1442.44,81.6459,0,0,0,0,100,0),
(639130,56,667.903,-1437.37,81.9153,0,0,0,0,100,0),
(639130,57,659.151,-1426.71,84.489,0,0,0,0,100,0),
(639130,58,651.347,-1417.57,86.2574,0,0,0,0,100,0),
(639130,59,643.733,-1408.63,87.2146,0,0,0,0,100,0),
(639130,60,638.873,-1397.28,88.9119,0,0,0,0,100,0),
(639130,61,633.985,-1386.05,91.6366,0,0,0,0,100,0),
(639130,62,629.19,-1375.19,94.0446,0,0,0,0,100,0),
(639130,63,628.848,-1360.98,96.8927,0,0,0,0,100,0),
(639130,64,628.26,-1346.05,100.503,0,0,0,0,100,0),
(639130,65,627.811,-1334.63,103.389,0,0,0,0,100,0),
(639130,66,627.374,-1321.59,106.257,0,0,0,0,100,0),
(639130,67,629.56,-1306.51,110.438,0,0,0,0,100,0),
(639130,68,631.719,-1291.86,114.764,0,0,0,0,100,0),
(639130,69,633.301,-1281.13,118.254,0,0,0,0,100,0),
(639130,70,634.783,-1271.27,121.478,0,0,0,0,100,0),
(639130,71,634.526,-1259.92,125.358,0,0,0,0,100,0),
(639130,72,634.332,-1248.95,129.976,0,0,0,0,100,0),
(639130,73,634.157,-1239.04,133.418,0,0,0,0,100,0),
(639130,74,633.98,-1228.57,137.007,0,0,0,0,100,0),
(639130,75,632.907,-1219.36,139.324,0,0,0,0,100,0),
(639130,76,631.924,-1210.42,141.718,0,0,0,0,100,0),
(639130,77,631.006,-1202.08,143.551,0,0,0,0,100,0),
(639130,78,629.947,-1191.76,145.328,0,0,0,0,100,0),
(639130,79,630.509,-1180,147.554,0,0,0,0,100,0),
(639130,80,631.02,-1169.05,149.92,0,0,0,0,100,0),
(639130,81,631.52,-1158.33,153.23,0,0,0,0,100,0),
(639130,82,631.939,-1148.87,155.504,0,0,0,0,100,0),
(639130,83,629.468,-1140.07,157.467,0,0,0,0,100,0),
(639130,84,627.116,-1131.07,159.662,0,0,0,0,100,0),
(639130,85,623.432,-1122.64,160.088,0,0,0,0,100,0),
(639130,86,620.092,-1114.7,160.189,0,0,0,0,100,0),
(639130,87,620.645,-1099.9,161.38,0,0,0,0,100,0),
(639130,88,621.111,-1087.42,162.059,0,0,0,0,100,0),
(639130,89,621.503,-1076.93,162.379,0,0,0,0,100,0),
(639130,90,621.917,-1065.85,162.774,0,0,0,0,100,0),
(639130,91,622.218,-1054.98,163.22,0,0,0,0,100,0),
(639130,92,628.343,-1048.57,163.389,0,0,0,0,100,0),
(639130,93,634.789,-1041.15,163.826,0,0,0,0,100,0),
(639130,94,639.87,-1038.93,164.332,0,0,0,0,100,0),
(639130,95,644.732,-1036.66,164.698,0,0,0,0,100,0),
(639130,96,649.146,-1034.61,164.219,0,0,0,0,100,0),
(639130,97,653.802,-1032.34,163.225,0,0,0,0,100,0),
(639130,98,659.729,-1029.71,161.205,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
