-- DB update 2020_04_17_00 -> 2020_04_17_01
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2020_04_17_00';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2020_04_17_00 2020_04_17_01 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1587156526054377393'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1587156526054377393');

UPDATE `creature` SET `MovementType` = 2 WHERE `guid` = 45441;
UPDATE `creature_addon` SET `path_id` = 4544100 WHERE `guid` = 45441;
DELETE FROM `waypoint_data` WHERE `id` = 4544100;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(4544100,1,1943.1,-1638.63,60.6162,0,0,0,0,100,0),
(4544100,2,1933.6,-1633.42,60.1643,0,0,0,0,100,0),
(4544100,3,1926.84,-1627.34,60.4862,0,0,0,0,100,0),
(4544100,4,1920.64,-1620.85,60.7141,0,0,0,0,100,0),
(4544100,5,1918.31,-1615.13,60.7806,0,0,0,0,100,0),
(4544100,6,1916.46,-1609.71,61.0051,0,0,0,0,100,0),
(4544100,7,1916.7,-1604.35,60.5827,0,0,0,0,100,0),
(4544100,8,1918.03,-1598.57,60.6148,0,0,0,0,100,0),
(4544100,9,1920.92,-1594.52,60.8178,0,0,0,0,100,0),
(4544100,10,1925.25,-1592.82,61.0517,0,0,0,0,100,0),
(4544100,11,1929.54,-1592.66,61.2406,0,0,0,0,100,0),
(4544100,12,1936.76,-1593.09,60.9472,0,0,0,0,100,0),
(4544100,13,1942.6,-1594.11,60.5632,0,0,0,0,100,0),
(4544100,14,1948.26,-1596.3,60.4732,0,0,0,0,100,0),
(4544100,15,1954.38,-1600.92,60.2544,0,0,0,0,100,0),
(4544100,16,1958.32,-1605.34,60.3231,0,0,0,0,100,0),
(4544100,17,1959.98,-1611.7,60.1231,0,0,0,0,100,0),
(4544100,18,1960.3,-1617.87,60.0474,0,0,0,0,100,0),
(4544100,19,1959.81,-1623.78,60.4067,0,0,0,0,100,0),
(4544100,20,1958.71,-1629.27,61.3506,0,0,0,0,100,0),
(4544100,21,1957.46,-1633.65,62.1044,0,0,0,0,100,0),
(4544100,22,1955.63,-1637.16,62.5316,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
