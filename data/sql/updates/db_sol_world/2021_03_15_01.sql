-- DB update 2021_03_15_00 -> 2021_03_15_01
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_03_15_00';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_03_15_00 2021_03_15_01 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1615847405682356673'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1615847405682356673');

UPDATE `creature` SET `position_x` = -8626.66, `position_y` = 751.343, `position_z` = 96.7987 WHERE `guid` = 79812;
UPDATE `creature` SET `orientation` = 5.40314 WHERE `guid` = 79804;
UPDATE `creature` SET `orientation` = 2.26155 WHERE `guid` = 79803;
UPDATE `creature` SET `wander_distance` = 0, `MovementType` = 2 WHERE `guid` IN (79813,79805);

DELETE FROM `creature_addon` WHERE `guid` IN (79813,79805);
INSERT INTO `creature_addon` (`guid`, `path_id`, `mount`, `bytes1`, `bytes2`, `emote`, `isLarge`, `auras`)
VALUES
(79813,798130,0,0,0,0,0,NULL),
(79805,798050,0,0,0,0,0,NULL);

DELETE FROM `waypoint_data` WHERE `id` IN (798130,798050);
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(798130,1,-8603.15,743.224,101.904,0,0,0,0,100,0),
(798130,2,-8605.12,743.549,101.904,2.3173,14000,0,0,100,0),
(798130,3,-8609.23,739.938,101.904,0,0,0,0,100,0),
(798130,4,-8613.84,739.184,101.902,0,21000,0,0,100,0),
(798130,5,-8613.68,736.331,101.901,0,0,0,0,100,0),
(798130,6,-8619.52,731.822,101.898,2.20735,9000,0,0,100,0),
(798130,7,-8604.5,726.621,101.903,5.42355,17000,0,0,100,0),
(798130,8,-8601.56,734.37,101.903,0,0,0,0,100,0),
(798130,9,-8595.82,740.041,101.904,0,0,0,0,100,0),
(798130,10,-8598.2,742.719,101.904,0,0,0,0,100,0),
(798130,11,-8600.85,741.935,101.904,0,0,0,0,100,0),

(798050,1,-8617.75,730.553,101.904,6.04756,17000,0,0,100,0),
(798050,2,-8612.84,731.292,101.901,0.209227,6000,0,0,100,0),
(798050,3,-8609.89,728.599,101.902,0,0,0,0,100,0),
(798050,4,-8605.42,731.457,101.902,0.425348,11000,0,0,100,0),
(798050,5,-8608.87,730.482,101.904,3.25671,8000,0,0,100,0),
(798050,6,-8609.11,732.71,101.904,1.66628,4000,0,0,100,0),
(798050,7,-8612.33,729.645,101.904,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
