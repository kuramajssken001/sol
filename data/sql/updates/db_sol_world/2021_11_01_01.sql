-- DB update 2021_11_01_00 -> 2021_11_01_01
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_11_01_00';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_11_01_00 2021_11_01_01 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1635805895301232619'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1635805895301232619');

UPDATE `gameobject` SET `position_z` = 47.4207 WHERE `guid` = 5281;
UPDATE `gameobject` SET `position_z` = 65.9904 WHERE `guid` = 5276;

DELETE FROM `gameobject` WHERE `guid` BETWEEN 3009012 AND 3009019;
INSERT INTO `gameobject` (`guid`, `id`, `map`, `zoneId`, `areaId`, `spawnMask`, `phaseMask`, `position_x`, `position_y`, `position_z`, `orientation`, `rotation0`, `rotation1`, `rotation2`, `rotation3`, `spawntimesecs`, `animprogress`, `state`, `VerifiedBuild`)
VALUES
(3009012,176214,0,0,0,1,1,1342.56,-1382.57,46.8919,2.77507,0,0,0.983254,0.182238,900,100,1,0),
(3009013,176214,0,0,0,1,1,1529.1,-1427.07,65.4905,-3.00195,0,0,-0.997563,0.0697661,900,100,1,0),
(3009014,176214,0,0,0,1,1,1705.87,-4690.14,48.9742,-3.08918,0,0,-0.999657,0.0262017,900,100,1,0),
(3009015,176214,0,0,0,1,1,1748.16,-4453.14,74.2627,-2.05949,0,0,0,0,900,100,1,0),
(3009016,176214,0,0,0,1,1,1846.79,-3825.26,135.516,1.83259,0,0,0.793353,0.608762,900,100,1,0),
(3009017,176214,0,0,0,1,1,2159.83,-2442.75,62.0804,-0.488691,0,0,-0.241921,0.970296,900,100,1,0),
(3009018,176214,0,0,0,1,1,2192.74,-4479.21,87.66,3.03687,0,0,0.99863,0.052336,900,100,1,0),
(3009019,176214,0,0,0,1,1,2888.38,-4086.29,101.381,-2.19912,0,0,0.891007,-0.45399,900,100,1,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
