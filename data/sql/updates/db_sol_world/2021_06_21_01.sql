-- DB update 2021_06_21_00 -> 2021_06_21_01
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_06_21_00';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_06_21_00 2021_06_21_01 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1624259791700306525'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1624259791700306525');

UPDATE `creature` SET `orientation` = 5.08996 WHERE `guid` = 8457; -- Captain Waymor
UPDATE `creature` SET `orientation` = 1.94837 WHERE `guid` = 8458; -- Sentry Point Guard
UPDATE `creature` SET `orientation` = 5.0185 WHERE `guid` = 30812; -- Sentry Point Guard

-- Sentry Point Guard: WP Movement
UPDATE `creature` SET `MovementType` = 2 WHERE `guid` IN (30810,30816);
UPDATE `creature_addon` SET `path_id` = 308100 WHERE `guid` = 30810;
UPDATE `creature_addon` SET `path_id` = 308160 WHERE `guid` = 30816;

DELETE FROM `waypoint_data` WHERE `id` IN (308100,308140,308160);
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(308100,1,-3456.47,-4108.24,17.032,0,0,0,0,100,0),
(308100,2,-3458.7,-4098.34,17.0995,0,0,0,0,100,0),
(308100,3,-3465.68,-4090.36,17.0994,0,0,0,0,100,0),
(308100,4,-3478.25,-4088.28,17.0994,0,0,0,0,100,0),
(308100,5,-3490.27,-4094.47,17.014,0,0,0,0,100,0),
(308100,6,-3495.15,-4109.32,17.01,0,0,0,0,100,0),
(308100,7,-3489.86,-4121.28,17.0995,0,0,0,0,100,0),
(308100,8,-3477.16,-4127.29,17.0988,0,0,0,0,100,0),
(308100,9,-3464.02,-4124.93,17.099,0,0,0,0,100,0),
(308100,10,-3460.97,-4128.75,17.099,0,0,0,0,100,0),
(308100,11,-3457.84,-4132.67,15.279,0,10000,0,0,100,0),
(308100,12,-3458.74,-4126.94,17.099,0,0,0,0,100,0),
(308100,13,-3459.74,-4120.62,17.0991,0,0,0,0,100,0),

(308140,1,-3462.44,-4122.72,17.0989,0,0,0,0,100,0),
(308140,2,-3468.54,-4115.82,17.0994,0,0,0,0,100,0),
(308140,3,-3474.67,-4108.9,17.1028,0,10000,0,0,100,0),
(308140,4,-3467.74,-4117.35,17.0997,0,0,0,0,100,0),
(308140,5,-3459.38,-4127.54,17.0997,0,0,0,0,100,0),
(308140,6,-3454.48,-4133.33,14.2776,0,0,0,0,100,0),
(308140,7,-3448.53,-4140.36,11.2156,0,0,0,0,100,0),
(308140,8,-3444.79,-4145.14,10.6365,0,0,0,0,100,0),
(308140,9,-3437,-4153.2,10.1177,0,0,0,0,100,0),
(308140,10,-3429.82,-4158.7,10.3331,0,0,0,0,100,0),
(308140,11,-3423.67,-4163.42,10.2901,0,10000,0,0,100,0),
(308140,12,-3429.81,-4158.06,10.3869,0,0,0,0,100,0),
(308140,13,-3435.04,-4153.49,10.248,0,0,0,0,100,0),
(308140,14,-3443.45,-4144.91,10.5892,0,0,0,0,100,0),
(308140,15,-3448.27,-4139.99,11.1841,0,0,0,0,100,0),
(308140,16,-3454.34,-4132.73,14.4268,0,0,0,0,100,0),
(308140,17,-3458.9,-4127.28,17.0994,0,0,0,0,100,0),

(308160,1,-3470.12,-4103.46,41.107,0,0,0,0,100,0),
(308160,2,-3468.7,-4107.66,41.107,0,0,0,0,100,0),
(308160,3,-3469.53,-4111.3,42.9719,0,0,0,0,100,0),
(308160,4,-3473.53,-4113.73,45.0424,0,0,0,0,100,0),
(308160,5,-3477.26,-4113.16,46.6108,0,0,0,0,100,0),
(308160,6,-3477.74,-4110.69,46.6103,0,0,0,0,100,0),
(308160,7,-3475.67,-4108.17,48.643,0,0,0,0,100,0),
(308160,8,-3472.31,-4104.07,52.1936,0,0,0,0,100,0),
(308160,9,-3473.83,-4101.06,52.1936,0,0,0,0,100,0),
(308160,10,-3478.47,-4101.51,52.1936,0,0,0,0,100,0),
(308160,11,-3481.8,-4105.26,52.1936,0,0,0,0,100,0),
(308160,12,-3482.11,-4109.9,52.1936,0,0,0,0,100,0),
(308160,13,-3477.76,-4113.96,52.1936,0,0,0,0,100,0),
(308160,14,-3472.86,-4114.15,52.1936,0,0,0,0,100,0),
(308160,15,-3468.99,-4110.1,52.1936,0,0,0,0,100,0),
(308160,16,-3468.74,-4104.98,52.1936,0,0,0,0,100,0),
(308160,17,-3472.31,-4104.07,52.1936,0,0,0,0,100,0),
(308160,18,-3475.67,-4108.17,48.643,0,0,0,0,100,0),
(308160,19,-3477.74,-4110.69,46.6103,0,0,0,0,100,0),
(308160,20,-3477.26,-4113.16,46.6108,0,0,0,0,100,0),
(308160,21,-3473.53,-4113.73,45.0424,0,0,0,0,100,0),
(308160,22,-3469.53,-4111.3,42.9719,0,0,0,0,100,0),
(308160,23,-3468.7,-4107.66,41.107,0,0,0,0,100,0),
(308160,24,-3470.12,-4103.46,41.107,0,0,0,0,100,0),
(308160,25,-3470.43,-4101.64,40.9786,0,0,0,0,100,0),
(308160,26,-3473.75,-4099.59,38.7206,0,0,0,0,100,0),
(308160,27,-3478.49,-4099.96,36.4215,0,0,0,0,100,0),
(308160,28,-3482.01,-4102.97,36.4215,0,0,0,0,100,0),
(308160,29,-3483.18,-4104.96,36.3619,0,0,0,0,100,0),
(308160,30,-3483.64,-4109.19,34.0826,0,0,0,0,100,0),
(308160,31,-3482.97,-4112.07,32.6162,0,0,0,0,100,0),
(308160,32,-3479.9,-4114.38,30.8145,0,0,0,0,100,0),
(308160,33,-3475.56,-4116.37,30.8145,0,0,0,0,100,0),
(308160,34,-3472.22,-4116.05,29.7339,0,0,0,0,100,0),
(308160,35,-3469.15,-4114.72,28.1393,0,0,0,0,100,0),
(308160,36,-3466.97,-4112.19,26.3206,0,0,0,0,100,0),
(308160,37,-3466.02,-4109.2,24.9893,0,0,0,0,100,0),
(308160,38,-3466,-4104.65,24.9893,0,0,0,0,100,0),
(308160,39,-3466.68,-4102.18,24.5084,0,0,0,0,100,0),
(308160,40,-3468.09,-4100.31,23.7608,0,0,0,0,100,0),
(308160,41,-3471.37,-4099.09,21.8754,0,0,0,0,100,0),
(308160,42,-3475.58,-4098.28,21.8754,0,0,0,0,100,0),
(308160,43,-3479.34,-4099.02,20.3699,0,0,0,0,100,0),
(308160,44,-3482.2,-4101.41,18.875,0,0,0,0,100,0),
(308160,45,-3484.25,-4105.39,17.1087,0,10000,0,0,100,0),
(308160,46,-3482.2,-4101.41,18.875,0,0,0,0,100,0),
(308160,47,-3479.34,-4099.02,20.3699,0,0,0,0,100,0),
(308160,48,-3475.58,-4098.28,21.8754,0,0,0,0,100,0),
(308160,49,-3471.37,-4099.09,21.8754,0,0,0,0,100,0),
(308160,50,-3468.09,-4100.31,23.7608,0,0,0,0,100,0),
(308160,51,-3466.68,-4102.18,24.5084,0,0,0,0,100,0),
(308160,52,-3466,-4104.65,24.9893,0,0,0,0,100,0),
(308160,53,-3466.02,-4109.2,24.9893,0,0,0,0,100,0),
(308160,54,-3466.97,-4112.19,26.3206,0,0,0,0,100,0),
(308160,55,-3469.15,-4114.72,28.1393,0,0,0,0,100,0),
(308160,56,-3472.22,-4116.05,29.7339,0,0,0,0,100,0),
(308160,57,-3475.56,-4116.37,30.8145,0,0,0,0,100,0),
(308160,58,-3479.9,-4114.38,30.8145,0,0,0,0,100,0),
(308160,59,-3482.97,-4112.07,32.6162,0,0,0,0,100,0),
(308160,60,-3483.64,-4109.19,34.0826,0,0,0,0,100,0),
(308160,61,-3483.18,-4104.96,36.3619,0,0,0,0,100,0),
(308160,62,-3482.01,-4102.97,36.4215,0,0,0,0,100,0),
(308160,63,-3478.49,-4099.96,36.4215,0,0,0,0,100,0),
(308160,64,-3473.75,-4099.59,38.7206,0,0,0,0,100,0),
(308160,65,-3470.43,-4101.64,40.9786,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
