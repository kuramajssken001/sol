-- DB update 2021_03_10_00 -> 2021_03_11_00
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_03_10_00';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_03_10_00 2021_03_11_00 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1615502974660820465'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1615502974660820465');

UPDATE `creature` SET `position_x` = -1748.3, `position_y` = 8820.46, `position_z` = 34.5502, `orientation` = 5.95717, `MovementType` = 2 WHERE `guid` = 65528;
UPDATE `creature` SET `wander_distance` = 0, `MovementType` = 0 WHERE `guid` IN (59727,59728,59729,59730,59972,59973,59974,68109,68110);

DELETE FROM `creature_addon` WHERE `guid` = 65528;
INSERT INTO `creature_addon` (`guid`, `path_id`, `mount`, `bytes1`, `bytes2`, `emote`, `isLarge`, `auras`)
VALUES
(65528,655280,0,0,0,0,0,NULL);

DELETE FROM `creature_formations` WHERE `leaderGUID` = 65528;
INSERT INTO `creature_formations` (`leaderGUID`, `memberGUID`, `dist`, `angle`, `groupAI`)
VALUES
(65528,65528,0,0,0),
(65528,68110,26,0,0),
(65528,59972,16,315,0),
(65528,59730,16,45,0),
(65528,68109,24,22,0),
(65528,59729,23,337,0),
(65528,59728,12,33,0),
(65528,59974,10,348,0),
(65528,59727,13,355,0),
(65528,59973,19,5,0);

DELETE FROM `smart_scripts` WHERE `entryorguid` = 18258 AND `source_type` = 0 AND `id` = 2;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(18258,0,2,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Bach''lor - On Respawn - Set Active On');

DELETE FROM `waypoint_data` WHERE `id` = 655280;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(655280,1,-1748.3,8820.46,34.5509,0,0,0,0,100,0),
(655280,2,-1742.91,8819.74,35.9027,0,0,0,0,100,0),
(655280,3,-1737.61,8819.05,36.2903,0,0,0,0,100,0),
(655280,4,-1731.68,8818.28,35.4901,0,0,0,0,100,0),
(655280,5,-1724.04,8817.28,33.4318,0,0,0,0,100,0),
(655280,6,-1715.25,8816.14,31.6238,0,0,0,0,100,0),
(655280,7,-1706.67,8815.02,32.1166,0,0,0,0,100,0),
(655280,8,-1695.68,8813.59,34.2319,0,0,0,0,100,0),
(655280,9,-1687.94,8812.58,36.0542,0,0,0,0,100,0),
(655280,10,-1678.15,8811.3,37.8396,0,0,0,0,100,0),
(655280,11,-1666,8809.71,38.7306,0,0,0,0,100,0),
(655280,12,-1653.28,8808.05,38.782,0,0,0,0,100,0),
(655280,13,-1641.56,8809.06,38.3672,0,0,0,0,100,0),
(655280,14,-1627.6,8810.27,36.4924,0,0,0,0,100,0),
(655280,15,-1615.36,8811.33,34.4416,0,0,0,0,100,0),
(655280,16,-1602.75,8812.42,32.6729,0,0,0,0,100,0),
(655280,17,-1592.48,8813.31,31.9294,0,0,0,0,100,0),
(655280,18,-1582.29,8814.19,31.7969,0,0,0,0,100,0),
(655280,19,-1569.51,8815.3,32.4227,0,0,0,0,100,0),
(655280,20,-1554.13,8816.63,33.7778,0,0,0,0,100,0),
(655280,21,-1543.23,8817.58,34.7795,0,0,0,0,100,0),
(655280,22,-1531.77,8818.57,35.7105,0,0,0,0,100,0),
(655280,23,-1519.61,8819.62,35.8465,0,0,0,0,100,0),
(655280,24,-1511.77,8811.96,34.8373,0,0,0,0,100,0),
(655280,25,-1504.76,8805.11,32.4357,0,0,0,0,100,0),
(655280,26,-1495.66,8796.22,30.3087,0,0,0,0,100,0),
(655280,27,-1485.97,8786.75,30.2152,0,0,0,0,100,0),
(655280,28,-1472.7,8773.79,30.1361,0,0,0,0,100,0),
(655280,29,-1461.52,8762.87,29.5808,0,0,0,0,100,0),
(655280,30,-1452.18,8753.74,28.6668,0,0,0,0,100,0),
(655280,31,-1446.84,8748.51,27.6002,0,0,0,0,100,0),
(655280,32,-1442.41,8744.2,26.5017,0,0,0,0,100,0),
(655280,33,-1436.07,8738,24.5687,0,0,0,0,100,0),
(655280,34,-1429.2,8731.28,22.3337,0,0,0,0,100,0),
(655280,35,-1421.94,8724.18,20.8651,0,0,0,0,100,0),
(655280,36,-1415.82,8718.23,21.4663,0,0,0,0,100,0),
(655280,37,-1405.84,8708.49,24.1128,0,0,0,0,100,0),
(655280,38,-1395.91,8698.79,25.8743,0,0,0,0,100,0),
(655280,39,-1386.23,8689.33,26.751,0,0,0,0,100,0),
(655280,40,-1376.94,8698.85,27.7109,0,0,0,0,100,0),
(655280,41,-1371.15,8704.77,27.3103,0,0,0,0,100,0),
(655280,42,-1363.16,8712.96,26.0501,0,0,0,0,100,0),
(655280,43,-1355.09,8721.22,26.2913,0,0,0,0,100,0),
(655280,44,-1359.3,8737.11,28.4914,0,0,0,0,100,0),
(655280,45,-1363.37,8752.45,31.3494,0,0,0,0,100,0),
(655280,46,-1366.75,8765.19,33.0578,0,0,0,0,100,0),
(655280,47,-1369.34,8775,33.4576,0,0,0,0,100,0),
(655280,48,-1372.27,8786.05,33.9155,0,0,0,0,100,0),
(655280,49,-1375.07,8796.6,34.5985,0,0,0,0,100,0),
(655280,50,-1376.67,8802.62,34.3534,0,0,0,0,100,0),
(655280,51,-1381.78,8821.89,32.6643,0,0,0,0,100,0),
(655280,52,-1387.86,8826.21,31.4242,0,0,0,0,100,0),
(655280,53,-1395,8831.27,29.5549,0,0,0,0,100,0),
(655280,54,-1401.65,8835.99,28.0744,0,0,0,0,100,0),
(655280,55,-1407.72,8840.3,28.3865,0,0,0,0,100,0),
(655280,56,-1415.44,8845.78,31.3892,0,0,0,0,100,0),
(655280,57,-1422.78,8850.99,34.0973,0,0,0,0,100,0),
(655280,58,-1432.5,8857.89,36.5875,0,0,0,0,100,0),
(655280,59,-1440.28,8863.64,37.6733,0,0,0,0,100,0),
(655280,60,-1449.1,8870.16,37.5922,0,0,0,0,100,0),
(655280,61,-1457.08,8876.05,36.6221,0,0,0,0,100,0),
(655280,62,-1465.42,8882.22,36.3601,0,0,0,0,100,0),
(655280,63,-1472.69,8887.59,37.9924,0,0,0,0,100,0),
(655280,64,-1480.29,8893.21,40.5541,0,0,0,0,100,0),
(655280,65,-1487.42,8898.48,41.7619,0,0,0,0,100,0),
(655280,66,-1495.77,8904.65,41.8491,0,0,0,0,100,0),
(655280,67,-1503.56,8910.41,41.181,0,0,0,0,100,0),
(655280,68,-1511.73,8916.44,39.5998,0,0,0,0,100,0),
(655280,69,-1518.37,8924.13,37.607,0,0,0,0,100,0),
(655280,70,-1525.39,8932.25,35.7678,0,0,0,0,100,0),
(655280,71,-1532.09,8940.01,35.2101,0,0,0,0,100,0),
(655280,72,-1538.42,8947.34,35.75,0,0,0,0,100,0),
(655280,73,-1543.99,8953.78,37.1164,0,0,0,0,100,0),
(655280,74,-1550.02,8960.76,39.7205,0,0,0,0,100,0),
(655280,75,-1555.2,8966.76,42.1268,0,0,0,0,100,0),
(655280,76,-1560.08,8972.41,44.1328,0,0,0,0,100,0),
(655280,77,-1565.04,8978.15,45.9266,0,0,0,0,100,0),
(655280,78,-1571.14,8985.21,47.9381,0,0,0,0,100,0),
(655280,79,-1578.81,8983.73,45.496,0,0,0,0,100,0),
(655280,80,-1585.57,8982.43,43.8926,0,0,0,0,100,0),
(655280,81,-1593.14,8980.97,42.1744,0,0,0,0,100,0),
(655280,82,-1600.36,8979.58,40.7628,0,0,0,0,100,0),
(655280,83,-1604.26,8978.83,40.295,0,0,0,0,100,0),
(655280,84,-1607.61,8978.19,40.2145,0,0,0,0,100,0),
(655280,85,-1612.29,8977.29,40.4262,0,0,0,0,100,0),
(655280,86,-1616.43,8976.49,40.919,0,0,0,0,100,0),
(655280,87,-1620.85,8975.64,41.712,0,0,0,0,100,0),
(655280,88,-1625.03,8974.83,42.5574,0,0,0,0,100,0),
(655280,89,-1629.45,8973.99,43.4199,0,0,0,0,100,0),
(655280,90,-1633.5,8973.2,44.1175,0,0,0,0,100,0),
(655280,91,-1637.59,8972.42,44.7433,0,0,0,0,100,0),
(655280,92,-1641.5,8971.66,45.1899,0,0,0,0,100,0),
(655280,93,-1646.4,8970.73,45.448,0,0,0,0,100,0),
(655280,94,-1651.13,8969.8,45.3358,0,0,0,0,100,0),
(655280,95,-1652.97,8977.63,48.0168,0,0,0,0,100,0),
(655280,96,-1654.71,8985.01,51.2456,0,0,0,0,100,0),
(655280,97,-1656.29,8991.7,54.2657,0,0,0,0,100,0),
(655280,98,-1657.92,8998.63,57.068,0,0,0,0,100,0),
(655280,99,-1659.74,9006.35,59.5994,0,0,0,0,100,0),
(655280,100,-1661.48,9013.73,61.7318,0,0,0,0,100,0),
(655280,101,-1663.38,9021.78,64.3045,0,0,0,0,100,0),
(655280,102,-1670.42,9026.78,63.7802,0,0,0,0,100,0),
(655280,103,-1678.51,9032.52,61.7489,0,0,0,0,100,0),
(655280,104,-1686.31,9038.06,61.1136,0,0,0,0,100,0),
(655280,105,-1693.25,9042.98,63.0771,0,0,0,0,100,0),
(655280,106,-1703.9,9050.55,68.5744,0,0,0,0,100,0),
(655280,107,-1711.93,9056.25,71.5552,0,0,0,0,100,0),
(655280,108,-1719.45,9061.58,72.573,0,0,0,0,100,0),
(655280,109,-1726.36,9055.92,70.1891,0,0,0,0,100,0),
(655280,110,-1733.5,9050.07,67.3208,0,0,0,0,100,0),
(655280,111,-1741.62,9043.42,63.9509,0,0,0,0,100,0),
(655280,112,-1751.41,9035.39,60.8131,0,0,0,0,100,0),
(655280,113,-1760.03,9028.33,59.4041,0,0,0,0,100,0),
(655280,114,-1768.21,9021.63,58.3194,0,0,0,0,100,0),
(655280,115,-1777.05,9014.38,56.6313,0,0,0,0,100,0),
(655280,116,-1786.55,9006.61,54.4101,0,0,0,0,100,0),
(655280,117,-1795.11,8999.59,52.0259,0,0,0,0,100,0),
(655280,118,-1801.56,8994.3,49.9512,0,0,0,0,100,0),
(655280,119,-1808.07,8988.97,47.6083,0,0,0,0,100,0),
(655280,120,-1813.34,8984.65,45.0555,0,0,0,0,100,0),
(655280,121,-1817,8975.82,41.0836,0,0,0,0,100,0),
(655280,122,-1820.77,8966.75,38.0519,0,0,0,0,100,0),
(655280,123,-1824.52,8957.71,38.107,0,0,0,0,100,0),
(655280,124,-1827.56,8950.39,38.8379,0,0,0,0,100,0),
(655280,125,-1830.87,8942.4,39.2441,0,0,0,0,100,0),
(655280,126,-1825.52,8934.49,38.4679,0,0,0,0,100,0),
(655280,127,-1819.83,8926.09,37.7718,0,0,0,0,100,0),
(655280,128,-1813.87,8917.3,36.8532,0,0,0,0,100,0),
(655280,129,-1808,8908.63,36.1728,0,0,0,0,100,0),
(655280,130,-1803.73,8902.32,35.6536,0,0,0,0,100,0),
(655280,131,-1799.02,8895.36,35.4904,0,0,0,0,100,0),
(655280,132,-1794.58,8888.8,35.315,0,0,0,0,100,0),
(655280,133,-1788.82,8880.3,34.0516,0,0,0,0,100,0),
(655280,134,-1784.31,8873.64,32.6501,0,0,0,0,100,0),
(655280,135,-1779.07,8865.9,30.8107,0,0,0,0,100,0),
(655280,136,-1773.97,8858.37,29.1768,0,0,0,0,100,0),
(655280,137,-1768.67,8850.54,28.0105,0,0,0,0,100,0),
(655280,138,-1763.77,8843.3,28.1232,0,0,0,0,100,0),
(655280,139,-1759.19,8836.53,29.5983,0,0,0,0,100,0),
(655280,140,-1754.35,8829.39,31.7889,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
