-- DB update 2021_12_01_03 -> 2021_12_02_00
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_12_01_03';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_12_01_03 2021_12_02_00 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1638470642623943424'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1638470642623943424');

DELETE FROM `gameobject` WHERE `guid` IN (
31762,31721,31712,31713,31686,31689,31691,31690,31702,31692,31698,
31666,31662,31655,31647,31644,31653,31652,31640,31654,31661,31659,
31649,31651,31646,31641,31642,31645,31643,31696,31682,31679,31681,
31683,31687,31672,31671,31667,31670,31668,31697,31677,31678,31669,
265429,31701);

UPDATE `gameobject` SET `phaseMask` = 193 WHERE `guid` IN (
7027,10128,11802,10125,11223,10050,11595,10068,11611,4558,7033,4544,
10962,10960,11329,10979,11143,11231,10166,2499,10139,9914,11582,11548,
11551,10956,11555,10952,11783,4589,11614,11920,10078,11799,11234,10094,
11207,10224,11239,1772,4560,10975,4587,7023,11790,4568,10046,10993,
11616,11331,11557,11576,11578,10185,10954,10038,10097,4585,10150,10198,
11788,10143,11618,11568,11733,10145,10148,10217,10033,11072,11739,9943,
11334,11585,11633,11566,2466,4555,11914,11630,10180,11911,10977,10028,
11607,9994,4571,9977,9947,11950,10156,11939,10160,11227,6920,6952,
11546,4573,9933,6979,6975,9953,11720,9929,9925,4621,10083,4615,6903,
9957,10152,11775,2336,10136,11785,10174,10998,4553,4551,9912,11609,
11553,9972,9966,10726,2119,11124,2254,1933,2163,11574,11781,4591,11916,
9981,11943,9923,10064,4647,11627,6956,6792,6859,11794,6788,1576,1583,
11924,11732,11590,11599,4550,7039,10041,4575,11591,11562,6796,4582,
6917,7037,4577,4579,9921,10132,11126,10008,9990,10205,11602,9963,
7041,6805,11588,6816,6800,10035,10209,11792,10986,6772,6776,9998,
10958,11777,10057,10019,10022,11918,10075,11624,9950,10010,11315,
11091,9936,11945,10724,11736,11927,9988,9917,4565,10115,10003);

UPDATE `gameobject` SET `phaseMask` = 3 WHERE `guid` = 76950;

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
