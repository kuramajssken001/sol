-- DB update 2021_07_04_00 -> 2021_07_05_00
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_07_04_00';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_07_04_00 2021_07_05_00 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1625481903693987956'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1625481903693987956');

UPDATE `creature_template` SET `AIName` = 'SmartAI' WHERE `entry` = 1742;
DELETE FROM `smart_scripts` WHERE `source_type` = 0 AND `entryorguid` = 1742;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(1742,0,0,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Deathguard Bartholomew - On Respawn - Set Active On');

DELETE FROM `waypoint_data` WHERE `id` IN (341110,382920);
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
-- Deathguard Bartholomew
(341110,1,2288.65,391.566,34.1005,0,10000,0,0,100,0),
(341110,2,2288.65,391.566,34.1005,0,3000,0,1001,100,0),
(341110,3,2302.5,394.092,34.0088,0,0,0,0,100,0),
(341110,4,2315.83,396.523,33.742,0,0,0,0,100,0),
(341110,5,2327.07,396.736,33.6667,0,0,0,0,100,0),
(341110,6,2336.82,396.92,33.6667,0,0,0,0,100,0),
(341110,7,2343.99,385.565,34.1987,0,0,0,0,100,0),
(341110,8,2349.17,377.356,35.0486,0,0,0,0,100,0),
(341110,9,2353.38,370.687,36.3969,0,0,0,0,100,0),
(341110,10,2352.94,365.315,36.9491,0,0,0,0,100,0),
(341110,11,2352.48,359.66,37.1439,0,0,0,0,100,0),
(341110,12,2351.73,350.465,37.1039,0,0,0,0,100,0),
(341110,13,2350.56,336.159,38.0618,0,0,0,0,100,0),
(341110,14,2349.97,328.953,37.4589,0,0,0,0,100,0),
(341110,15,2351.18,326.025,37.0278,0,0,0,0,100,0),
(341110,16,2354.57,321.764,36.5978,0,0,0,0,100,0),
(341110,17,2361.51,315.358,36.329,0,0,0,0,100,0),
(341110,18,2366.27,310.962,36.2944,0,0,0,0,100,0),
(341110,19,2375.07,308.171,37.0299,0,0,0,0,100,0),
(341110,20,2379.07,306.904,37.2327,0,0,0,0,100,0),
(341110,21,2379.85,306.042,37.1692,4.62138,6000,0,1000,100,0),
(341110,22,2389.82,305.581,37.6031,0,0,0,0,100,0),
(341110,23,2399.14,305.15,37.6983,0,0,0,0,100,0),
(341110,24,2404.27,308.785,38.0612,0,0,0,0,100,0),
(341110,25,2409.91,312.783,38.2803,0,0,0,0,100,0),
(341110,26,2413.45,315.29,38.0267,0,0,0,0,100,0),
(341110,27,2416.94,320.523,37.8671,0,0,0,0,100,0),
(341110,28,2421.94,328.033,37.2219,0,0,0,0,100,0),
(341110,29,2424.99,332.609,36.5679,0,0,0,0,100,0),
(341110,30,2427.08,335.754,35.8407,0,0,0,0,100,0),
(341110,31,2425.86,341.387,35.4678,0,0,0,0,100,0),
(341110,32,2424.95,345.606,33.9677,0,0,0,0,100,0),
(341110,33,2423.65,351.911,33.8674,0,0,0,0,100,0),
(341110,34,2426.61,353.696,33.8674,0,0,0,0,100,0),
(341110,35,2428.87,355.539,33.8731,0,10000,0,0,100,0),
(341110,36,2420.08,363.64,33.9935,0,0,0,0,100,0),
(341110,37,2412.87,370.285,34.0232,0,0,0,0,100,0),
(341110,38,2408.16,378.064,33.9644,0,0,0,0,100,0),
(341110,39,2402.16,387.95,33.8906,0,0,0,0,100,0),
(341110,40,2397.56,395.547,33.9003,0,0,0,0,100,0),
(341110,41,2394.55,402.937,33.8914,0,0,0,0,100,0),
(341110,42,2390.59,412.683,33.8917,0,0,0,0,100,0),
(341110,43,2387.4,420.528,33.8907,0,0,0,0,100,0),
(341110,44,2381.12,424.776,34.048,0,0,0,0,100,0),
(341110,45,2375.53,428.555,34.0246,0,0,0,0,100,0),
(341110,46,2369.2,430.833,33.5856,0,0,0,0,100,0),
(341110,47,2366.47,438.077,33.3433,0,0,0,0,100,0),
(341110,48,2356.94,444.502,33.3352,1.793,10000,0,0,100,0),
(341110,49,2356.72,442.773,33.338,0,0,0,0,100,0),
(341110,50,2355.32,441.766,33.3342,0,0,0,0,100,0),
(341110,51,2351.45,436.943,33.3304,0,0,0,0,100,0),
(341110,52,2350.74,428.538,33.3561,0,0,0,0,100,0),
(341110,53,2345.19,421.628,33.6682,0,0,0,0,100,0),
(341110,54,2339.63,414.704,33.6696,0,0,0,0,100,0),
(341110,55,2337.73,406.923,33.6666,0,0,0,0,100,0),
(341110,56,2336.52,401.974,33.6669,0,0,0,0,100,0),
(341110,57,2330.25,399.231,33.6667,0,0,0,0,100,0),
(341110,58,2321.24,398.174,33.6667,0,0,0,0,100,0),
(341110,59,2312.71,397.174,33.8855,0,0,0,0,100,0),
(341110,60,2301.11,394.471,34.0117,0,0,0,0,100,0),
(341110,61,2288.65,391.566,34.1005,0,600000,0,0,100,0),
-- Hamlin Atkins
(382920,1,2283.86,386.706,34.1142,0,0,0,0,100,0),
(382920,2,2286.12,394.197,34.0471,0,0,0,0,100,0),
(382920,3,2287.9,395.711,34.0292,0,0,0,0,100,0),
(382920,4,2290.5,396.192,34.0261,0,0,0,0,100,0),
(382920,5,2300.64,396.523,33.9922,0,0,0,0,100,0),
(382920,6,2312.77,396.92,33.8861,0,0,0,0,100,0),
(382920,7,2329.22,397.458,33.6666,0,0,0,0,100,0),
(382920,8,2335.99,397.679,33.6667,0,0,0,0,100,0),
(382920,9,2341.25,390.871,33.6668,0,0,0,0,100,0),
(382920,10,2344.55,386.594,34.1956,0,0,0,0,100,0),
(382920,11,2352.51,376.295,35.462,0,0,0,0,100,0),
(382920,12,2358.24,368.876,37.0261,0,0,0,0,100,0),
(382920,13,2358.55,363.348,37.5669,0,0,0,0,100,0),
(382920,14,2358.8,358.865,37.7712,0,0,0,0,100,0),
(382920,15,2360.7,351.688,37.7914,0,0,0,0,100,0),
(382920,16,2363.49,345.913,37.8996,0,0,0,0,100,0),
(382920,17,2364.1,347.916,37.9404,0,0,0,0,100,0),
(382920,18,2362.86,353.099,38.0711,0,0,0,0,100,0),
(382920,19,2359.82,360.739,37.8635,0,0,0,0,100,0),
(382920,20,2356.91,368.07,37.0144,0,0,0,0,100,0),
(382920,21,2353.84,375.787,35.6826,0,0,0,0,100,0),
(382920,22,2344.47,387.277,34.1189,0,0,0,0,100,0),
(382920,23,2337.76,395.508,33.6669,0,0,0,0,100,0),
(382920,24,2333.73,397.028,33.6669,0,0,0,0,100,0),
(382920,25,2325.46,397.445,33.6669,0,0,0,0,100,0),
(382920,26,2311.6,398.143,33.8861,0,0,0,0,100,0),
(382920,27,2298.45,398.806,33.9735,0,0,0,0,100,0),
(382920,28,2288.31,399.317,33.981,0,0,0,0,100,0),
(382920,29,2284.82,401.284,33.9403,0,0,0,0,100,0),
(382920,30,2282.57,405.493,33.8861,0,0,0,0,100,0),
(382920,31,2280.71,410.623,33.8685,0,0,0,0,100,0),
(382920,32,2277.68,421.905,33.8902,0,0,0,0,100,0),
(382920,33,2274.6,433.342,34.0033,0,0,0,0,100,0),
(382920,34,2272.53,441.055,34.0427,0,0,0,0,100,0),
(382920,35,2270.01,450.418,34.0587,0,0,0,0,100,0),
(382920,36,2267.52,459.672,33.9937,0,0,0,0,100,0),
(382920,37,2264.82,469.728,33.864,0,0,0,0,100,0),
(382920,38,2266.81,461.432,33.9711,0,0,0,0,100,0),
(382920,39,2269,452.287,34.0348,0,0,0,0,100,0),
(382920,40,2271.41,442.249,34.0442,0,0,0,0,100,0),
(382920,41,2273.83,432.134,33.9745,0,0,0,0,100,0),
(382920,42,2275.38,424.628,33.9434,0,0,0,0,100,0),
(382920,43,2277.91,412.405,33.8738,0,0,0,0,100,0),
(382920,44,2279.83,403.11,33.9132,0,0,0,0,100,0),
(382920,45,2282.54,389.999,34.1126,0,0,0,0,100,0),
(382920,46,2284.54,380.336,34.1138,0,0,0,0,100,0),
(382920,47,2284.07,371.031,34.1138,0,0,0,0,100,0),
(382920,48,2283.69,363.536,34.1138,0,0,0,0,100,0),
(382920,49,2283.26,354.943,34.1138,0,0,0,0,100,0),
(382920,50,2283.4,362.222,34.1138,0,0,0,0,100,0),
(382920,51,2283.55,370.06,34.1138,0,0,0,0,100,0),
(382920,52,2283.73,379.565,34.1138,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
