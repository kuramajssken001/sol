-- DB update 2020_11_27_02 -> 2020_11_28_00
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2020_11_27_02';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2020_11_27_02 2020_11_28_00 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1606521513106939313'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1606521513106939313');

UPDATE `creature` SET `MovementType` = 2 WHERE `guid` = 37385;
UPDATE `creature_addon` SET `path_id` = 373850 WHERE `guid` = 37385;
UPDATE `creature` SET `position_x` = 4522.93, `position_y` = 662.477, `position_z` = 24.3631 WHERE `guid` = 36692;

DELETE FROM `creature` WHERE `guid` = 3008777;
INSERT INTO `creature` (`guid`, `id`, `map`, `zoneId`, `areaId`, `spawnMask`, `phaseMask`, `modelid`, `equipment_id`, `position_x`, `position_y`, `position_z`, `orientation`, `spawntimesecs`, `wander_distance`, `curhealth`, `curmana`, `MovementType`, `npcflag`, `unit_flags`, `dynamicflags`, `VerifiedBuild`)
VALUES
(3008777,2321,1,0,0,1,1,1042,0,4518.91,663.274,24.5558,4.75913,275,0,222,0,0,0,0,0,0);

DELETE FROM `creature_formations` WHERE `leaderGUID` = 37385;
INSERT INTO `creature_formations` (`leaderGUID`, `memberGUID`, `dist`, `angle`, `groupAI`)
VALUES
(37385,37385,0,0,2),
(37385,36692,2,315,2),
(37385,3008777,2,45,2);

UPDATE `creature_template` SET `AIName` = 'SmartAI' WHERE `entry` = 2172;
DELETE FROM `smart_scripts` WHERE `entryorguid` = 2172 AND `source_type` = 0;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(2172,0,0,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Strider Clutchmother - On Respawn - Set Active On');

DELETE FROM `waypoint_data` WHERE `id` = 373850;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(373850,1,4520.81,660.807,24.6687,0,0,0,0,100,0),
(373850,2,4520.04,650.7,26.7658,0,0,0,0,100,0),
(373850,3,4519.29,640.81,28.7159,0,0,0,0,100,0),
(373850,4,4518.55,631.157,29.8703,0,0,0,0,100,0),
(373850,5,4517.66,619.522,30.8266,0,0,0,0,100,0),
(373850,6,4516.77,607.805,31.7845,0,0,0,0,100,0),
(373850,7,4517.43,597.677,32.2251,0,0,0,0,100,0),
(373850,8,4518.25,585.11,32.5679,0,0,0,0,100,0),
(373850,9,4519.16,571.186,32.5817,0,0,0,0,100,0),
(373850,10,4514.69,562.332,34.0306,0,0,0,0,100,0),
(373850,11,4510.41,553.861,36.1186,0,0,0,0,100,0),
(373850,12,4506.04,545.204,39.1878,0,0,0,0,100,0),
(373850,13,4501.95,541.294,40.4431,0,0,0,0,100,0),
(373850,14,4496.3,535.892,41.4852,0,0,0,0,100,0),
(373850,15,4490.64,530.489,42.5854,0,0,0,0,100,0),
(373850,16,4484.27,524.398,43.4054,0,0,0,0,100,0),
(373850,17,4481.52,515.595,44.1155,0,0,0,0,100,0),
(373850,18,4479.1,507.808,45.4438,0,0,0,0,100,0),
(373850,19,4477.29,502.014,47.2987,0,0,0,0,100,0),
(373850,20,4475.53,496.37,48.935,0,0,0,0,100,0),
(373850,21,4468.79,491.363,49.7702,0,0,0,0,100,0),
(373850,22,4462.23,486.497,50.0938,0,0,0,0,100,0),
(373850,23,4455.34,485.257,50.178,0,0,0,0,100,0),
(373850,24,4448,483.935,50.4496,0,0,0,0,100,0),
(373850,25,4439.93,482.686,51.4952,0,0,0,0,100,0),
(373850,26,4431.11,481.321,53.4415,0,0,0,0,100,0),
(373850,27,4422.13,479.931,55.4195,0,0,0,0,100,0),
(373850,28,4414.98,478.825,57.0827,0,0,0,0,100,0),
(373850,29,4407.06,475.996,58.8661,0,0,0,0,100,0),
(373850,30,4398.28,472.855,60.5459,0,0,0,0,100,0),
(373850,31,4387.4,468.968,61.7523,0,0,0,0,100,0),
(373850,32,4375.29,464.64,61.9022,0,0,0,0,100,0),
(373850,33,4368.44,457.802,61.3719,0,0,0,0,100,0),
(373850,34,4360.51,449.891,60.6792,0,0,0,0,100,0),
(373850,35,4351.72,441.123,60.2804,0,0,0,0,100,0),
(373850,36,4349,430.739,60.5238,0,0,0,0,100,0),
(373850,37,4346.24,420.217,60.9888,0,0,0,0,100,0),
(373850,38,4343.1,412.425,61.3281,0,0,0,0,100,0),
(373850,39,4339.67,403.893,61.593,0,0,0,0,100,0),
(373850,40,4331.14,400.744,62.3669,0,0,0,0,100,0),
(373850,41,4322.4,397.517,62.6931,0,0,0,0,100,0),
(373850,42,4312.22,400.523,62.8945,0,0,0,0,100,0),
(373850,43,4300.05,404.118,62.2459,0,0,0,0,100,0),
(373850,44,4291.57,408.792,61.2917,0,0,0,0,100,0),
(373850,45,4283.83,413.06,60.7891,0,0,0,0,100,0),
(373850,46,4279.99,422.342,61.2192,0,0,0,0,100,0),
(373850,47,4276.19,431.525,61.5429,0,0,0,0,100,0),
(373850,48,4277.01,439.054,61.6015,0,0,0,0,100,0),
(373850,49,4278.02,448.285,60.9137,0,0,0,0,100,0),
(373850,50,4283.41,456.743,60.4345,0,0,0,0,100,0),
(373850,51,4288.59,464.854,60.4058,0,0,0,0,100,0),
(373850,52,4294.17,473.613,60.6949,0,0,0,0,100,0),
(373850,53,4299.49,481.952,60.6362,0,0,0,0,100,0),
(373850,54,4305.04,486.586,60.4018,0,0,0,0,100,0),
(373850,55,4311.94,492.34,59.7501,0,0,0,0,100,0),
(373850,56,4318.92,498.172,59.8326,0,0,0,0,100,0),
(373850,57,4326.62,504.599,59.9759,0,0,0,0,100,0),
(373850,58,4334.32,511.023,60.5849,0,0,0,0,100,0),
(373850,59,4341.94,517.379,60.2867,0,0,0,0,100,0),
(373850,60,4349.46,523.659,59.6665,0,0,0,0,100,0),
(373850,61,4359.13,531.733,59.6633,0,0,0,0,100,0),
(373850,62,4369.62,540.487,59.3641,0,0,0,0,100,0),
(373850,63,4377.08,545.698,57.7447,0,0,0,0,100,0),
(373850,64,4384.35,550.778,55.228,0,0,0,0,100,0),
(373850,65,4393.81,557.388,52.1927,0,0,0,0,100,0),
(373850,66,4404.23,564.665,48.7928,0,0,0,0,100,0),
(373850,67,4410.87,571.385,46.7157,0,0,0,0,100,0),
(373850,68,4418.33,578.932,44.5892,0,0,0,0,100,0),
(373850,69,4425.79,586.472,42.1827,0,0,0,0,100,0),
(373850,70,4428.14,597.064,40.3307,0,0,0,0,100,0),
(373850,71,4430.26,606.587,39.6061,0,0,0,0,100,0),
(373850,72,4433.47,614.725,38.5292,0,0,0,0,100,0),
(373850,73,4437.38,624.615,36.918,0,0,0,0,100,0),
(373850,74,4445.71,631.575,34.094,0,0,0,0,100,0),
(373850,75,4455.5,639.752,31.2693,0,0,0,0,100,0),
(373850,76,4461.33,647.913,28.9639,0,0,0,0,100,0),
(373850,77,4467.76,656.904,26.9825,0,0,0,0,100,0),
(373850,78,4474.88,666.869,26.2529,0,0,0,0,100,0),
(373850,79,4479.14,671.541,25.9035,0,0,0,0,100,0),
(373850,80,4484.49,677.398,24.6288,0,0,0,0,100,0),
(373850,81,4491.57,685.153,23.7864,0,0,0,0,100,0),
(373850,82,4497.31,691.44,24.6011,0,0,0,0,100,0),
(373850,83,4503.76,697.342,24.5261,0,0,0,0,100,0),
(373850,84,4513.71,706.448,23.2624,0,0,0,0,100,0),
(373850,85,4521.69,705.388,24.3228,0,0,0,0,100,0),
(373850,86,4528.3,704.51,24.6299,0,0,0,0,100,0),
(373850,87,4531.99,696.832,24.729,0,0,0,0,100,0),
(373850,88,4535.2,690.152,25.2516,0,0,0,0,100,0),
(373850,89,4531.5,682.616,25.1189,0,0,0,0,100,0),
(373850,90,4527.6,674.653,24.9239,0,0,0,0,100,0),
(373850,91,4523.91,667.127,24.2816,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
