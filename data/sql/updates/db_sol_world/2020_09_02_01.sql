-- DB update 2020_09_02_00 -> 2020_09_02_01
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2020_09_02_00';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2020_09_02_00 2020_09_02_01 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1599028023037890799'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1599028023037890799');

UPDATE `creature` SET `position_x` = 3219.8, `position_y` = -2259.79, `position_z` = 113.266, `wander_distance` = 0, `MovementType` = 0 WHERE `guid` = 116285;

DELETE FROM `creature_formations` WHERE `leaderGUID` = 116284;
INSERT INTO `creature_formations` (`leaderGUID`, `memberGUID`, `dist`, `angle`, `groupAI`)
VALUES
(116284,116284,0,0,2),
(116284,116285,3,270,2);

DELETE FROM `waypoint_data` WHERE `id` = 1162840;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(1162840,1,3222.64,-2262.93,112.181,0,0,0,0,100,0),
(1162840,2,3224.17,-2268.32,110.723,0,0,0,0,100,0),
(1162840,3,3226.9,-2273.86,109.324,0,0,0,0,100,0),
(1162840,4,3230.83,-2278.32,108.576,0,0,0,0,100,0),
(1162840,5,3235.41,-2281.71,108.182,0,0,0,0,100,0),
(1162840,6,3239.72,-2281.59,108.145,0,0,0,0,100,0),
(1162840,7,3242.07,-2281.28,108.413,0,0,0,0,100,0),
(1162840,8,3246.81,-2280.67,108.449,0,0,0,0,100,0),
(1162840,9,3253.41,-2279.82,108.603,0,0,0,0,100,0),
(1162840,10,3260.82,-2278.86,108.471,0,0,0,0,100,0),
(1162840,11,3264.63,-2278.37,108.5,0,0,0,0,100,0),
(1162840,12,3268.46,-2275.69,109.128,0,0,0,0,100,0),
(1162840,13,3271.5,-2273.53,109.862,0,0,0,0,100,0),
(1162840,14,3274.36,-2272.24,110.503,0,0,0,0,100,0),
(1162840,15,3277.87,-2271.39,111.273,0,0,0,0,100,0),
(1162840,16,3283.21,-2270.81,111.662,0,0,0,0,100,0),
(1162840,17,3286.81,-2270.49,112.026,0,0,0,0,100,0),
(1162840,18,3291.58,-2270.22,111.538,0,0,0,0,100,0),
(1162840,19,3296.13,-2268.83,111.397,0,0,0,0,100,0),
(1162840,20,3298.97,-2264.56,111.568,0,0,0,0,100,0),
(1162840,21,3301.29,-2259.35,111.962,0,0,0,0,100,0),
(1162840,22,3303.17,-2253.58,112.698,0,0,0,0,100,0),
(1162840,23,3301.32,-2259.39,111.958,0,0,0,0,100,0),
(1162840,24,3298.86,-2264.79,111.559,0,0,0,0,100,0),
(1162840,25,3296.26,-2268.66,111.405,0,0,0,0,100,0),
(1162840,26,3291.7,-2270.11,111.54,0,0,0,0,100,0),
(1162840,27,3286.46,-2270.34,112.019,0,0,0,0,100,0),
(1162840,28,3281.94,-2270.85,111.652,0,0,0,0,100,0),
(1162840,29,3277.31,-2271.49,111.141,0,0,0,0,100,0),
(1162840,30,3273.77,-2272.65,110.347,0,0,0,0,100,0),
(1162840,31,3270.58,-2274.36,109.572,0,0,0,0,100,0),
(1162840,32,3267.36,-2276.25,108.899,0,0,0,0,100,0),
(1162840,33,3263.81,-2278.5,108.473,0,0,0,0,100,0),
(1162840,34,3259.41,-2279.08,108.505,0,0,0,0,100,0),
(1162840,35,3252.13,-2280.05,108.601,0,0,0,0,100,0),
(1162840,36,3245.53,-2280.92,108.462,0,0,0,0,100,0),
(1162840,37,3241.02,-2281.52,108.317,0,0,0,0,100,0),
(1162840,38,3237.79,-2281.95,108.139,0,0,0,0,100,0),
(1162840,39,3233.45,-2280.6,108.293,0,0,0,0,100,0),
(1162840,40,3229.22,-2277.12,108.808,0,0,0,0,100,0),
(1162840,41,3226.06,-2272.78,109.564,0,0,0,0,100,0),
(1162840,42,3223.6,-2266.73,111.242,0,0,0,0,100,0),
(1162840,43,3222.02,-2261.36,112.556,0,0,0,0,100,0),
(1162840,44,3220.63,-2256.9,113.722,0,0,0,0,100,0),
(1162840,45,3219.45,-2253,114.614,0,0,0,0,100,0),
(1162840,46,3221.37,-2258.5,113.316,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
