-- DB update 2020_12_04_02 -> 2020_12_05_00
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2020_12_04_02';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2020_12_04_02 2020_12_05_00 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1607124575109910669'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1607124575109910669');

UPDATE `creature` SET `position_x` = 2808.94, `position_y` = 7233.49, `position_z` = 365.128, `MovementType` = 2 WHERE `guid` = 151919;
UPDATE `creature` SET `position_x` = 1809.32, `position_y` = 7172.16, `position_z` = 364.569, `MovementType` = 2 WHERE `guid` = 151920;

DELETE FROM `creature_addon` WHERE `guid` IN (151919,151920);
INSERT INTO `creature_addon` (`guid`, `path_id`, `mount`, `bytes1`, `bytes2`, `emote`, `isLarge`, `auras`)
VALUES
(151919,1519190,0,0,0,0,0,NULL),
(151920,1519200,0,0,0,0,0,NULL);

UPDATE `creature_template` SET `AIName` = 'SmartAI' WHERE `entry` = 18692;
DELETE FROM `smart_scripts` WHERE `entryorguid` = 18692 AND `source_type` = 0;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(18692,0,0,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Hemathion - On Respawn - Set Active On');

DELETE FROM `waypoint_data` WHERE `id` IN (1519190,1519200);
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(1519190,1,2808.94,7233.49,365.128,0,0,0,0,100,0),
(1519190,2,2779.21,7215.7,365.214,0,0,0,0,100,0),
(1519190,3,2743.24,7205.85,366.074,0,0,0,0,100,0),
(1519190,4,2716.31,7203.94,366.735,0,0,0,0,100,0),
(1519190,5,2682.06,7222.73,365.634,0,0,0,0,100,0),
(1519190,6,2650.47,7236.35,365.005,0,0,0,0,100,0),
(1519190,7,2616.39,7251.05,364.581,0,0,0,0,100,0),
(1519190,8,2582.67,7240.97,364.749,0,0,0,0,100,0),
(1519190,9,2555.35,7214.8,366.146,0,0,0,0,100,0),
(1519190,10,2539.97,7186.03,364.595,0,0,0,0,100,0),
(1519190,11,2522.82,7155.45,366.411,0,0,0,0,100,0),
(1519190,12,2494.83,7120.39,364.493,0,0,0,0,100,0),
(1519190,13,2464.07,7095.25,364.702,0,0,0,0,100,0),
(1519190,14,2422.04,7101.15,365.745,0,0,0,0,100,0),
(1519190,15,2378.71,7121.38,365.629,0,0,0,0,100,0),
(1519190,16,2422.04,7101.15,365.745,0,0,0,0,100,0),
(1519190,17,2464.07,7095.25,364.702,0,0,0,0,100,0),
(1519190,18,2494.83,7120.39,364.493,0,0,0,0,100,0),
(1519190,19,2522.82,7155.45,366.411,0,0,0,0,100,0),
(1519190,20,2539.97,7186.03,364.595,0,0,0,0,100,0),
(1519190,21,2555.35,7214.8,366.146,0,0,0,0,100,0),
(1519190,22,2582.67,7240.97,364.749,0,0,0,0,100,0),
(1519190,23,2616.39,7251.05,364.581,0,0,0,0,100,0),
(1519190,24,2650.47,7236.35,365.005,0,0,0,0,100,0),
(1519190,25,2682.06,7222.73,365.634,0,0,0,0,100,0),
(1519190,26,2716.31,7203.94,366.735,0,0,0,0,100,0),
(1519190,27,2743.24,7205.85,366.074,0,0,0,0,100,0),
(1519190,28,2779.21,7215.7,365.214,0,0,0,0,100,0),
(1519190,29,2808.94,7233.49,365.128,0,0,0,0,100,0),
(1519190,30,2837.03,7252.18,364.441,0,0,0,0,100,0),

(1519200,1,1809.32,7172.16,364.569,0,0,0,0,100,0),
(1519200,2,1815.44,7204.85,364.661,0,0,0,0,100,0),
(1519200,3,1842.55,7242.15,364.581,0,0,0,0,100,0),
(1519200,4,1879.16,7258.35,363.861,0,0,0,0,100,0),
(1519200,5,1915.92,7275.4,364.088,0,0,0,0,100,0),
(1519200,6,1943.62,7285.08,364.204,0,0,0,0,100,0),
(1519200,7,1976.63,7309.15,364.544,0,0,0,0,100,0),
(1519200,8,2014.21,7319.44,364.414,0,0,0,0,100,0),
(1519200,9,2045.85,7317.11,364.715,0,0,0,0,100,0),
(1519200,10,2081.96,7308.12,363.934,0,0,0,0,100,0),
(1519200,11,2098.48,7283.07,364.555,0,0,0,0,100,0),
(1519200,12,2110.94,7263.13,364.382,0,0,0,0,100,0),
(1519200,13,2088.67,7240.71,364.611,0,0,0,0,100,0),
(1519200,14,2083.66,7218.63,364.079,0,0,0,0,100,0),
(1519200,15,2051.24,7208.45,363.979,0,0,0,0,100,0),
(1519200,16,2021.54,7208.53,364.381,0,0,0,0,100,0),
(1519200,17,1995.11,7195.22,364.133,0,0,0,0,100,0),
(1519200,18,1970.71,7173.65,364.284,0,0,0,0,100,0),
(1519200,19,1943.43,7162.6,364.565,0,0,0,0,100,0),
(1519200,20,1918.51,7157.14,364.285,0,0,0,0,100,0),
(1519200,21,1883.81,7154.67,364.475,0,0,0,0,100,0),
(1519200,22,1850.35,7146.59,364.084,0,0,0,0,100,0),
(1519200,23,1835.89,7151.59,364.627,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
