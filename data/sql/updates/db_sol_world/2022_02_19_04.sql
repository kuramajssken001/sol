-- DB update 2022_02_19_03 -> 2022_02_19_04
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2022_02_19_03';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2022_02_19_03 2022_02_19_04 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1645295372741464111'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1645295372741464111');

/*
2772    Iron Ore
4623    Lesser Stoneshield Potion
8956    Oil of Immolation
9030    Restorative Potion
9144    Wildvine Potion
9154    Elixir of Detect Undead
9179    Elixir of Greater Intellect
23427   Eternium Ore
*/

DELETE FROM `creature_loot_template` WHERE `Item` IN (8956,9030,4623,9144,9154,9179,23427);

DELETE FROM `creature_loot_template` WHERE `Item` = 2772 AND `Entry` IN (
205,206,210,212,300,315,533,570,587,588,604,660,667,669,675,676,
677,678,679,680,681,682,683,684,685,687,689,690,694,696,697,699,
701,702,709,710,729,731,736,740,741,750,751,755,760,761,762,764,
765,766,767,769,772,780,781,785,814,818,854,858,879,892,898,909,
910,920,930,937,938,939,940,941,942,948,949,978,979,1713,1784,1785,
1787,1791,1793,1795,1831,1835,1907,2091,2242,2243,2245,2246,2247,2248,2249,2250,
2251,2252,2253,2254,2255,2256,2270,2287,2305,2318,2344,2345,2348,2349,2354,2356,
2368,2370,2373,2375,2376,2377,2384,2385,2406,2407,2408,2416,2420,2421,2422,2423,
2452,2473,2534,2536,2544,2552,2553,2554,2555,2556,2557,2558,2559,2560,2561,2562,
2563,2564,2565,2566,2567,2569,2570,2571,2572,2573,2574,2578,2579,2582,2583,2586,
2587,2588,2589,2592,2595,2596,2603,2604,2618,2639,2640,2641,2642,2643,2644,2645,
2647,2649,2650,2651,2653,2655,2656,2658,2680,2701,2715,2717,2718,2719,2720,2727,
2728,2729,2731,2732,2734,2735,2740,2742,2743,2754,2760,2761,2762,2791,2793,2817,
2829,2830,2831,2860,2892,2893,2907,2923,2924,2925,2926,2927,2928,2929,2931,2932,
2944,3715,3770,3784,3804,3810,3818,3819,3821,3823,3825,3834,3916,3919,3928,3941,
3981,4016,4018,4020,4021,4022,4023,4024,4025,4026,4027,4031,4032,4037,4038,4041,
4042,4044,4051,4067,4093,4094,4095,4096,4097,4099,4100,4101,4104,4107,4109,4110,
4111,4112,4114,4117,4118,4119,4120,4124,4126,4130,4133,4139,4140,4142,4143,4144,
4147,4150,4151,4154,4248,4249,4260,4286,4287,4289,4290,4291,4292,4293,4294,4296,
4297,4298,4299,4300,4301,4302,4306,4308,4427,4437,4438,4440,4466,4467,4474,4475,
4490,4494,4499,4504,4506,4511,4512,4514,4518,4519,4525,4531,4538,4539,4540,4541,
4623,4625,4634,4635,4636,4637,4640,4641,4642,4644,4645,4654,4655,4656,4657,4658,
4659,4666,4670,4671,4674,4675,4681,4685,4692,4693,4694,4696,4697,4699,4714,4715,
4718,4719,4726,4727,4728,4729,4845,4848,4850,4851,4852,4853,4855,4856,4861,4863,
4872,5229,5232,5237,5268,5272,5286,5292,5293,5295,5305,5346,5414,5419,5420,5421,
5422,5423,5425,5426,5428,5429,5441,5450,5451,5455,5456,5457,5458,5472,5474,5475,
5600,5601,5615,5616,5617,5618,5623,5646,5833,5843,5844,5846,5850,5852,5853,5854,
5855,5856,5857,5933,5974,6035,6071,6073,6115,6116,6117,6167,6170,6188,6190,6194,
6200,6201,6202,6206,6207,6211,6219,6220,6223,6224,6226,6329,6391,6392,6407,6426,
6427,6547,6733,7011,7012,7022,7026,7027,7029,7030,7033,7034,7040,7041,7042,7043,
7055,7071,7072,7078,7091,7175,7290,7320,7328,7329,7337,7342,7344,7346,7404,7405,
7438,7439,7440,7441,7447,7666,7725,7726,7727,7767,7847,7849,7855,7856,7885,7886,
8179,8282,8504,8529,8539,8546,8550,8551,8555,8558,8560,8637,8667,9096,9097,9098,
9201,9216,9240,9241,9259,9260,9261,9262,9263,9264,9265,9266,9269,9377,9416,9449,
9450,9452,9583,9602,9692,9716,9817,9818,10083,10390,10398,10399,10400,10405,10406,10408,
10413,10427,10428,10463,10464,10605,10617,10636,10638,10720,10756,10757,10941,10992,11291,11448,
11450,11457,11458,11473,11476,11559,11560,11561,11576,11577,11578,11680,11697,11791,12216,12250,
12856,12976,13019,14370,14427,14621);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
