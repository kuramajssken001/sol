-- DB update 2022_04_08_03 -> 2022_04_08_04
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2022_04_08_03';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2022_04_08_03 2022_04_08_04 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1649450325926346152'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1649450325926346152');

UPDATE `creature` SET `position_x` = -9265.8, `position_y` = -2206.01, `position_z` = 64.0584 WHERE `guid` = 6154;
UPDATE `creature` SET `position_x` = -9327.6, `position_y` = -2202.14, `position_z` = 61.898 WHERE `guid` = 6150;
UPDATE `creature` SET `position_x` = -9236.3, `position_y` = -2035.7, `position_z` = 78.166, `wander_distance` = 3, `MovementType` = 1 WHERE `guid` = 6152;
UPDATE `creature` SET `MovementType` = 2 WHERE `guid` = 10083;

UPDATE `creature_addon` SET `path_id` = 100830, `bytes2` = 0 WHERE `guid` = 10083;

DELETE FROM `creature_formations` WHERE `leaderGUID` = 6154;
INSERT INTO `creature_formations` (`leaderGUID`, `memberGUID`, `dist`, `angle`, `groupAI`)
VALUES
(6154,6154,0,0,0),
(6154,6155,3,0,0);

UPDATE `creature_template` SET `AIName` = 'SmartAI' WHERE `entry` IN (848,379);
DELETE FROM `smart_scripts` WHERE `source_type` = 0 AND `entryorguid` IN (848,379);
DELETE FROM `smart_scripts` WHERE `source_type` = 9 AND `entryorguid` = 37900;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(848,0,0,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Madison - On Respawn - Set Active On'),

(379,0,0,0,34,0,100,0,2,1,0,0,0,80,37900,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Darcy - On Waypoint 2 Reached - Call Timed Action List'),
(379,0,1,0,34,0,100,0,2,5,0,0,0,80,37900,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Darcy - On Waypoint 6 Reached - Call Timed Action List'),
(379,0,2,0,34,0,100,0,2,6,0,0,0,80,37900,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Darcy - On Waypoint 7 Reached - Call Timed Action List'),
(379,0,3,0,34,0,100,0,2,8,0,0,0,80,37900,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Darcy - On Waypoint 9 Reached - Call Timed Action List'),

(37900,9,0,0,0,0,100,0,2000,2000,0,0,0,17,69,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Darcy - On Script - Set Emote State ''STATE_USESTANDING'''),
(37900,9,1,0,0,0,100,0,28000,28000,0,0,0,17,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Darcy - On Script - Set Emote State ''ONESHOT_NONE''');

DELETE FROM `game_event_creature` WHERE `guid` IN (6154,6155,6150,6153,6151);
INSERT INTO `game_event_creature` (`eventEntry`, `guid`)
VALUES
(79,6154),
(79,6155),
(79,6150),
(79,6153),
(79,6151);

DELETE FROM `waypoint_data` WHERE `id` IN (100880,61540,61500,100830);
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `pathfinding`, `action`, `action_chance`, `wpguid`)
VALUES
-- Guard Clarke
(100880,1,-9274.76,-2273.35,67.2906,0,0,0,0,0,100,0),
(100880,2,-9282.91,-2279.16,67.5242,0,0,0,0,0,100,0),
(100880,3,-9291.66,-2285.4,67.5564,0,0,0,0,0,100,0),
(100880,4,-9299.74,-2284.63,68.9696,0,0,0,0,0,100,0),
(100880,5,-9307.49,-2283.9,70.072,0,0,0,0,0,100,0),
(100880,6,-9319.13,-2282.97,70.9889,0,0,0,0,0,100,0),
(100880,7,-9323.76,-2282.5,71.2476,0,0,0,0,0,100,0),
(100880,8,-9333.97,-2281.69,71.5873,0,0,0,0,0,100,0),
(100880,9,-9344.29,-2280.95,71.6422,0,0,0,0,0,100,0),
(100880,10,-9334.91,-2281.73,71.5973,0,0,0,0,0,100,0),
(100880,11,-9323.45,-2282.69,71.239,0,0,0,0,0,100,0),
(100880,12,-9317.83,-2283.16,70.8845,0,0,0,0,0,100,0),
(100880,13,-9308.54,-2284.12,70.1524,0,0,0,0,0,100,0),
(100880,14,-9298.77,-2285.14,68.8068,0,0,0,0,0,100,0),
(100880,15,-9290.46,-2286,67.5442,0,0,0,0,0,100,0),
(100880,16,-9282.83,-2282.22,67.5126,0,0,0,0,0,100,0),
(100880,17,-9274.95,-2278.31,67.651,0,0,0,0,0,100,0),
(100880,18,-9274.4,-2272.03,67.1456,0,0,0,0,0,100,0),
(100880,19,-9273.84,-2265.61,66.5275,0,0,0,0,0,100,0),
(100880,20,-9273.23,-2258.66,65.2874,0,0,0,0,0,100,0),
(100880,21,-9272.74,-2251.73,64.4733,0,0,0,0,0,100,0),
(100880,22,-9272.2,-2243.56,64.0391,0,0,0,0,0,100,0),
(100880,23,-9271.92,-2234.69,64.0025,0,0,0,0,0,100,0),
(100880,24,-9271.58,-2224.27,64.0025,0,0,0,0,0,100,0),
(100880,25,-9271.32,-2216.31,64.0584,0,0,0,0,0,100,0),
(100880,26,-9270.9,-2205.55,64.0584,0,0,0,0,0,100,0),
(100880,27,-9270.51,-2195.61,64.0898,0,0,0,0,0,100,0),
(100880,28,-9270.14,-2186.26,64.0897,0,0,0,0,0,100,0),
(100880,29,-9263.03,-2186.4,64.0897,0,0,0,0,0,100,0),
(100880,30,-9255.09,-2186.56,64.0127,0,0,0,0,0,100,0),
(100880,31,-9255.1,-2178.87,64.0582,0,0,0,0,0,100,0),
(100880,32,-9255.12,-2169.24,64.0582,0,0,0,0,0,100,0),
(100880,33,-9255.13,-2160.38,64.0582,0,0,0,0,0,100,0),
(100880,34,-9255.15,-2152.27,64.0596,0,0,0,0,0,100,0),
(100880,35,-9255.16,-2143.39,64.0333,0,0,0,0,0,100,0),
(100880,36,-9255.28,-2151.01,64.0454,0,0,0,0,0,100,0),
(100880,37,-9255.4,-2159.31,64.0573,0,0,0,0,0,100,0),
(100880,38,-9255.54,-2168.68,64.0582,0,0,0,0,0,100,0),
(100880,39,-9255.7,-2179.09,64.0582,0,0,0,0,0,100,0),
(100880,40,-9255.81,-2186.37,64.0122,0,0,0,0,0,100,0),
(100880,41,-9263.04,-2186.89,64.0897,0,0,0,0,0,100,0),
(100880,42,-9271.08,-2187.46,64.0896,0,0,0,0,0,100,0),
(100880,43,-9271.18,-2196.56,64.0896,0,0,0,0,0,100,0),
(100880,44,-9271.3,-2207.39,64.0583,0,0,0,0,0,100,0),
(100880,45,-9271.42,-2218.95,64.0028,0,0,0,0,0,100,0),
(100880,46,-9271.77,-2226.16,64.0028,0,0,0,0,0,100,0),
(100880,47,-9272.26,-2236.25,64.0028,0,0,0,0,0,100,0),
(100880,48,-9272.63,-2243.72,64.0425,0,0,0,0,0,100,0),
(100880,49,-9272.94,-2250.1,64.3473,0,0,0,0,0,100,0),
(100880,50,-9273.31,-2256.21,64.9439,0,0,0,0,0,100,0),
(100880,51,-9273.72,-2262.91,66.137,0,0,0,0,0,100,0),
(100880,52,-9274.06,-2268.52,66.8036,0,0,0,0,0,100,0),
-- Rachel
(61540,1,-9265.8,-2206.01,64.0584,0,0,1,0,0,100,0),
(61540,2,-9277.81,-2210.86,64.0584,0,0,1,0,0,100,0),
(61540,3,-9282.55,-2212.77,63.4702,0,0,1,0,0,100,0),
(61540,4,-9294.69,-2212.91,61.8977,0,0,1,0,0,100,0),
(61540,5,-9305.66,-2213.04,61.8977,0,0,1,0,0,100,0),
(61540,6,-9316.21,-2213.16,61.8981,0,0,1,0,0,100,0),
(61540,7,-9324.95,-2211.73,61.8981,0,0,1,0,0,100,0),
(61540,8,-9333.58,-2210.32,61.8981,0,0,1,0,0,100,0),
(61540,9,-9342.98,-2208.78,61.8981,0,0,1,0,0,100,0),
(61540,10,-9343.73,-2198.31,61.8981,0,0,1,0,0,100,0),
(61540,11,-9344.81,-2183.14,61.8981,0,0,1,0,0,100,0),
(61540,12,-9333.46,-2184.53,61.8981,0,0,1,0,0,100,0),
(61540,13,-9338.13,-2196.49,61.8981,0,0,1,0,0,100,0),
(61540,14,-9342.04,-2206.52,61.8981,0,0,1,0,0,100,0),
(61540,15,-9333.28,-2208.97,61.8981,0,0,1,0,0,100,0),
(61540,16,-9326.1,-2210.98,61.8981,0,0,1,0,0,100,0),
(61540,17,-9317.37,-2210.49,61.8981,0,0,1,0,0,100,0),
(61540,18,-9304.67,-2209.78,61.8981,0,0,1,0,0,100,0),
(61540,19,-9293.37,-2209.15,61.8213,0,0,1,0,0,100,0),
(61540,20,-9286.83,-2203.5,62.899,0,0,1,0,0,100,0),
(61540,21,-9285.25,-2196.19,62.6488,0,0,1,0,0,100,0),
(61540,22,-9283.12,-2186.38,61.4349,0,0,1,0,0,100,0),
(61540,23,-9280.69,-2175.14,60.2934,0,0,1,0,0,100,0),
(61540,24,-9275.8,-2164.68,60.4318,0,0,1,0,0,100,0),
(61540,25,-9270.13,-2152.55,61.1369,0,0,1,0,0,100,0),
(61540,26,-9267.04,-2142.27,61.9194,0,0,1,0,0,100,0),
(61540,27,-9262.5,-2132.49,65.1021,0,0,1,0,0,100,0),
(61540,28,-9254.75,-2129.09,64.306,0,0,1,0,0,100,0),
(61540,29,-9249.2,-2126.65,64.3418,0,0,1,0,0,100,0),
(61540,30,-9238.91,-2129.23,63.9421,0,0,1,0,0,100,0),
(61540,31,-9224.76,-2132.78,63.9336,0,0,1,0,0,100,0),
(61540,32,-9209.35,-2136.65,63.9347,0,0,1,0,0,100,0),
(61540,33,-9190.63,-2136.43,63.942,0,0,1,0,0,100,0),
(61540,34,-9184.8,-2144.66,63.9756,0,0,1,0,0,100,0),
(61540,35,-9183.02,-2155.48,63.9339,0,0,1,0,0,100,0),
(61540,36,-9180.98,-2167.91,63.9927,0,0,1,0,0,100,0),
(61540,37,-9178.52,-2182.85,64.0438,0,0,1,0,0,100,0),
(61540,38,-9185.24,-2191.06,63.9335,0,0,1,0,0,100,0),
(61540,39,-9192.09,-2199.42,63.9338,0,0,1,0,0,100,0),
(61540,40,-9194.66,-2190.94,63.9338,0,0,1,0,0,100,0),
(61540,41,-9198.02,-2179.83,63.9338,0,0,1,0,0,100,0),
(61540,42,-9207.62,-2174.96,63.9338,0,0,1,0,0,100,0),
(61540,43,-9216.93,-2175.09,63.9338,0,0,1,0,0,100,0),
(61540,44,-9227.43,-2175.23,63.9338,0,0,1,0,0,100,0),
(61540,45,-9239.17,-2175.39,63.9338,0,0,1,0,0,100,0),
(61540,46,-9252.23,-2180.34,64.0101,0,0,1,0,0,100,0),
(61540,47,-9252.58,-2188.19,64.0098,0,0,1,0,0,100,0),
(61540,48,-9262.78,-2190.39,64.0897,0,0,1,0,0,100,0),
-- Madison
(61500,1,-9327.6,-2202.14,61.898,1.46783,30000,0,0,0,100,0),
(61500,2,-9315.13,-2208.34,61.8977,0,0,0,0,0,100,0),
(61500,3,-9302.33,-2209.12,61.8977,0,0,0,0,0,100,0),
(61500,4,-9293.39,-2209.66,61.821,0,0,0,0,0,100,0),
(61500,5,-9287.74,-2206.22,62.7899,0,0,0,0,0,100,0),
(61500,6,-9286.14,-2197.62,62.6784,0,0,0,0,0,100,0),
(61500,7,-9283.72,-2184.65,61.0335,0,0,0,0,0,100,0),
(61500,8,-9281.29,-2171.65,59.6998,0,0,0,0,0,100,0),
(61500,9,-9277.42,-2162.26,59.7692,0,0,0,0,0,100,0),
(61500,10,-9272.22,-2149.64,60.4546,0,0,0,0,0,100,0),
(61500,11,-9267.21,-2137.46,62.1799,0,0,0,0,0,100,0),
(61500,12,-9262.62,-2131.42,65.3403,0,0,0,0,0,100,0),
(61500,13,-9255.23,-2123.64,65.5677,0,0,0,0,0,100,0),
(61500,14,-9248.75,-2116.83,66.1153,0,0,0,0,0,100,0),
(61500,15,-9246.96,-2110.3,67.937,0,0,0,0,0,100,0),
(61500,16,-9245.36,-2104.48,70.2651,0,0,0,0,0,100,0),
(61500,17,-9244.56,-2094.17,73.7478,0,0,0,0,0,100,0),
(61500,18,-9243.86,-2085.17,75.3524,0,0,0,0,0,100,0),
(61500,19,-9242.18,-2074.68,75.4583,0,0,0,0,0,100,0),
(61500,20,-9240.46,-2063.97,76.2464,0,0,0,0,0,100,0),
(61500,21,-9239.41,-2057.41,76.8398,0,0,0,0,0,100,0),
(61500,22,-9243.3,-2051.45,77.0033,0,0,0,0,0,100,0),
(61500,23,-9248.06,-2044.15,77.0034,0,0,0,0,0,100,0),
(61500,24,-9248.2,-2034.23,76.9877,0,0,0,0,0,100,0),
(61500,25,-9248.36,-2023.24,77.0013,0,60000,0,0,0,100,0),
(61500,26,-9248.51,-2035.03,76.9883,0,0,0,0,0,100,0),
(61500,27,-9248.64,-2045.46,77.0022,0,0,0,0,0,100,0),
(61500,28,-9245.47,-2053.71,77.0022,0,0,0,0,0,100,0),
(61500,29,-9242.22,-2062.2,76.547,0,0,0,0,0,100,0),
(61500,30,-9239.96,-2068.09,75.8833,0,0,0,0,0,100,0),
(61500,31,-9240.33,-2075.87,75.6688,0,0,0,0,0,100,0),
(61500,32,-9240.71,-2083.68,75.8074,0,0,0,0,0,100,0),
(61500,33,-9240.93,-2088.38,75.2944,0,0,0,0,0,100,0),
(61500,34,-9243.33,-2094.45,73.8858,0,0,0,0,0,100,0),
(61500,35,-9245.53,-2099.99,71.8304,0,0,0,0,0,100,0),
(61500,36,-9246.21,-2106.49,69.4221,0,0,0,0,0,100,0),
(61500,37,-9246.97,-2113.79,66.8605,0,0,0,0,0,100,0),
(61500,38,-9247.71,-2120.82,65.1585,0,0,0,0,0,100,0),
(61500,39,-9250.64,-2131.51,64.0216,0,0,0,0,0,100,0),
(61500,40,-9253.07,-2140.4,64.039,0,0,0,0,0,100,0),
(61500,41,-9254.52,-2145.7,64.0393,0,0,0,0,0,100,0),
(61500,42,-9254.75,-2156.31,64.0055,0,0,0,0,0,100,0),
(61500,43,-9254.98,-2166.57,64.0581,0,0,0,0,0,100,0),
(61500,44,-9255.2,-2176.49,64.0581,0,0,0,0,0,100,0),
(61500,45,-9255.4,-2185.46,64.0101,0,0,0,0,0,100,0),
(61500,46,-9263.21,-2189.64,64.0896,0,0,0,0,0,100,0),
(61500,47,-9270.92,-2193.77,64.0897,0,0,0,0,0,100,0),
(61500,48,-9273.67,-2202.94,64.0583,0,0,0,0,0,100,0),
(61500,49,-9277.74,-2211.5,64.0588,0,0,0,0,0,100,0),
(61500,50,-9286.44,-2212.44,63.0055,0,0,0,0,0,100,0),
(61500,51,-9294.79,-2213.34,61.8978,0,0,0,0,0,100,0),
(61500,52,-9304.69,-2211.67,61.8978,0,0,0,0,0,100,0),
(61500,53,-9316.85,-2209.62,61.8983,0,0,0,0,0,100,0),
(61500,54,-9327.6,-2202.14,61.898,1.46783,30000,0,0,0,100,0),
-- Darcy
(100830,1,-9218.29,-2146.83,64.3544,0,0,0,0,0,100,0),
(100830,2,-9218.29,-2146.83,64.3544,0.889865,30000,0,0,0,100,0),
(100830,3,-9218.18,-2153.63,64.3548,0,0,0,0,0,100,0),
(100830,4,-9219.94,-2155.22,64.3531,0,0,0,0,0,100,0),
(100830,5,-9226.36,-2155.17,63.7313,0,0,0,0,0,100,0),
(100830,6,-9228.1,-2160.66,63.7313,3.59164,30000,0,0,0,100,0),
(100830,7,-9223.84,-2160.55,63.7312,0.579638,30000,0,0,0,100,0),
(100830,8,-9225.92,-2160.73,63.7312,0,0,0,0,0,100,0),
(100830,9,-9224.57,-2151.72,63.7312,1.56139,30000,0,0,0,100,0),
(100830,10,-9222.89,-2154.43,63.7308,0,0,0,0,0,100,0),
(100830,11,-9219.94,-2155.22,64.3531,0,0,0,0,0,100,0),
(100830,12,-9218.18,-2153.63,64.3548,0,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
