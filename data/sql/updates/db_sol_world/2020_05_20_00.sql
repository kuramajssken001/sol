-- DB update 2020_05_19_02 -> 2020_05_20_00
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2020_05_19_02';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2020_05_19_02 2020_05_20_00 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1590010570711120106'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1590010570711120106');

-- Gish the Unmoving: Waypoint movement; set active on respawn and add some more spells
UPDATE `creature` SET `MovementType` = 2 WHERE `guid` = 86626;
DELETE FROM `creature_addon` WHERE `guid` = 86626;
INSERT INTO `creature_addon` (`guid`, `path_id`, `mount`, `bytes1`, `bytes2`, `emote`, `isLarge`, `auras`)
VALUES
(86626,866260,0,0,0,0,0,'');

DELETE FROM `smart_scripts` WHERE `entryorguid` = 10825 AND `source_type` = 0;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(10825,0,0,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Gish the Unmoving - On Respawn - Set Active On'),
(10825,0,1,0,4,0,100,0,0,0,0,0,0,91,9,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Gish the Unmoving - On Aggro - Remove Unit Field Bytes 1 ''UNIT_STAND_STATE_SUBMERGED'''),
(10825,0,2,0,0,0,100,0,1000,1000,13000,15000,0,11,33128,1,0,0,0,0,2,0,0,0,0,0,0,0,0,'Gish the Unmoving - In Combat - Cast ''Stone Gaze'''),
(10825,0,3,0,0,0,100,0,5000,7000,5000,7000,0,11,16564,0,0,0,0,0,2,0,0,0,0,0,0,0,0,'Gish the Unmoving - In Combat - Cast ''Gargoyle Strike'''),
(10825,0,4,0,0,0,100,0,6000,9000,18000,21000,0,11,13445,0,0,0,0,0,2,0,0,0,0,0,0,0,0,'Gish the Unmoving - In Combat - Cast ''Rend'''),
(10825,0,5,0,2,0,100,0,0,50,15000,20000,0,11,7020,0,0,0,0,0,2,0,0,0,0,0,0,0,0,'Gish the Unmoving - On Health Lower Than 50% - Cast ''Stoneform''');

DELETE FROM `waypoint_scripts` WHERE `guid` IN (941,942,943,944);
INSERT INTO `waypoint_scripts` (`id`, `delay`, `command`, `datalong`, `datalong2`, `dataint`, `x`, `y`, `z`, `o`, `guid`)
VALUES
(8662600,0,2,74,9,0,0,0,0,0,941), -- Waypoint  42: Field Set "UNIT_STAND_STATE_SUBMERGED"
(8662601,0,2,74,0,0,0,0,0,0,942), -- Waypoint  43: Field Set "UNIT_STAND_STATE_STAND"
(8662602,0,2,74,9,0,0,0,0,0,943), -- Waypoint 154: Field Set "UNIT_STAND_STATE_SUBMERGED"
(8662603,0,2,74,0,0,0,0,0,0,944); -- Waypoint 155: Field Set "UNIT_STAND_STATE_STAND"

DELETE FROM `waypoint_data` WHERE `id` = 866260;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(866260,1,2479.69,-4462.68,66.4155,0,0,0,0,100,0),
(866260,2,2484.58,-4449.07,64.9619,0,0,0,0,100,0),
(866260,3,2487.92,-4434.16,64.0811,0,0,0,0,100,0),
(866260,4,2491.91,-4417,65.0041,0,0,0,0,100,0),
(866260,5,2496.24,-4402.86,66.5487,0,0,0,0,100,0),
(866260,6,2501.76,-4389,67.4053,0,0,0,0,100,0),
(866260,7,2507.98,-4378.6,67.397,0,0,0,0,100,0),
(866260,8,2516.95,-4371.15,66.9065,0,0,0,0,100,0),
(866260,9,2529.09,-4362.45,65.9184,0,0,0,0,100,0),
(866260,10,2538.24,-4353.37,66.6548,0,0,0,0,100,0),
(866260,11,2544.77,-4344,67.0234,0,0,0,0,100,0),
(866260,12,2551.16,-4333,67.4274,0,0,0,0,100,0),
(866260,13,2557.06,-4323.76,68.8825,0,0,0,0,100,0),
(866260,14,2561.04,-4318,67.1441,0,0,0,0,100,0),
(866260,15,2564.66,-4313.58,65.3168,0,0,0,0,100,0),
(866260,16,2569.87,-4307.15,66.6569,0,0,0,0,100,0),
(866260,17,2575.82,-4299.51,68.3312,0,0,0,0,100,0),
(866260,18,2582.12,-4294.55,70.8494,0,0,0,0,100,0),
(866260,19,2589.74,-4291.62,74.4401,0,0,0,0,100,0),
(866260,20,2597.85,-4290,77.0925,0,0,0,0,100,0),
(866260,21,2608.9,-4289.19,78.9957,0,0,0,0,100,0),
(866260,22,2619.38,-4288.57,82.9332,0,0,0,0,100,0),
(866260,23,2628.06,-4287.54,86.8725,0,0,0,0,100,0),
(866260,24,2636.49,-4285.25,90.0328,0,0,0,0,100,0),
(866260,25,2644.2,-4281.14,92.239,0,0,0,0,100,0),
(866260,26,2652.12,-4276.2,94.2991,0,0,0,0,100,0),
(866260,27,2659.89,-4272.43,97.1646,0,0,0,0,100,0),
(866260,28,2668.81,-4269.83,99.9994,0,0,0,0,100,0),
(866260,29,2678.11,-4270.13,102.656,0,0,0,0,100,0),
(866260,30,2688.38,-4272.23,104.518,0,0,0,0,100,0),
(866260,31,2696.64,-4274.25,105.852,0,0,0,0,100,0),
(866260,32,2704.41,-4274.88,104.842,0,0,0,0,100,0),
(866260,33,2712.07,-4274.26,102.199,0,0,0,0,100,0),
(866260,34,2717.16,-4272.65,100.421,0,0,0,0,100,0),
(866260,35,2720.47,-4270.08,100.461,0,0,0,0,100,0),
(866260,36,2722.45,-4267.21,102.247,0,0,0,0,100,0),
(866260,37,2723.07,-4264.24,105.269,0,0,0,0,100,0),
(866260,38,2722.94,-4261.45,108.284,0,0,0,0,100,0),
(866260,39,2722.76,-4258.89,110.627,0,0,0,0,100,0),
(866260,40,2722.37,-4256.36,112.786,0,0,0,0,100,0),
(866260,41,2722.03,-4254.17,113.881,0,0,0,0,100,0),
(866260,42,2720.37,-4250.12,114.578,0,300000,0,8662600,100,0),
(866260,43,2720.37,-4250.12,114.578,0,3000,0,8662601,100,0),
(866260,44,2721.4,-4252.25,114.347,0,0,0,0,100,0),
(866260,45,2722.04,-4255.21,113.511,0,0,0,0,100,0),
(866260,46,2722.46,-4257.73,111.588,0,0,0,0,100,0),
(866260,47,2722.76,-4260.04,109.752,0,0,0,0,100,0),
(866260,48,2722.91,-4262.72,106.834,0,0,0,0,100,0),
(866260,49,2722.71,-4265.75,103.659,0,0,0,0,100,0),
(866260,50,2721.26,-4268.55,101.401,0,0,0,0,100,0),
(866260,51,2718.32,-4271.37,100.176,0,0,0,0,100,0),
(866260,52,2714,-4273.63,101.412,0,0,0,0,100,0),
(866260,53,2707.85,-4274.33,103.565,0,0,0,0,100,0),
(866260,54,2700.06,-4274.57,105.671,0,0,0,0,100,0),
(866260,55,2692.26,-4273.14,105.204,0,0,0,0,100,0),
(866260,56,2683.52,-4271.06,103.741,0,0,0,0,100,0),
(866260,57,2673.92,-4269.86,101.571,0,0,0,0,100,0),
(866260,58,2664.37,-4270.78,98.7048,0,0,0,0,100,0),
(866260,59,2656.48,-4273.98,95.8841,0,0,0,0,100,0),
(866260,60,2648.21,-4278.56,93.1877,0,0,0,0,100,0),
(866260,61,2641.23,-4282.79,91.475,0,0,0,0,100,0),
(866260,62,2632.09,-4286.3,88.3389,0,0,0,0,100,0),
(866260,63,2623.63,-4287.94,84.933,0,0,0,0,100,0),
(866260,64,2613.62,-4288.73,80.4651,0,0,0,0,100,0),
(866260,65,2603.74,-4289.56,77.9554,0,0,0,0,100,0),
(866260,66,2594.34,-4290.56,76.3764,0,0,0,0,100,0),
(866260,67,2586.25,-4292.8,72.9163,0,0,0,0,100,0),
(866260,68,2578.78,-4297.07,69.3186,0,0,0,0,100,0),
(866260,69,2573.24,-4303.17,67.3544,0,0,0,0,100,0),
(866260,70,2567.32,-4310.23,65.9919,0,0,0,0,100,0),
(866260,71,2562.72,-4316.27,66.1039,0,0,0,0,100,0),
(866260,72,2559.21,-4320.77,68.4071,0,0,0,0,100,0),
(866260,73,2554.65,-4327.82,68.5579,0,0,0,0,100,0),
(866260,74,2548.27,-4338.13,67.2452,0,0,0,0,100,0),
(866260,75,2541.46,-4349.15,67.0405,0,0,0,0,100,0),
(866260,76,2533.1,-4358.54,65.9251,0,0,0,0,100,0),
(866260,77,2522.84,-4366.76,66.4449,0,0,0,0,100,0),
(866260,78,2512.54,-4374.61,67.1706,0,0,0,0,100,0),
(866260,79,2504.94,-4383.37,67.4834,0,0,0,0,100,0),
(866260,80,2499.3,-4394.48,67.1545,0,0,0,0,100,0),
(866260,81,2494.23,-4409.14,65.9198,0,0,0,0,100,0),
(866260,82,2490.11,-4424.34,64.3247,0,0,0,0,100,0),
(866260,83,2486.13,-4441.61,64.5219,0,0,0,0,100,0),
(866260,84,2482.32,-4455.9,65.3158,0,0,0,0,100,0),
(866260,85,2476.8,-4467.07,68.4608,0,0,0,0,100,0),
(866260,86,2472.98,-4471.78,71.8902,0,0,0,0,100,0),
(866260,87,2468.59,-4475.96,74.2763,0,0,0,0,100,0),
(866260,88,2461.25,-4482.1,74.8833,0,0,0,0,100,0),
(866260,89,2451.76,-4489.07,74.5272,0,0,0,0,100,0),
(866260,90,2443.4,-4496.53,74.8455,0,0,0,0,100,0),
(866260,91,2437.28,-4502.93,76.9219,0,0,0,0,100,0),
(866260,92,2431.54,-4511.01,78.1484,0,0,0,0,100,0),
(866260,93,2425.2,-4519.96,76.592,0,0,0,0,100,0),
(866260,94,2419.41,-4528.99,76.1223,0,0,0,0,100,0),
(866260,95,2415.33,-4539.29,75.7977,0,0,0,0,100,0),
(866260,96,2413.14,-4548.48,74.336,0,0,0,0,100,0),
(866260,97,2410.52,-4558.28,75.3402,0,0,0,0,100,0),
(866260,98,2407.9,-4566.63,76.259,0,0,0,0,100,0),
(866260,99,2404.47,-4576.05,74.7305,0,0,0,0,100,0),
(866260,100,2399.86,-4585.75,73.6157,0,0,0,0,100,0),
(866260,101,2394.55,-4595.74,73.6148,0,0,0,0,100,0),
(866260,102,2389.47,-4605.19,73.6211,0,0,0,0,100,0),
(866260,103,2385.19,-4614.9,73.6125,0,0,0,0,100,0),
(866260,104,2381.33,-4625.41,73.6285,0,0,0,0,100,0),
(866260,105,2377.41,-4636.52,74.923,0,0,0,0,100,0),
(866260,106,2373.81,-4646.14,77.2101,0,0,0,0,100,0),
(866260,107,2371.07,-4652.83,77.4824,0,0,0,0,100,0),
(866260,108,2367.48,-4661.83,76.3927,0,0,0,0,100,0),
(866260,109,2364.02,-4671.61,75.7051,0,0,0,0,100,0),
(866260,110,2361.69,-4681,74.7589,0,0,0,0,100,0),
(866260,111,2361.03,-4690.76,73.7782,0,0,0,0,100,0),
(866260,112,2361.96,-4700.51,73.9228,0,0,0,0,100,0),
(866260,113,2362.64,-4710.4,74.8723,0,0,0,0,100,0),
(866260,114,2363.37,-4720.17,76.5187,0,0,0,0,100,0),
(866260,115,2364.15,-4728.3,76.9068,0,0,0,0,100,0),
(866260,116,2365.1,-4738.18,75.8657,0,0,0,0,100,0),
(866260,117,2366.42,-4748.48,76.3471,0,0,0,0,100,0),
(866260,118,2367.29,-4758.7,77.7562,0,0,0,0,100,0),
(866260,119,2367.58,-4770.01,78.5884,0,0,0,0,100,0),
(866260,120,2366.9,-4779.08,79.3994,0,0,0,0,100,0),
(866260,121,2366.23,-4789.56,81.2896,0,0,0,0,100,0),
(866260,122,2365.65,-4801.09,84.3246,0,0,0,0,100,0),
(866260,123,2365.33,-4808.2,85.007,0,0,0,0,100,0),
(866260,124,2365.68,-4816.36,83.6173,0,0,0,0,100,0),
(866260,125,2366.57,-4824.12,81.5295,0,0,0,0,100,0),
(866260,126,2368.33,-4832.93,79.576,0,0,0,0,100,0),
(866260,127,2370.81,-4841.8,77.9713,0,0,0,0,100,0),
(866260,128,2373.81,-4850.77,77.8799,0,0,0,0,100,0),
(866260,129,2376.49,-4860.06,78.9965,0,0,0,0,100,0),
(866260,130,2378.3,-4869.45,79.6955,0,0,0,0,100,0),
(866260,131,2378.55,-4878.18,81.3598,0,0,0,0,100,0),
(866260,132,2378.06,-4889.24,82.4085,0,0,0,0,100,0),
(866260,133,2379.21,-4897.78,80.8186,0,0,0,0,100,0),
(866260,134,2383.01,-4906.94,77.7384,0,0,0,0,100,0),
(866260,135,2386.07,-4915.75,75.2925,0,0,0,0,100,0),
(866260,136,2389.52,-4926.28,73.883,0,0,0,0,100,0),
(866260,137,2391.8,-4936.16,73.996,0,0,0,0,100,0),
(866260,138,2394.09,-4946.88,73.7007,0,0,0,0,100,0),
(866260,139,2395.02,-4954.98,73.026,0,0,0,0,100,0),
(866260,140,2393.47,-4964.76,72.4072,0,0,0,0,100,0),
(866260,141,2391.61,-4976.04,70.6891,0,0,0,0,100,0),
(866260,142,2390.15,-4984.9,70.154,0,0,0,0,100,0),
(866260,143,2389.7,-4995.6,71.5292,0,0,0,0,100,0),
(866260,144,2391.37,-5007.49,73.364,0,0,0,0,100,0),
(866260,145,2393.62,-5018.94,74.8792,0,0,0,0,100,0),
(866260,146,2397.04,-5028.86,78.1109,0,0,0,0,100,0),
(866260,147,2400.45,-5037.9,81.1225,0,0,0,0,100,0),
(866260,148,2400.03,-5048.01,80.4183,0,0,0,0,100,0),
(866260,149,2395.37,-5056.11,80.9219,0,0,0,0,100,0),
(866260,150,2388.51,-5061.09,83.9155,0,0,0,0,100,0),
(866260,151,2384.6,-5062.26,85.7779,0,0,0,0,100,0),
(866260,152,2380.41,-5063.32,87.6207,0,0,0,0,100,0),
(866260,153,2377.37,-5064.09,88.9063,0,0,0,0,100,0),
(866260,154,2374.11,-5064.97,89.0825,0,300000,0,8662602,100,0),
(866260,155,2374.11,-5064.97,89.0825,0,3000,0,8662603,100,0),
(866260,156,2376.01,-5064.41,89.1265,0,0,0,0,100,0),
(866260,157,2378.82,-5063.6,88.246,0,0,0,0,100,0),
(866260,158,2382.25,-5062.94,86.8433,0,0,0,0,100,0),
(866260,159,2386.59,-5061.56,84.8015,0,0,0,0,100,0),
(866260,160,2392.8,-5058.37,81.6028,0,0,0,0,100,0),
(866260,161,2398.11,-5051.15,80.3195,0,0,0,0,100,0),
(866260,162,2400.23,-5042.05,81.0689,0,0,0,0,100,0),
(866260,163,2398.4,-5033.17,79.6884,0,0,0,0,100,0),
(866260,164,2394.67,-5023.49,76.1558,0,0,0,0,100,0),
(866260,165,2391.8,-5012.33,73.7126,0,0,0,0,100,0),
(866260,166,2390.06,-5001.38,72.7021,0,0,0,0,100,0),
(866260,167,2389.56,-4989.4,70.48,0,0,0,0,100,0),
(866260,168,2390.81,-4978.86,70.2758,0,0,0,0,100,0),
(866260,169,2392.3,-4969.65,71.5965,0,0,0,0,100,0),
(866260,170,2394.08,-4959.42,72.7176,0,0,0,0,100,0),
(866260,171,2394.21,-4950.59,73.3802,0,0,0,0,100,0),
(866260,172,2392.6,-4941.16,74.0344,0,0,0,0,100,0),
(866260,173,2390.36,-4930.9,73.8774,0,0,0,0,100,0),
(866260,174,2387.53,-4920.79,74.2984,0,0,0,0,100,0),
(866260,175,2384.09,-4911,76.4764,0,0,0,0,100,0),
(866260,176,2380.75,-4902.03,79.5038,0,0,0,0,100,0),
(866260,177,2378.65,-4893.2,81.8626,0,0,0,0,100,0),
(866260,178,2378.39,-4884.12,82.2541,0,0,0,0,100,0),
(866260,179,2378.29,-4874.43,80.5452,0,0,0,0,100,0),
(866260,180,2377.31,-4864.34,79.2002,0,0,0,0,100,0),
(866260,181,2374.81,-4855.35,78.3505,0,0,0,0,100,0),
(866260,182,2371.86,-4846.01,77.8013,0,0,0,0,100,0),
(866260,183,2368.83,-4836.33,79.0011,0,0,0,0,100,0),
(866260,184,2366.68,-4827.13,80.9179,0,0,0,0,100,0),
(866260,185,2365.76,-4819.72,82.7905,0,0,0,0,100,0),
(866260,186,2365.01,-4812.05,84.679,0,0,0,0,100,0),
(866260,187,2365.24,-4804.72,84.9511,0,0,0,0,100,0),
(866260,188,2365.47,-4795.98,83.1445,0,0,0,0,100,0),
(866260,189,2366.11,-4783.97,80.2329,0,0,0,0,100,0),
(866260,190,2367.04,-4773.17,78.9408,0,0,0,0,100,0),
(866260,191,2367.25,-4763.61,78.3091,0,0,0,0,100,0),
(866260,192,2366.41,-4753.15,77.0959,0,0,0,0,100,0),
(866260,193,2365.4,-4742.59,75.8216,0,0,0,0,100,0),
(866260,194,2364.3,-4733.1,76.4731,0,0,0,0,100,0),
(866260,195,2363.45,-4724.04,76.9202,0,0,0,0,100,0),
(866260,196,2362.86,-4715.43,75.7436,0,0,0,0,100,0),
(866260,197,2362.07,-4705.55,74.2965,0,0,0,0,100,0),
(866260,198,2361.19,-4696.02,73.7126,0,0,0,0,100,0),
(866260,199,2361.23,-4685.99,74.1414,0,0,0,0,100,0),
(866260,200,2362.67,-4676.66,75.2429,0,0,0,0,100,0),
(866260,201,2365.43,-4667.01,75.9955,0,0,0,0,100,0),
(866260,202,2369,-4657.64,76.8437,0,0,0,0,100,0),
(866260,203,2372.38,-4649.31,77.5788,0,0,0,0,100,0),
(866260,204,2375.22,-4641.65,76.2658,0,0,0,0,100,0),
(866260,205,2379.16,-4630.92,73.9601,0,0,0,0,100,0),
(866260,206,2383.06,-4619.93,73.6124,0,0,0,0,100,0),
(866260,207,2386.95,-4610.18,73.6162,0,0,0,0,100,0),
(866260,208,2391.64,-4600.78,73.6215,0,0,0,0,100,0),
(866260,209,2396.86,-4590.74,73.6272,0,0,0,0,100,0),
(866260,210,2401.89,-4581.26,73.6283,0,0,0,0,100,0),
(866260,211,2406.16,-4571.03,75.7113,0,0,0,0,100,0),
(866260,212,2408.89,-4562.97,76.1393,0,0,0,0,100,0),
(866260,213,2411.66,-4553.44,74.4638,0,0,0,0,100,0),
(866260,214,2414.03,-4543.69,75.1202,0,0,0,0,100,0),
(866260,215,2417.1,-4534.39,76.1934,0,0,0,0,100,0),
(866260,216,2422.32,-4524.22,75.9961,0,0,0,0,100,0),
(866260,217,2427.69,-4515.88,77.4416,0,0,0,0,100,0),
(866260,218,2433.14,-4508.3,78.2133,0,0,0,0,100,0),
(866260,219,2439.49,-4500.39,76.0617,0,0,0,0,100,0),
(866260,220,2447.85,-4492.6,74.4688,0,0,0,0,100,0),
(866260,221,2456.52,-4485.52,74.7216,0,0,0,0,100,0),
(866260,222,2464.58,-4479.17,74.9047,0,0,0,0,100,0),
(866260,223,2470.67,-4473.74,73.5437,0,0,0,0,100,0),
(866260,224,2474.87,-4469.36,70.2096,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
