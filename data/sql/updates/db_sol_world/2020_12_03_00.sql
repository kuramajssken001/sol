-- DB update 2020_12_02_08 -> 2020_12_03_00
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2020_12_02_08';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2020_12_02_08 2020_12_03_00 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1606950133053722038'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1606950133053722038');

UPDATE `creature` SET `MovementType` = 2 WHERE `guid` = 16047;
UPDATE `creature_addon` SET `path_id` = 160470 WHERE `guid` = 16047;

UPDATE `creature_template` SET `AIName` = 'SmartAI' WHERE `entry` = 14277;
DELETE FROM `smart_scripts` WHERE `entryorguid` = 14277 AND `source_type` = 0;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(14277,0,0,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Lady Zephris - On Respawn - Set Active On');

DELETE FROM `waypoint_data` WHERE `id` = 160470;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(160470,1,-1300.57,-998.316,-0.821344,0,0,0,0,100,0),
(160470,2,-1293.33,-991.715,-1.22983,0,0,0,0,100,0),
(160470,3,-1283.67,-982.913,-1.37395,0,0,0,0,100,0),
(160470,4,-1276.08,-976,-0.561754,0,0,0,0,100,0),
(160470,5,-1270.38,-967.887,0.451746,0,0,0,0,100,0),
(160470,6,-1264.22,-959.104,0.902358,0,0,0,0,100,0),
(160470,7,-1258.03,-950.293,1.1057,0,0,0,0,100,0),
(160470,8,-1254.43,-943.091,1.12114,0,0,0,0,100,0),
(160470,9,-1249.95,-934.117,0.564829,0,0,0,0,100,0),
(160470,10,-1245.88,-925.964,0.299947,0,0,0,0,100,0),
(160470,11,-1244.14,-917.631,0.39761,0,0,0,0,100,0),
(160470,12,-1241.09,-902.986,0.176827,0,0,0,0,100,0),
(160470,13,-1235.25,-897.286,0.353321,0,0,0,0,100,0),
(160470,14,-1227.89,-890.117,-0.184843,0,0,0,0,100,0),
(160470,15,-1221.63,-884.008,-0.287507,0,0,0,0,100,0),
(160470,16,-1216.54,-879.045,-0.012203,0,0,0,0,100,0),
(160470,17,-1209.99,-870.393,0.0836089,0,0,0,0,100,0),
(160470,18,-1204.1,-862.604,-0.022923,0,0,0,0,100,0),
(160470,19,-1197.48,-856.191,0.0464462,0,0,0,0,100,0),
(160470,20,-1190.78,-849.698,0.13444,0,0,0,0,100,0),
(160470,21,-1183.49,-842.634,0.24517,0,0,0,0,100,0),
(160470,22,-1177.1,-836.439,0.405907,0,0,0,0,100,0),
(160470,23,-1171.97,-829.634,0.322152,0,0,0,0,100,0),
(160470,24,-1166.4,-822.235,-0.100792,0,0,0,0,100,0),
(160470,25,-1161.14,-815.245,-0.560602,0,0,0,0,100,0),
(160470,26,-1155.64,-807.945,-0.769681,0,0,0,0,100,0),
(160470,27,-1149.3,-801.261,-0.550262,0,0,0,0,100,0),
(160470,28,-1142.15,-793.724,-0.160706,0,0,0,0,100,0),
(160470,29,-1134.61,-785.771,-0.684184,0,0,0,0,100,0),
(160470,30,-1127.18,-787.755,-0.0997552,0,0,0,0,100,0),
(160470,31,-1118.5,-790.073,0.00932778,0,0,0,0,100,0),
(160470,32,-1111.14,-792.039,-0.047394,0,0,0,0,100,0),
(160470,33,-1116.43,-798.56,1.41927,0,0,0,0,100,0),
(160470,34,-1120.56,-803.641,2.45509,0,0,0,0,100,0),
(160470,35,-1127.98,-806.469,2.37894,0,0,0,0,100,0),
(160470,36,-1138.22,-810.374,2.33467,0,0,0,0,100,0),
(160470,37,-1149.99,-814.86,1.4159,0,0,0,0,100,0),
(160470,38,-1155.78,-819.582,1.20328,0,0,0,0,100,0),
(160470,39,-1163.28,-825.706,0.918355,0,0,0,0,100,0),
(160470,40,-1170.68,-831.741,0.905636,0,0,0,0,100,0),
(160470,41,-1178.81,-837.004,0.178431,0,0,0,0,100,0),
(160470,42,-1186.74,-842.143,-0.424433,0,0,0,0,100,0),
(160470,43,-1192.02,-848.058,-0.336338,0,0,0,0,100,0),
(160470,44,-1199.41,-856.322,-0.217273,0,0,0,0,100,0),
(160470,45,-1205.23,-862.842,-0.181762,0,0,0,0,100,0),
(160470,46,-1211.46,-871.293,-0.098777,0,0,0,0,100,0),
(160470,47,-1217.9,-880.026,-0.143359,0,0,0,0,100,0),
(160470,48,-1221.71,-885.192,-0.091555,0,0,0,0,100,0),
(160470,49,-1226.81,-892.298,0.377098,0,0,0,0,100,0),
(160470,50,-1232.45,-900.164,0.873585,0,0,0,0,100,0),
(160470,51,-1238.44,-908.5,0.982274,0,0,0,0,100,0),
(160470,52,-1244.15,-916.463,0.404305,0,0,0,0,100,0),
(160470,53,-1248.13,-924.124,0.0509667,0,0,0,0,100,0),
(160470,54,-1252.91,-933.344,0.0723237,0,0,0,0,100,0),
(160470,55,-1257.26,-941.732,0.536449,0,0,0,0,100,0),
(160470,56,-1261.29,-949.49,0.631858,0,0,0,0,100,0),
(160470,57,-1266.24,-957.257,0.562765,0,0,0,0,100,0),
(160470,58,-1272.14,-966.5,0.158472,0,0,0,0,100,0),
(160470,59,-1277.74,-975.288,-0.7961,0,0,0,0,100,0),
(160470,60,-1284.48,-985.52,-1.32739,0,0,0,0,100,0),
(160470,61,-1290.77,-995.08,-0.895832,0,0,0,0,100,0),
(160470,62,-1296.33,-997.524,-0.64845,0,0,0,0,100,0),
(160470,63,-1305.2,-1001.42,-1.1564,0,0,0,0,100,0),
(160470,64,-1313.06,-1004.87,-1.52388,0,0,0,0,100,0),
(160470,65,-1319.48,-1009.28,-1.52388,0,0,0,0,100,0),
(160470,66,-1328.11,-1015.15,-1.13945,0,0,0,0,100,0),
(160470,67,-1336.1,-1020.64,-0.572562,0,0,0,0,100,0),
(160470,68,-1344.6,-1026.51,0.392506,0,0,0,0,100,0),
(160470,69,-1353.15,-1030.53,0.880635,0,0,0,0,100,0),
(160470,70,-1360.23,-1033.85,1.99119,0,0,0,0,100,0),
(160470,71,-1366.78,-1036.92,2.69835,0,0,0,0,100,0),
(160470,72,-1373.75,-1040.19,2.63405,0,0,0,0,100,0),
(160470,73,-1383.58,-1044.8,2.75007,0,0,0,0,100,0),
(160470,74,-1392.12,-1048.81,3.73084,0,0,0,0,100,0),
(160470,75,-1398.88,-1051.98,4.64801,0,0,0,0,100,0),
(160470,76,-1403.53,-1054.17,5.3617,0,0,0,0,100,0),
(160470,77,-1409.66,-1057.04,5.12397,0,0,0,0,100,0),
(160470,78,-1414.89,-1059.5,4.62124,0,0,0,0,100,0),
(160470,79,-1419.63,-1065.72,5.62584,0,0,0,0,100,0),
(160470,80,-1423.88,-1071.29,6.47974,0,0,0,0,100,0),
(160470,81,-1428.48,-1077.32,7.42839,0,0,0,0,100,0),
(160470,82,-1433.06,-1083.33,8.08795,0,0,0,0,100,0),
(160470,83,-1437.14,-1087.24,9.01733,0,0,0,0,100,0),
(160470,84,-1441.77,-1091.69,9.71514,0,0,0,0,100,0),
(160470,85,-1444.81,-1092.49,8.98601,0,0,0,0,100,0),
(160470,86,-1448.19,-1093.38,6.80131,0,0,0,0,100,0),
(160470,87,-1453.15,-1094.69,5.58324,0,0,0,0,100,0),
(160470,88,-1457.46,-1095.82,3.53264,0,0,0,0,100,0),
(160470,89,-1462.67,-1096.43,0.0403213,0,0,0,0,100,0),
(160470,90,-1468.13,-1097.07,-1.56115,0,0,0,0,100,0),
(160470,91,-1470.53,-1088.1,-1.56115,0,0,0,0,100,0),
(160470,92,-1472.68,-1080.05,-1.56115,0,0,0,0,100,0),
(160470,93,-1465.63,-1071.58,-1.56115,0,0,0,0,100,0),
(160470,94,-1458.45,-1062.96,-1.56115,0,0,0,0,100,0),
(160470,95,-1451.28,-1056.44,-1.56115,0,0,0,0,100,0),
(160470,96,-1443.47,-1054.27,-1.56115,0,0,0,0,100,0),
(160470,97,-1437.88,-1052.68,-1.46101,0,0,0,0,100,0),
(160470,98,-1432.58,-1051.24,-0.703612,0,0,0,0,100,0),
(160470,99,-1426.5,-1048.28,-0.430247,0,0,0,0,100,0),
(160470,100,-1418.11,-1044.19,-0.597329,0,0,0,0,100,0),
(160470,101,-1409.8,-1040.14,-0.755762,0,0,0,0,100,0),
(160470,102,-1401.43,-1039.42,-0.545025,0,0,0,0,100,0),
(160470,103,-1392.83,-1038.68,-0.165609,0,0,0,0,100,0),
(160470,104,-1385.61,-1038.06,0.275001,0,0,0,0,100,0),
(160470,105,-1378.06,-1034.38,0.368468,0,0,0,0,100,0),
(160470,106,-1372.19,-1031.51,0.546321,0,0,0,0,100,0),
(160470,107,-1364.85,-1027.93,0.269606,0,0,0,0,100,0),
(160470,108,-1357.3,-1024.25,-0.809856,0,0,0,0,100,0),
(160470,109,-1349.32,-1021.63,-1.22785,0,0,0,0,100,0),
(160470,110,-1340.45,-1018.71,-1.28756,0,0,0,0,100,0),
(160470,111,-1333.25,-1016.34,-1.23358,0,0,0,0,100,0),
(160470,112,-1326.17,-1014.01,-1.29519,0,0,0,0,100,0),
(160470,113,-1318.27,-1009.17,-1.3981,0,0,0,0,100,0),
(160470,114,-1307.19,-1002.37,-1.36002,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
