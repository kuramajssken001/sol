-- DB update 2020_04_17_02 -> 2020_04_19_00
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2020_04_17_02';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2020_04_17_02 2020_04_19_00 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1587282808565857625'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1587282808565857625');

DELETE FROM `waypoint_data` WHERE `id` = 284130;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(284130,1,2235.52,607.519,33.4119,0,0,0,0,100,0),
(284130,2,2215.19,635.489,33.4721,0,0,0,0,100,0),
(284130,3,2195.03,662.842,33.4007,0,0,0,0,100,0),
(284130,4,2172.46,689.225,33.443,0,0,0,0,100,0),
(284130,5,2144.08,711.104,32.9468,0,0,0,0,100,0),
(284130,6,2132.05,723.347,31.804,0,0,0,0,100,0),
(284130,7,2100.08,751.354,31.1294,0,0,0,0,100,0),
(284130,8,2092.35,776.184,30.6779,0,0,0,0,100,0),
(284130,9,2092.05,822.815,29.7288,0,0,0,0,100,0),
(284130,10,2101.15,862.413,29.6197,0,0,0,0,100,0),
(284130,11,2110.86,899.198,30.4767,0,0,0,0,100,0),
(284130,12,2120.26,925.546,29.3684,0,0,0,0,100,0),
(284130,13,2133.39,969.923,29.6672,0,0,0,0,100,0),
(284130,14,2140.21,995.168,29.3696,0,0,0,0,100,0),
(284130,15,2159.94,1015.01,29.012,0,0,0,0,100,0),
(284130,16,2178.27,1033.77,29.5859,0,0,0,0,100,0), -- new waypoint
(284130,17,2203.34,1060.23,28.8169,0,0,0,0,100,0),
(284130,18,2177.67,1034.75,29.5353,0,0,0,0,100,0),
(284130,19,2138.79,994.947,29.4888,0,0,0,0,100,0),
(284130,20,2132.5,964.598,29.4926,0,0,0,0,100,0),
(284130,21,2124.35,937.053,28.8306,0,0,0,0,100,0),
(284130,22,2111.55,901.992,30.4541,0,0,0,0,100,0),
(284130,23,2104.18,874.23,29.832,0,0,0,0,100,0),
(284130,24,2093.19,831.964,29.672,0,0,0,0,100,0),
(284130,25,2090.57,782.027,30.6495,0,0,0,0,100,0),
(284130,26,2101.09,749.07,31.0877,0,0,0,0,100,0),
(284130,27,2137.63,717.817,32.2847,0,0,0,0,100,0),
(284130,28,2165.59,693.683,33.2848,0,0,0,0,100,0),
(284130,29,2186.12,676.475,33.3344,0,0,0,0,100,0),
(284130,30,2203.03,651.853,33.4722,0,0,0,0,100,0),
(284130,31,2230.12,613.082,33.4722,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
