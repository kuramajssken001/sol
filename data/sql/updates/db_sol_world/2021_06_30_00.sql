-- DB update 2021_06_29_05 -> 2021_06_30_00
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_06_29_05';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_06_29_05 2021_06_30_00 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1625048368862956740'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1625048368862956740');

UPDATE `creature_template` SET `AIName` = 'SmartAI' WHERE `entry` = 5725;
DELETE FROM `smart_scripts` WHERE `source_type` = 0 AND `entryorguid` = 5725;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(5725,0,0,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Deathguard Lundmark - On Respawn - Set Active On');

-- Hamlin Atkins: Fix spawn position
UPDATE `creature` SET `position_x` = 2283.86, `position_y` = 386.706, `position_z` = 34.1142 WHERE `guid` = 38292;

DELETE FROM `waypoint_data` WHERE `id` IN (320280,382920);
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
-- Deathguard Lundmark
(320280,1,2306.93,397.46,33.9311,3.22848,300000,0,0,100,0),
(320280,2,2296.19,396.525,34.0122,0,0,0,0,100,0),
(320280,3,2284.06,395.468,34.095,0,0,0,0,100,0),
(320280,4,2278.68,415.762,33.8678,0,0,0,0,100,0),
(320280,5,2274.77,430.723,33.9876,0,0,0,0,100,0),
(320280,6,2270.72,446.237,34.0219,0,0,0,0,100,0),
(320280,7,2266.04,461.561,34.0092,0,0,0,0,100,0),
(320280,8,2261.52,476.362,33.8452,0,0,0,0,100,0),
(320280,9,2257.4,500.066,33.9628,0,0,0,0,100,0),
(320280,10,2256.21,506.894,34.124,0,0,0,0,100,0),
(320280,11,2257.66,513.59,34.09,0,0,0,0,100,0),
(320280,12,2260,524.397,33.5545,0,0,0,0,100,0),
(320280,13,2262.56,536.238,33.4516,0,0,0,0,100,0),
(320280,14,2256.9,551.767,33.6102,0,0,0,0,100,0),
(320280,15,2250.47,569.437,33.3367,0,0,0,0,100,0),
(320280,16,2247.76,582.155,33.5028,0,0,0,0,100,0),
(320280,17,2239.17,602.659,33.3375,0,0,0,0,100,0),
(320280,18,2233.82,610.027,33.4721,0,0,0,0,100,0),
(320280,19,2220.96,627.747,33.4721,0,0,0,0,100,0),
(320280,20,2206.9,647.109,33.4721,0,0,0,0,100,0),
(320280,21,2196.55,661.373,33.4275,0,0,0,0,100,0),
(320280,22,2186.35,674.613,33.3345,0,0,0,0,100,0),
(320280,23,2177.65,685.913,33.4513,0,0,0,0,100,0),
(320280,24,2163.31,696.684,33.2464,0,0,0,0,100,0),
(320280,25,2148.34,707.926,33.0271,0,0,0,0,100,0),
(320280,26,2140.46,714.817,32.6759,0,0,0,0,100,0),
(320280,27,2134.22,720.268,32.0109,0,0,0,0,100,0),
(320280,28,2122.61,730.628,31.3931,0,0,0,0,100,0),
(320280,29,2112.28,739.844,30.8576,0,0,0,0,100,0),
(320280,30,2104.23,749.86,30.8802,0,0,0,0,100,0),
(320280,31,2096.39,759.626,31.0241,0,0,0,0,100,0),
(320280,32,2094.2,768.181,30.8861,0,0,0,0,100,0),
(320280,33,2091.99,776.817,30.6584,0,0,0,0,100,0),
(320280,34,2091.75,787.146,30.5107,0,0,0,0,100,0),
(320280,35,2091.43,801.31,30.2302,0,0,0,0,100,0),
(320280,36,2091.19,811.512,30.0343,0,0,0,0,100,0),
(320280,37,2093.43,826.91,29.681,0,0,0,0,100,0),
(320280,38,2095.5,841.12,29.5657,0,0,0,0,100,0),
(320280,39,2098.48,852.788,29.5238,0,0,0,0,100,0),
(320280,40,2102.9,870.087,29.7883,0,0,0,0,100,0),
(320280,41,2106.17,882.866,29.8641,0,0,0,0,100,0),
(320280,42,2109.67,893.78,30.2591,0,0,0,0,100,0),
(320280,43,2112.09,901.346,30.4584,0,0,0,0,100,0),
(320280,44,2113.34,905.237,30.359,0,0,0,0,100,0),
(320280,45,2115.91,912.926,30.0307,0,0,0,0,100,0),
(320280,46,2119.26,922.935,29.4889,0,0,0,0,100,0),
(320280,47,2122.65,933.074,29.0589,0,0,0,0,100,0),
(320280,48,2125.4,942.56,28.7899,0,0,0,0,100,0),
(320280,49,2127.68,950.405,29.0565,0,0,0,0,100,0),
(320280,50,2131.66,964.123,29.4833,0,0,0,0,100,0),
(320280,51,2133.34,969.898,29.6641,0,0,0,0,100,0),
(320280,52,2136,979.72,29.6331,0,0,0,0,100,0),
(320280,53,2139.48,992.597,29.3599,0,0,0,0,100,0),
(320280,54,2146.4,1000.22,29.0547,0,0,0,0,100,0),
(320280,55,2153.49,1008.01,29.1749,0,0,0,0,100,0),
(320280,56,2161.85,1017.21,29.0531,0,0,0,0,100,0),
(320280,57,2168.17,1023.72,29.319,0,0,0,0,100,0),
(320280,58,2174.97,1030.73,29.4235,0,0,0,0,100,0),
(320280,59,2182.22,1038.2,29.6929,0,0,0,0,100,0),
(320280,60,2188.36,1044.53,29.5648,0,0,0,0,100,0),
(320280,61,2194.93,1051.83,29.4255,0,0,0,0,100,0),
(320280,62,2200.3,1057.82,29.0808,0,0,0,0,100,0),
(320280,63,2205.77,1063.9,28.6292,2.10794,300000,0,0,100,0),
(320280,64,2198.81,1056.59,29.2015,0,0,0,0,100,0),
(320280,65,2191.32,1048.71,29.5695,0,0,0,0,100,0),
(320280,66,2185.85,1043.09,29.5819,0,0,0,0,100,0),
(320280,67,2180.29,1037.36,29.6141,0,0,0,0,100,0),
(320280,68,2175.7,1032.64,29.4463,0,0,0,0,100,0),
(320280,69,2169.38,1026.14,29.3079,0,0,0,0,100,0),
(320280,70,2164.53,1021.2,29.2571,0,0,0,0,100,0),
(320280,71,2157.19,1013.7,29.1011,0,0,0,0,100,0),
(320280,72,2148.63,1004.96,29.2677,0,0,0,0,100,0),
(320280,73,2142.13,998.329,29.2934,0,0,0,0,100,0),
(320280,74,2139.18,988.323,29.4272,0,0,0,0,100,0),
(320280,75,2136.12,977.994,29.648,0,0,0,0,100,0),
(320280,76,2133.69,969.752,29.6782,0,0,0,0,100,0),
(320280,77,2131.61,962.452,29.4336,0,0,0,0,100,0),
(320280,78,2129.43,954.787,29.1032,0,0,0,0,100,0),
(320280,79,2127.17,946.855,28.9102,0,0,0,0,100,0),
(320280,80,2123.84,937.419,28.875,0,0,0,0,100,0),
(320280,81,2120.39,927.626,29.2901,0,0,0,0,100,0),
(320280,82,2116.1,915.473,29.8447,0,0,0,0,100,0),
(320280,83,2113.2,907.261,30.3066,0,0,0,0,100,0),
(320280,84,2111.37,900.36,30.4903,0,0,0,0,100,0),
(320280,85,2108.98,891.325,30.0694,0,0,0,0,100,0),
(320280,86,2106.18,880.734,29.9202,0,0,0,0,100,0),
(320280,87,2102.86,868.199,29.7338,0,0,0,0,100,0),
(320280,88,2100.02,857.738,29.4906,0,0,0,0,100,0),
(320280,89,2096.7,845.531,29.5257,0,0,0,0,100,0),
(320280,90,2094.6,837.803,29.6424,0,0,0,0,100,0),
(320280,91,2094.01,828.74,29.6807,0,0,0,0,100,0),
(320280,92,2093.43,819.952,29.7954,0,0,0,0,100,0),
(320280,93,2092.47,805.244,30.2524,0,0,0,0,100,0),
(320280,94,2091.67,792.959,30.3447,0,0,0,0,100,0),
(320280,95,2092.59,781.145,30.6791,0,0,0,0,100,0),
(320280,96,2093.29,772.055,30.7608,0,0,0,0,100,0),
(320280,97,2097.35,760.77,31.0594,0,0,0,0,100,0),
(320280,98,2100.62,751.691,31.0811,0,0,0,0,100,0),
(320280,99,2106.29,746.206,30.8352,0,0,0,0,100,0),
(320280,100,2116.32,736.501,31.0896,0,0,0,0,100,0),
(320280,101,2121.12,731.86,31.3583,0,0,0,0,100,0),
(320280,102,2130.16,724,31.7284,0,0,0,0,100,0),
(320280,103,2137.67,717.478,32.3061,0,0,0,0,100,0),
(320280,104,2146.02,710.219,32.9773,0,0,0,0,100,0),
(320280,105,2152.82,704.305,33.0397,0,0,0,0,100,0),
(320280,106,2161.9,697.46,33.2156,0,0,0,0,100,0),
(320280,107,2169.46,691.768,33.3967,0,0,0,0,100,0),
(320280,108,2174.15,686.564,33.4106,0,0,0,0,100,0),
(320280,109,2179.53,680.581,33.3483,0,0,0,0,100,0),
(320280,110,2187.83,671.363,33.3359,0,0,0,0,100,0),
(320280,111,2193.85,664.682,33.3105,0,0,0,0,100,0),
(320280,112,2197.13,660.139,33.472,0,0,0,0,100,0),
(320280,113,2207.7,645.518,33.472,0,0,0,0,100,0),
(320280,114,2221.51,626.407,33.472,0,0,0,0,100,0),
(320280,115,2233.69,609.555,33.4719,0,0,0,0,100,0),
(320280,116,2240.85,597.806,33.3333,0,0,0,0,100,0),
(320280,117,2246.49,588.543,33.3625,0,0,0,0,100,0),
(320280,118,2248.31,579.639,33.5122,0,0,0,0,100,0),
(320280,119,2250.1,570.847,33.3103,0,0,0,0,100,0),
(320280,120,2251.36,564.692,33.4433,0,0,0,0,100,0),
(320280,121,2254.75,557.286,33.5394,0,0,0,0,100,0),
(320280,122,2259.77,546.326,33.5765,0,0,0,0,100,0),
(320280,123,2263,539.285,33.4335,0,0,0,0,100,0),
(320280,124,2260.74,531.112,33.5387,0,0,0,0,100,0),
(320280,125,2258.51,523.029,33.6456,0,0,0,0,100,0),
(320280,126,2256.02,513.996,34.0253,0,0,0,0,100,0),
(320280,127,2254.24,507.563,34.1248,0,0,0,0,100,0),
(320280,128,2255.88,500.315,34.0454,0,0,0,0,100,0),
(320280,129,2257.69,492.274,33.7137,0,0,0,0,100,0),
(320280,130,2259.4,484.695,33.7872,0,0,0,0,100,0),
(320280,131,2262.41,474.421,33.8509,0,0,0,0,100,0),
(320280,132,2265.71,463.174,33.9683,0,0,0,0,100,0),
(320280,133,2268.93,452.19,34.0371,0,0,0,0,100,0),
(320280,134,2270.92,444.574,34.0278,0,0,0,0,100,0),
(320280,135,2273.59,434.412,34.0059,0,0,0,0,100,0),
(320280,136,2275.81,425.939,33.9451,0,0,0,0,100,0),
(320280,137,2279.32,412.506,33.868,0,0,0,0,100,0),
(320280,138,2283.59,396.22,34.0937,0,0,0,0,100,0),
(320280,139,2295.53,396.854,34.0124,0,0,0,0,100,0),
-- Hamlin Atkins
(382920,1,2283.86,386.706,34.1142,0,0,0,0,100,0),
(382920,2,2286.12,394.197,34.0471,0,0,0,0,100,0),
(382920,3,2287.9,395.711,34.0292,0,0,0,0,100,0),
(382920,4,2290.5,396.192,34.0261,0,0,0,0,100,0),
(382920,5,2300.64,396.523,33.9922,0,0,0,0,100,0),
(382920,6,2312.77,396.92,33.8861,0,0,0,0,100,0),
(382920,7,2329.22,397.458,33.6666,0,0,0,0,100,0),
(382920,8,2335.99,397.679,33.6667,0,0,0,0,100,0),
(382920,9,2341.25,390.871,33.6668,0,0,0,0,100,0),
(382920,10,2344.55,386.594,34.1956,0,0,0,0,100,0),
(382920,11,2352.51,376.295,35.462,0,0,0,0,100,0),
(382920,12,2358.24,368.876,37.0261,0,0,0,0,100,0),
(382920,13,2358.55,363.348,37.5669,0,0,0,0,100,0),
(382920,14,2358.8,358.865,37.7712,0,0,0,0,100,0),
(382920,15,2360.7,351.688,37.7914,0,0,0,0,100,0),
(382920,16,2363.49,345.913,37.8996,0,0,0,0,100,0),
(382920,17,2364.1,347.916,37.9404,0,0,0,0,100,0),
(382920,18,2362.86,353.099,38.0711,0,0,0,0,100,0),
(382920,19,2359.82,360.739,37.8635,0,0,0,0,100,0),
(382920,20,2356.91,368.07,37.0144,0,0,0,0,100,0),
(382920,21,2353.84,375.787,35.6826,0,0,0,0,100,0),
(382920,22,2344.47,387.277,34.1189,0,0,0,0,100,0),
(382920,23,2337.76,395.508,33.6669,0,0,0,0,100,0),
(382920,24,2333.73,397.028,33.6669,0,0,0,0,100,0),
(382920,25,2325.72,397.136,33.6669,0,0,0,0,100,0),
(382920,26,2311.86,397.321,33.8882,0,0,0,0,100,0),
(382920,27,2297.13,397.519,33.9952,0,0,0,0,100,0),
(382920,28,2287.36,397.65,34.0017,0,0,0,0,100,0),
(382920,29,2283.69,399.55,33.963,0,0,0,0,100,0),
(382920,30,2280.71,410.623,33.8685,0,0,0,0,100,0),
(382920,31,2277.68,421.905,33.8902,0,0,0,0,100,0),
(382920,32,2274.6,433.342,34.0033,0,0,0,0,100,0),
(382920,33,2272.53,441.055,34.0427,0,0,0,0,100,0),
(382920,34,2270.01,450.418,34.0587,0,0,0,0,100,0),
(382920,35,2267.52,459.672,33.9937,0,0,0,0,100,0),
(382920,36,2264.82,469.728,33.864,0,0,0,0,100,0),
(382920,37,2266.81,461.432,33.9711,0,0,0,0,100,0),
(382920,38,2269,452.287,34.0348,0,0,0,0,100,0),
(382920,39,2271.41,442.249,34.0442,0,0,0,0,100,0),
(382920,40,2273.83,432.134,33.9745,0,0,0,0,100,0),
(382920,41,2275.38,424.628,33.9434,0,0,0,0,100,0),
(382920,42,2277.91,412.405,33.8738,0,0,0,0,100,0),
(382920,43,2279.83,403.11,33.9132,0,0,0,0,100,0),
(382920,44,2282.54,389.999,34.1126,0,0,0,0,100,0),
(382920,45,2284.54,380.336,34.1138,0,0,0,0,100,0),
(382920,46,2284.07,371.031,34.1138,0,0,0,0,100,0),
(382920,47,2283.69,363.536,34.1138,0,0,0,0,100,0),
(382920,48,2283.26,354.943,34.1138,0,0,0,0,100,0),
(382920,49,2283.4,362.222,34.1138,0,0,0,0,100,0),
(382920,50,2283.55,370.06,34.1138,0,0,0,0,100,0),
(382920,51,2283.73,379.565,34.1138,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
