-- DB update 2020_12_04_00 -> 2020_12_04_01
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2020_12_04_00';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2020_12_04_00 2020_12_04_01 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1607080347633826799'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1607080347633826799');

UPDATE `creature` SET `MovementType` = 2 WHERE `guid` = 43126;
UPDATE `creature_addon` SET `path_id` = 431260 WHERE `guid` = 43126;

DELETE FROM `smart_scripts` WHERE `entryorguid` = 14479 AND `source_type` = 0 AND `id` = 2;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(14479,0,2,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Twilight Lord Everun - On Respawn - Set Active On');

DELETE FROM `waypoint_data` WHERE `id` = 431260;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(431260,1,-7948.32,1881.01,3.49942,0,0,0,0,100,0),
(431260,2,-7949.25,1887.35,2.53478,0,0,0,0,100,0),
(431260,3,-7950.38,1895.08,1.18536,0,0,0,0,100,0),
(431260,4,-7951.5,1902.78,2.05325,0,0,0,0,100,0),
(431260,5,-7947.12,1905.87,3.34519,0,0,0,0,100,0),
(431260,6,-7942.16,1909.37,4.16835,0,0,0,0,100,0),
(431260,7,-7937.68,1912.53,4.5617,0,0,0,0,100,0),
(431260,8,-7933.41,1915.55,4.64672,0,0,0,0,100,0),
(431260,9,-7928.99,1915.22,4.74026,0,0,0,0,100,0),
(431260,10,-7922.36,1914.72,4.3246,0,0,0,0,100,0),
(431260,11,-7916.42,1914.28,4.67714,0,0,0,0,100,0),
(431260,12,-7911.77,1913.93,4.35605,0,0,0,0,100,0),
(431260,13,-7906.65,1913.54,3.53979,0,0,0,0,100,0),
(431260,14,-7899.94,1913.04,3.63808,0,0,0,0,100,0),
(431260,15,-7893.62,1910.05,3.95352,0,0,0,0,100,0),
(431260,16,-7886.77,1906.8,4.38302,0,0,0,0,100,0),
(431260,17,-7880.02,1903.61,4.84035,0,0,0,0,100,0),
(431260,18,-7877.95,1897.05,5.07635,0,0,0,0,100,0),
(431260,19,-7876.15,1891.38,5.17677,0,0,0,0,100,0),
(431260,20,-7874.55,1886.31,5.24531,0,0,0,0,100,0),
(431260,21,-7879.49,1882.79,5.5552,0,0,0,0,100,0),
(431260,22,-7885.65,1878.41,5.53982,0,0,0,0,100,0),
(431260,23,-7890.78,1874.75,5.35858,0,0,0,0,100,0),
(431260,24,-7896.26,1870.85,5.10468,0,0,0,0,100,0),
(431260,25,-7900.8,1865.68,3.67809,0,0,0,0,100,0),
(431260,26,-7904.81,1861.13,3.50166,0,0,0,0,100,0),
(431260,27,-7908.42,1857.02,4.26787,0,0,0,0,100,0),
(431260,28,-7912.29,1852.62,4.84624,0,0,0,0,100,0),
(431260,29,-7912.73,1846.81,4.66693,0,0,0,0,100,0),
(431260,30,-7913.18,1840.87,4.43981,0,0,0,0,100,0),
(431260,31,-7913.68,1834.23,3.93352,0,0,0,0,100,0),
(431260,32,-7918.32,1828.38,3.84424,0,0,0,0,100,0),
(431260,33,-7923.22,1822.2,3.55475,0,0,0,0,100,0),
(431260,34,-7931.44,1821.14,3.74328,0,0,0,0,100,0),
(431260,35,-7939.81,1820.07,3.94681,0,0,0,0,100,0),
(431260,36,-7943.06,1824.49,4.25899,0,0,0,0,100,0),
(431260,37,-7946.59,1829.28,4.18087,0,0,0,0,100,0),
(431260,38,-7950.68,1834.83,3.7851,0,0,0,0,100,0),
(431260,39,-7948.51,1840.74,3.89789,0,0,0,0,100,0),
(431260,40,-7945.94,1847.76,3.74318,0,0,0,0,100,0),
(431260,41,-7943.85,1853.45,3.9609,0,0,0,0,100,0),
(431260,42,-7941.65,1859.44,4.83307,0,0,0,0,100,0),
(431260,43,-7943.37,1865.01,4.52653,0,0,0,0,100,0),
(431260,44,-7945.19,1870.9,4.33325,0,0,0,0,100,0),
(431260,45,-7946.71,1875.8,4.00417,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
