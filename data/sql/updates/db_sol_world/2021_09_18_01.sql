-- DB update 2021_09_18_00 -> 2021_09_18_01
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_09_18_00';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_09_18_00 2021_09_18_01 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1631968257458287900'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1631968257458287900');

UPDATE `creature` SET `wander_distance` = 0, `MovementType` = 0 WHERE `guid` IN (79889,79888,80375,80394,80393,80392,80399,80391,80404,80403,81106);
UPDATE `creature` SET `wander_distance` = 5, `MovementType` = 1 WHERE `guid` IN (80390,80383,80412,80388,80389);
UPDATE `creature` SET `position_x` = -9487.86, `position_y` = 456.949, `position_z` = 51.6495 WHERE `guid` = 80400;
UPDATE `creature` SET `position_x` = -9468.69, `position_y` = 304.285, `position_z` = 53.2516 WHERE `guid` = 80377;
UPDATE `creature` SET `position_x` = -9462.93, `position_y` = 487.615, `position_z` = 54.0685 WHERE `guid` = 80396;
UPDATE `creature` SET `position_x` = -9719.97, `position_y` = -76.0952, `position_z` = 36.048 WHERE `guid` = 80708;
UPDATE `creature` SET `position_x` = -9676.86, `position_y` = -75.4158, `position_z` = 40.707 WHERE `guid` = 80706;
UPDATE `creature` SET `position_x` = -9166.97, `position_y` = 92.6573, `position_z` = 76.5657 WHERE `guid` = 79890;
UPDATE `creature` SET `position_x` = -9283.56, `position_y` = 274.41, `position_z` = 70.8058 WHERE `guid` = 80298;
UPDATE `creature` SET `position_x` = -9293.05, `position_y` = 523.865, `position_z` = 83.2075 WHERE `guid` = 80384;
UPDATE `creature` SET `position_x` = -9128.75, `position_y` = 64.8664, `position_z` = 78.3044 WHERE `guid` = 80269;
UPDATE `creature` SET `position_x` = -9135.58, `position_y` = -91.7557, `position_z` = 76.0991 WHERE `guid` = 80263;

UPDATE `creature_template` SET `AIName` = 'SmartAI' WHERE `entry` = 1423;
DELETE FROM `smart_scripts` WHERE `source_type` = 0 AND `entryorguid` = -80263;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(-80263,0,0,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Stormwind Guard - On Reset - Set Active On');

DELETE FROM `waypoint_data` WHERE `id` = 802630;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(802630,1,-9135.58,-91.7557,76.0991,0,0,0,0,100,0),
(802630,2,-9145.75,-97.4927,74.5877,0,0,0,0,100,0),
(802630,3,-9160.11,-105.6,72.8129,0,0,0,0,100,0),
(802630,4,-9171.66,-112.118,71.7131,0,0,0,0,100,0),
(802630,5,-9182.51,-111.49,70.9555,0,0,0,0,100,0),
(802630,6,-9195.23,-110.753,71.1521,0,0,0,0,100,0),
(802630,7,-9206.31,-110.111,70.9657,0,0,0,0,100,0),
(802630,8,-9215.65,-106.365,71.2663,0,0,0,0,100,0),
(802630,9,-9225.48,-102.422,71.284,0,0,0,0,100,0),
(802630,10,-9236.32,-98.0768,70.8762,0,0,0,0,100,0),
(802630,11,-9249.47,-92.8009,70.335,0,0,0,0,100,0),
(802630,12,-9257.28,-86.0286,69.6216,0,0,0,0,100,0),
(802630,13,-9268.02,-76.7088,68.772,0,0,0,0,100,0),
(802630,14,-9277.58,-68.4209,68.4855,0,0,0,0,100,0),
(802630,15,-9287.61,-64.9742,67.8995,0,0,0,0,100,0),
(802630,16,-9299.91,-60.745,67.1968,0,0,0,0,100,0),
(802630,17,-9312.47,-56.4278,66.8192,0,0,0,0,100,0),
(802630,18,-9324.52,-52.285,66.272,0,0,0,0,100,0),
(802630,19,-9334.41,-48.8854,65.9715,0,0,0,0,100,0),
(802630,20,-9345.6,-45.0372,65.2258,0,0,0,0,100,0),
(802630,21,-9353.08,-36.4239,64.5099,0,0,0,0,100,0),
(802630,22,-9361.08,-27.2027,63.761,0,0,0,0,100,0),
(802630,23,-9369.26,-17.7809,62.9084,0,0,0,0,100,0),
(802630,24,-9377.53,-8.2619,61.7403,0,0,0,0,100,0),
(802630,25,-9385.97,1.45772,60.8847,0,0,0,0,100,0),
(802630,26,-9394.68,11.4873,60.0343,0,0,0,0,100,0),
(802630,27,-9403.74,21.9242,58.9592,0,0,0,0,100,0),
(802630,28,-9411.83,31.2427,57.9931,0,0,0,0,100,0),
(802630,29,-9420.71,41.4729,57.1266,0,0,0,0,100,0),
(802630,30,-9428.27,50.1835,56.7166,0,0,0,0,100,0),
(802630,31,-9435.9,58.9672,56.3938,0,6000,0,0,100,0),
(802630,32,-9430.01,51.1496,56.6427,0,0,0,0,100,0),
(802630,33,-9423.95,43.1134,57.0059,0,0,0,0,100,0),
(802630,34,-9414.43,30.474,57.7732,0,0,0,0,100,0),
(802630,35,-9407.87,21.7705,58.7794,0,0,0,0,100,0),
(802630,36,-9401.11,13.9511,59.5449,0,0,0,0,100,0),
(802630,37,-9391.99,3.39739,60.3211,0,0,0,0,100,0),
(802630,38,-9382.69,-7.3573,61.3527,0,0,0,0,100,0),
(802630,39,-9373.39,-18.1116,62.5854,0,0,0,0,100,0),
(802630,40,-9363.49,-29.5683,63.5964,0,0,0,0,100,0),
(802630,41,-9354.72,-39.7115,64.6276,0,0,0,0,100,0),
(802630,42,-9347.15,-44.3129,65.1189,0,0,0,0,100,0),
(802630,43,-9339.05,-49.242,65.5384,0,0,0,0,100,0),
(802630,44,-9329.31,-52.2347,66.0713,0,0,0,0,100,0),
(802630,45,-9318.41,-55.5859,66.5446,0,0,0,0,100,0),
(802630,46,-9302.78,-60.3907,66.9965,0,0,0,0,100,0),
(802630,47,-9289.21,-64.5602,67.6973,0,0,0,0,100,0),
(802630,48,-9279.85,-71.7659,68.2314,0,0,0,0,100,0),
(802630,49,-9270.18,-79.2123,68.6174,0,0,0,0,100,0),
(802630,50,-9257.43,-89.036,69.728,0,0,0,0,100,0),
(802630,51,-9252.28,-93.0011,70.2091,0,0,0,0,100,0),
(802630,52,-9247.8,-96.4523,70.3894,0,0,0,0,100,0),
(802630,53,-9237.73,-100.88,70.6987,0,0,0,0,100,0),
(802630,54,-9228.43,-104.973,71.0776,0,0,0,0,100,0),
(802630,55,-9219.52,-107.049,71.1556,0,0,0,0,100,0),
(802630,56,-9209.07,-109.486,71.1242,0,0,0,0,100,0),
(802630,57,-9197.05,-112.288,71.0667,0,0,0,0,100,0),
(802630,58,-9187.31,-114.56,70.8988,0,0,0,0,100,0),
(802630,59,-9179.25,-113.15,71.0128,0,0,0,0,100,0),
(802630,60,-9173.54,-112.153,71.5089,0,0,0,0,100,0),
(802630,61,-9164.85,-107.959,72.2832,0,0,0,0,100,0),
(802630,62,-9156.63,-103.991,73.1701,0,0,0,0,100,0),
(802630,63,-9149.11,-100.363,74.1114,0,0,0,0,100,0),
(802630,64,-9141.29,-95.6,75.1661,0,0,0,0,100,0),
(802630,65,-9131.89,-89.8778,76.8061,0,0,0,0,100,0),
(802630,66,-9122.58,-84.2122,78.7951,0,0,0,0,100,0),
(802630,67,-9115.84,-78.4914,80.6662,0,0,0,0,100,0),
(802630,68,-9107.26,-71.2074,82.5341,0,0,0,0,100,0),
(802630,69,-9097.75,-63.1296,84.2814,0,0,0,0,100,0),
(802630,70,-9087.84,-54.7155,85.859,0,0,0,0,100,0),
(802630,71,-9081.47,-50.0211,86.8668,0,0,0,0,100,0),
(802630,72,-9076.08,-46.0496,87.617,0,6000,0,0,100,0),
(802630,73,-9082.57,-51.032,86.7005,0,0,0,0,100,0),
(802630,74,-9090.66,-57.2501,85.3912,0,0,0,0,100,0),
(802630,75,-9100.77,-65.013,83.8644,0,0,0,0,100,0),
(802630,76,-9109.39,-71.6382,82.1622,0,0,0,0,100,0),
(802630,77,-9118.86,-78.9107,79.9809,0,0,0,0,100,0),
(802630,78,-9127.16,-85.2858,77.8309,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
