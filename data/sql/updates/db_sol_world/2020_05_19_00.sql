-- DB update 2020_05_18_00 -> 2020_05_19_00
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2020_05_18_00';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2020_05_18_00 2020_05_19_00 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1589840574834733819'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1589840574834733819');

-- Deathskitter: Waypoint movement & set active
DELETE FROM `smart_scripts` WHERE `entryorguid` = 18647 AND `source_type` = 0 AND `id` = 1;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(18647,0,1,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Deathskitter - On Respawn - Set Active On');

UPDATE `creature` SET `MovementType` = 2 WHERE `guid` = 66907;
DELETE FROM `creature_addon` WHERE `guid` = 66907;
INSERT INTO `creature_addon` (`guid`, `path_id`, `mount`, `bytes1`, `bytes2`, `emote`, `isLarge`, `auras`)
VALUES
(66907,669070,0,0,0,0,0,'');

DELETE FROM `waypoint_data` WHERE `id` = 669070;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(669070,1,-3326.11,4201.69,-9.91437,0,0,0,0,100,0),
(669070,2,-3332.48,4215.58,-12.4631,0,0,0,0,100,0),
(669070,3,-3341.23,4233.12,-14.6707,0,0,0,0,100,0),
(669070,4,-3347.51,4243.61,-15.7197,0,0,0,0,100,0),
(669070,5,-3355.45,4249.91,-16.3352,0,0,0,0,100,0),
(669070,6,-3363.9,4255.26,-16.5959,0,0,0,0,100,0),
(669070,7,-3372.83,4255.99,-15.9705,0,0,0,0,100,0),
(669070,8,-3380.6,4250.24,-14.7189,0,0,0,0,100,0),
(669070,9,-3385.46,4242.53,-13.5877,0,0,0,0,100,0),
(669070,10,-3384.91,4231.6,-12.2311,0,0,0,0,100,0),
(669070,11,-3381.97,4216.72,-10.377,0,0,0,0,100,0),
(669070,12,-3379.29,4202.62,-8.46727,0,0,0,0,100,0),
(669070,13,-3377.05,4188.8,-6.38279,0,0,0,0,100,0),
(669070,14,-3375.02,4175.54,-4.10073,0,0,0,0,100,0),
(669070,15,-3371.65,4165.16,-2.16053,0,0,0,0,100,0),
(669070,16,-3365.22,4155.62,-1.34182,0,0,0,0,100,0),
(669070,17,-3357.18,4148.38,-1.98211,0,0,0,0,100,0),
(669070,18,-3347.56,4144.33,-2.61792,0,0,0,0,100,0),
(669070,19,-3335.93,4142.44,-3.03186,0,0,0,0,100,0),
(669070,20,-3322.09,4140.34,-3.19772,0,0,0,0,100,0),
(669070,21,-3312.8,4137.05,-3.10879,0,0,0,0,100,0),
(669070,22,-3304.17,4130.7,-2.75387,0,0,0,0,100,0),
(669070,23,-3295.99,4127.44,-2.09109,0,0,0,0,100,0),
(669070,24,-3286.59,4127.9,-2.10543,0,0,0,0,100,0),
(669070,25,-3275.71,4129.28,-2.19555,0,0,0,0,100,0),
(669070,26,-3265.69,4129.56,-2.19632,0,0,0,0,100,0),
(669070,27,-3258.86,4126.54,-1.98122,0,0,0,0,100,0),
(669070,28,-3254.83,4120.73,-0.48976,0,0,0,0,100,0),
(669070,29,-3252.62,4115.29,2.19576,0,0,0,0,100,0),
(669070,30,-3251.82,4107.64,3.66547,0,0,0,0,100,0),
(669070,31,-3251.02,4098.35,3.76305,0,0,0,0,100,0),
(669070,32,-3248.39,4089.17,3.20345,0,0,0,0,100,0),
(669070,33,-3244.48,4079.8,1.89697,0,0,0,0,100,0),
(669070,34,-3239.3,4070.4,1.3137,0,0,0,0,100,0),
(669070,35,-3237.29,4059.08,1.8797,0,0,0,0,100,0),
(669070,36,-3236.66,4047.08,2.32336,0,0,0,0,100,0),
(669070,37,-3235.45,4036.19,2.3314,0,0,0,0,100,0),
(669070,38,-3231.99,4027.43,1.84813,0,0,0,0,100,0),
(669070,39,-3225.47,4021.59,0.606145,0,0,0,0,100,0),
(669070,40,-3217.05,4019.49,0.179262,0,0,0,0,100,0),
(669070,41,-3207.28,4019.71,0.166045,0,0,0,0,100,0),
(669070,42,-3195.46,4021.09,0.769485,0,0,0,0,100,0),
(669070,43,-3184.06,4021.73,0.232743,0,0,0,0,100,0),
(669070,44,-3172.05,4021.86,0.450239,0,0,0,0,100,0),
(669070,45,-3162.14,4022.08,-0.612014,0,0,0,0,100,0),
(669070,46,-3152.35,4022.54,-1.73905,0,0,0,0,100,0),
(669070,47,-3140.41,4025.18,-0.490311,0,0,0,0,100,0),
(669070,48,-3131.33,4027.77,0.505952,0,0,0,0,100,0),
(669070,49,-3123.55,4035.04,0.848381,0,0,0,0,100,0),
(669070,50,-3116.2,4045.12,2.44495,0,0,0,0,100,0),
(669070,51,-3110.34,4054.54,3.93254,0,0,0,0,100,0),
(669070,52,-3103.24,4063.63,4.56604,0,0,0,0,100,0),
(669070,53,-3095.01,4073.32,3.04851,0,0,0,0,100,0),
(669070,54,-3087.27,4081.73,1.05741,0,0,0,0,100,0),
(669070,55,-3078.33,4090.6,0.813809,0,0,0,0,100,0),
(669070,56,-3069.62,4099.06,-0.105279,0,0,0,0,100,0),
(669070,57,-3062.66,4107,-0.59397,0,0,0,0,100,0),
(669070,58,-3062.31,4114.62,-0.168736,0,0,0,0,100,0),
(669070,59,-3066.84,4120.9,1.13647,0,0,0,0,100,0),
(669070,60,-3074.05,4124.5,2.46688,0,0,0,0,100,0),
(669070,61,-3082.13,4125.09,3.37864,0,0,0,0,100,0),
(669070,62,-3090.4,4124.74,4.26874,0,0,0,0,100,0),
(669070,63,-3100.07,4124.77,4.73757,0,0,0,0,100,0),
(669070,64,-3108.81,4127.6,4.74063,0,0,0,0,100,0),
(669070,65,-3118.06,4127.57,4.68185,0,0,0,0,100,0),
(669070,66,-3128.07,4125.39,4.73954,0,0,0,0,100,0),
(669070,67,-3138.58,4121.91,4.68263,0,0,0,0,100,0),
(669070,68,-3147.13,4117.9,4.5363,0,0,0,0,100,0),
(669070,69,-3156.63,4113.16,2.8652,0,0,0,0,100,0),
(669070,70,-3165.46,4110.62,1.97686,0,0,0,0,100,0),
(669070,71,-3175.56,4110.08,1.08015,0,0,0,0,100,0),
(669070,72,-3184.4,4111.39,0.828365,0,0,0,0,100,0),
(669070,73,-3190.79,4115.81,1.68982,0,0,0,0,100,0),
(669070,74,-3196.48,4122.73,2.70883,0,0,0,0,100,0),
(669070,75,-3199.68,4127.18,2.69523,0,0,0,0,100,0),
(669070,76,-3203.45,4133.2,0.948541,0,0,0,0,100,0),
(669070,77,-3208.5,4136.87,-0.805388,0,0,0,0,100,0),
(669070,78,-3217.75,4140.42,-1.54055,0,0,0,0,100,0),
(669070,79,-3228.29,4143.85,-2.12925,0,0,0,0,100,0),
(669070,80,-3236.35,4148.23,-2.31404,0,0,0,0,100,0),
(669070,81,-3244.69,4155.8,-3.23666,0,0,0,0,100,0),
(669070,82,-3246.95,4164.05,-4.59225,0,0,0,0,100,0),
(669070,83,-3246.78,4172.32,-5.82762,0,0,0,0,100,0),
(669070,84,-3248.35,4180.74,-7.31638,0,0,0,0,100,0),
(669070,85,-3255.1,4185.3,-8.55584,0,0,0,0,100,0),
(669070,86,-3265.44,4186.02,-9.30291,0,0,0,0,100,0),
(669070,87,-3275.1,4185.6,-9.55351,0,0,0,0,100,0),
(669070,88,-3284.36,4183.22,-9.12202,0,0,0,0,100,0),
(669070,89,-3294.23,4179.63,-8.23795,0,0,0,0,100,0),
(669070,90,-3301.67,4177.85,-7.65598,0,0,0,0,100,0),
(669070,91,-3310.3,4180.04,-7.42648,0,0,0,0,100,0),
(669070,92,-3317.06,4185.33,-7.52852,0,0,0,0,100,0),
(669070,93,-3322.44,4192.93,-8.35455,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
