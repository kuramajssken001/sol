-- DB update 2020_12_08_06 -> 2020_12_08_07
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2020_12_08_06';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2020_12_08_06 2020_12_08_07 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1607465538409580489'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1607465538409580489');

UPDATE `creature_template` SET `AIName` = 'SmartAI' WHERE `entry` = 5807;
DELETE FROM `smart_scripts` WHERE `entryorguid` = 5807 AND `source_type` = 0;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(5807,0,0,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'The Rake - On Respawn - Set Active On');

DELETE FROM `waypoint_data` WHERE `id` = 266110;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(266110,1,-866.497,-684.143,-32.2774,0,0,0,0,100,0),
(266110,2,-873.35,-677.779,-35.3634,0,0,0,0,100,0),
(266110,3,-880.178,-671.389,-39.0585,0,0,0,0,100,0),
(266110,4,-886.34,-663.92,-41.2036,0,0,0,0,100,0),
(266110,5,-891.252,-655.172,-42.6744,0,0,0,0,100,0),
(266110,6,-893.106,-643.424,-44.6875,0,0,0,0,100,0),
(266110,7,-895.125,-630.631,-46.9834,0,0,0,0,100,0),
(266110,8,-893.59,-619.566,-49.0168,0,0,0,0,100,0),
(266110,9,-891.044,-608.693,-50.2,0,0,0,0,100,0),
(266110,10,-886.206,-598.19,-50.2674,0,0,0,0,100,0),
(266110,11,-881.71,-586.351,-48.4376,0,0,0,0,100,0),
(266110,12,-881.684,-576.635,-45.3141,0,0,0,0,100,0),
(266110,13,-883.179,-565.563,-41.791,0,0,0,0,100,0),
(266110,14,-884.753,-555.21,-39.1536,0,0,0,0,100,0),
(266110,15,-886.009,-543.007,-36.9424,0,0,0,0,100,0),
(266110,16,-884.586,-527.397,-34.232,0,0,0,0,100,0),
(266110,17,-880.834,-514.526,-32.4719,0,0,0,0,100,0),
(266110,18,-870.336,-504.025,-31.2662,0,0,0,0,100,0),
(266110,19,-858.93,-495.907,-30.8949,0,0,0,0,100,0),
(266110,20,-847.521,-487.793,-30.5387,0,0,0,0,100,0),
(266110,21,-830.9,-477.945,-30.6118,0,0,0,0,100,0),
(266110,22,-818.063,-475.465,-31.1561,0,0,0,0,100,0),
(266110,23,-794.915,-474.764,-32.1799,0,0,0,0,100,0),
(266110,24,-784.712,-479.38,-31.5158,0,0,0,0,100,0),
(266110,25,-774.18,-487.064,-29.9519,0,0,0,0,100,0),
(266110,26,-761.537,-504.737,-28.5954,0,0,0,0,100,0),
(266110,27,-760.547,-520.214,-29.0707,0,0,0,0,100,0),
(266110,28,-767.7,-532.248,-29.342,0,0,0,0,100,0),
(266110,29,-778.762,-542.047,-29.2743,0,0,0,0,100,0),
(266110,30,-792.912,-544.941,-30.6512,0,0,0,0,100,0),
(266110,31,-806.52,-541.651,-31.9469,0,0,0,0,100,0),
(266110,32,-820.239,-538.872,-31.2923,0,0,0,0,100,0),
(266110,33,-832.655,-537.628,-30.1569,0,0,0,0,100,0),
(266110,34,-844.507,-536.44,-29.6139,0,0,0,0,100,0),
(266110,35,-852.248,-548.097,-31.1951,0,0,0,0,100,0),
(266110,36,-856.985,-556.274,-33.3288,0,0,0,0,100,0),
(266110,37,-862.241,-565.346,-36.823,0,0,0,0,100,0),
(266110,38,-867.816,-575.028,-41.9879,0,0,0,0,100,0),
(266110,39,-872.615,-583.476,-46.3342,0,0,0,0,100,0),
(266110,40,-877.655,-593.466,-49.276,0,0,0,0,100,0),
(266110,41,-874.304,-602.556,-48.4778,0,0,0,0,100,0),
(266110,42,-874.304,-602.556,-48.4778,0,0,0,0,100,0),
(266110,43,-866.519,-613.512,-46.2148,0,0,0,0,100,0),
(266110,44,-858.764,-624.005,-42.5702,0,0,0,0,100,0),
(266110,45,-852.531,-630.94,-39.2404,0,0,0,0,100,0),
(266110,46,-844.558,-639.811,-35.3011,0,0,0,0,100,0),
(266110,47,-838.365,-646.93,-32.5783,0,0,0,0,100,0),
(266110,48,-840.697,-654.711,-30.9982,0,0,0,0,100,0),
(266110,49,-850.249,-657.856,-31.4469,0,0,0,0,100,0),
(266110,50,-860.293,-657.646,-33.5876,0,0,0,0,100,0),
(266110,51,-871.035,-658.835,-36.833,0,0,0,0,100,0),
(266110,52,-881.78,-659.997,-40.2684,0,0,0,0,100,0),
(266110,53,-894,-661.332,-42.6096,0,0,0,0,100,0),
(266110,54,-905.167,-662.185,-44.8571,0,0,0,0,100,0),
(266110,55,-916.722,-663.103,-47.7314,0,0,0,0,100,0),
(266110,56,-927.822,-663.862,-49.6395,0,0,0,0,100,0),
(266110,57,-939.74,-663.563,-49.6138,0,0,0,0,100,0),
(266110,58,-950.911,-663.451,-50.9684,0,0,0,0,100,0),
(266110,59,-962.463,-663.967,-52.451,0,0,0,0,100,0),
(266110,60,-967.922,-668.901,-51.7737,0,0,0,0,100,0),
(266110,61,-968.389,-676.202,-49.4846,0,0,0,0,100,0),
(266110,62,-963.653,-689.36,-43.4626,0,0,0,0,100,0),
(266110,63,-958.785,-702.486,-37.0157,0,0,0,0,100,0),
(266110,64,-955.621,-710.475,-33.4022,0,0,0,0,100,0),
(266110,65,-945.277,-717.16,-29.6367,0,0,0,0,100,0),
(266110,66,-932.883,-723.671,-26.5797,0,0,0,0,100,0),
(266110,67,-920.441,-730.089,-24.5005,0,0,0,0,100,0),
(266110,68,-907.438,-732.674,-23.755,0,0,0,0,100,0),
(266110,69,-894.398,-731.244,-23.851,0,0,0,0,100,0),
(266110,70,-878.576,-726.21,-25.1543,0,0,0,0,100,0),
(266110,71,-870.411,-723.613,-25.0461,0,0,0,0,100,0),
(266110,72,-857.085,-719.374,-22.733,0,0,0,0,100,0),
(266110,73,-852.309,-717.854,-21.5885,0,0,0,0,100,0),
(266110,74,-847.365,-710.633,-21.9187,0,0,0,0,100,0),
(266110,75,-847.554,-699.792,-24.89,0,0,0,0,100,0),
(266110,76,-856.912,-692.061,-28.7911,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
