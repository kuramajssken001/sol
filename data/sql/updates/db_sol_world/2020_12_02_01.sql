-- DB update 2020_12_02_00 -> 2020_12_02_01
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2020_12_02_00';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2020_12_02_00 2020_12_02_01 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1606893808120089587'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1606893808120089587');

UPDATE `creature` SET `MovementType` = 2 WHERE `guid` = 85478;

DELETE FROM `creature_addon` WHERE `guid` = 85478;
INSERT INTO `creature_addon` (`guid`, `path_id`, `mount`, `bytes1`, `bytes2`, `emote`, `isLarge`, `auras`)
VALUES
(85478,854780,0,0,1,0,0,NULL);

UPDATE `creature_template` SET `AIName` = 'SmartAI' WHERE `entry` = 8218;
DELETE FROM `smart_scripts` WHERE `entryorguid` = 8218 AND `source_type` = 0;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(8218,0,0,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Witherheart the Stalker - On Respawn - Set Active On');

DELETE FROM `waypoint_data` WHERE `id` = 854780;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(854780,1,-336.806,-2842.3,76.7461,0,0,0,0,100,0),
(854780,2,-336.731,-2833.29,77.0363,0,0,0,0,100,0),
(854780,3,-335.603,-2824.14,78.2228,0,0,0,0,100,0),
(854780,4,-334.463,-2814.89,80.383,0,0,0,0,100,0),
(854780,5,-341.141,-2810.2,80.4044,0,0,0,0,100,0),
(854780,6,-348.051,-2805.34,80.0625,0,0,0,0,100,0),
(854780,7,-356.101,-2805.32,78.6841,0,0,0,0,100,0),
(854780,8,-364.007,-2805.31,76.9893,0,0,0,0,100,0),
(854780,9,-367.832,-2802.85,76.4889,0,0,0,0,100,0),
(854780,10,-372.446,-2799.88,76.777,0,0,0,0,100,0),
(854780,11,-376.958,-2796.97,77.4724,0,0,0,0,100,0),
(854780,12,-381.656,-2799.31,78.4065,0,0,0,0,100,0),
(854780,13,-387.506,-2802.23,78.5337,0,0,0,0,100,0),
(854780,14,-394.72,-2805.83,77.8546,0,0,0,0,100,0),
(854780,15,-393.312,-2810.95,77.4275,0,0,0,0,100,0),
(854780,16,-391.701,-2816.82,75.4232,0,0,0,0,100,0),
(854780,17,-390.019,-2822.94,74.1284,0,0,0,0,100,0),
(854780,18,-389.959,-2830.4,74.081,0,0,0,0,100,0),
(854780,19,-389.906,-2837.06,74.2824,0,0,0,0,100,0),
(854780,20,-396.28,-2840.48,75.5519,0,0,0,0,100,0),
(854780,21,-402.354,-2843.73,76.9459,0,0,0,0,100,0),
(854780,22,-409.346,-2844.07,78.5304,0,0,0,0,100,0),
(854780,23,-416.467,-2844.41,79.3868,0,0,0,0,100,0),
(854780,24,-421.565,-2852.64,79.3284,0,0,0,0,100,0),
(854780,25,-421.58,-2858.24,79.6618,0,0,0,0,100,0),
(854780,26,-421.602,-2866.4,81.503,0,0,0,0,100,0),
(854780,27,-421.623,-2874.12,83.6468,0,0,0,0,100,0),
(854780,28,-424.772,-2879.7,84.5371,0,0,0,0,100,0),
(854780,29,-428.279,-2885.91,84.8522,0,0,0,0,100,0),
(854780,30,-424.907,-2890.38,84.62,0,0,0,0,100,0),
(854780,31,-421.324,-2895.13,84.0337,0,0,0,0,100,0),
(854780,32,-417.871,-2899.71,83.2011,0,0,0,0,100,0),
(854780,33,-419.852,-2906.3,82.8999,0,0,0,0,100,0),
(854780,34,-421.714,-2912.49,82.035,0,0,0,0,100,0),
(854780,35,-415.579,-2913.92,80.5314,0,0,0,0,100,0),
(854780,36,-409.008,-2915.46,80.4308,0,0,0,0,100,0),
(854780,37,-403.71,-2914.06,79.7555,0,0,0,0,100,0),
(854780,38,-398.058,-2912.56,79.2019,0,0,0,0,100,0),
(854780,39,-393.718,-2919.07,78.698,0,0,0,0,100,0),
(854780,40,-388.929,-2926.26,77.9069,0,0,0,0,100,0),
(854780,41,-382.789,-2926.97,77.2265,0,0,0,0,100,0),
(854780,42,-376.519,-2927.69,75.9121,0,0,0,0,100,0),
(854780,43,-372.09,-2931.3,75.3061,0,0,0,0,100,0),
(854780,44,-363.167,-2930.28,75.3298,0,0,0,0,100,0),
(854780,45,-354.46,-2929.29,75.2535,0,0,0,0,100,0),
(854780,46,-347.269,-2930.11,75.5808,0,0,0,0,100,0),
(854780,47,-339.972,-2930.95,76.0707,0,0,0,0,100,0),
(854780,48,-331.862,-2938.2,76.5373,0,0,0,0,100,0),
(854780,49,-326.085,-2943.36,78.7858,0,0,0,0,100,0),
(854780,50,-319.232,-2944.05,80.4388,0,0,0,0,100,0),
(854780,51,-313.89,-2944.59,80.8206,0,0,0,0,100,0),
(854780,52,-309.676,-2939.75,81.1675,0,0,0,0,100,0),
(854780,53,-305.916,-2935.44,82.1426,0,0,0,0,100,0),
(854780,54,-306.439,-2929.73,82.3064,0,0,0,0,100,0),
(854780,55,-307.066,-2922.88,81.4052,0,0,0,0,100,0),
(854780,56,-307.534,-2917.76,80.3467,0,0,0,0,100,0),
(854780,57,-302.833,-2910.83,80.0459,0,0,0,0,100,0),
(854780,58,-298.165,-2903.94,81.5407,0,0,0,0,100,0),
(854780,59,-299.729,-2897.12,81.5004,0,0,0,0,100,0),
(854780,60,-301.296,-2890.28,81.1735,0,0,0,0,100,0),
(854780,61,-306.412,-2885.86,79.7988,0,0,0,0,100,0),
(854780,62,-310.921,-2881.96,79.6081,0,0,0,0,100,0),
(854780,63,-313.692,-2872.43,80.082,0,0,0,0,100,0),
(854780,64,-313.13,-2865.68,80.7095,0,0,0,0,100,0),
(854780,65,-312.576,-2859.04,80.4389,0,0,0,0,100,0),
(854780,66,-316.759,-2855.49,79.1986,0,0,0,0,100,0),
(854780,67,-320.584,-2852.24,78.3489,0,0,0,0,100,0),
(854780,68,-329.315,-2851.67,78.06,0,0,0,0,100,0),
(854780,69,-336.88,-2851.17,77.2118,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
