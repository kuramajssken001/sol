-- DB update 2022_04_06_01 -> 2022_04_07_00
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2022_04_06_01';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2022_04_06_01 2022_04_07_00 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1649311975065576616'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1649311975065576616');

UPDATE `creature` SET `position_x` = -10611.8, `position_y` = 1180.39, `position_z` = 34.4925, `orientation` = 5.11381 WHERE `guid` = 44296;
UPDATE `creature` SET `position_x` = -10597.2, `position_y` = 1160.67, `position_z` = 38.4581, `orientation` = 6.233 WHERE `guid` = 45524;
UPDATE `creature` SET `position_x` = -10586, `position_y` = 1143.73, `position_z` = 40.2295, `orientation` = 3.52987 WHERE `guid` = 89861;
UPDATE `creature` SET `modelid` = 308 WHERE `guid` = 45477;
UPDATE `creature_addon` SET `bytes2` = 0 WHERE `guid` IN (44303,45472,45521,89860);

UPDATE `creature_template` SET `AIName` = 'SmartAI' WHERE `entry` IN (842,6670);
DELETE FROM `smart_scripts` WHERE `source_type` = 0 AND `entryorguid` IN (842,6670,-45521);
DELETE FROM `smart_scripts` WHERE `source_type` = 9 AND `entryorguid` IN (84200,667000,667001);
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(842,0,0,0,34,0,100,0,2,1,0,0,0,80,1132800,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Lumberjack - On WP 2 Reached - Call Timed Action List'),
(842,0,1,2,34,0,100,0,2,2,0,0,0,40,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Lumberjack - On WP 3 Reached - Sheath Melee Weapon'),
(842,0,2,0,61,0,100,0,0,0,0,0,0,17,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Lumberjack - Linked - Set Emote State ''ONESHOT_NONE'''),
(842,0,3,0,34,0,100,0,2,3,0,0,0,3,0,89,0,0,0,0,1,0,0,0,0,0,0,0,0,'Lumberjack - On WP 4 Reached - Morph Model'),
(842,0,4,0,34,0,100,0,2,15,0,0,0,3,0,308,0,0,0,0,1,0,0,0,0,0,0,0,0,'Lumberjack - On WP 16 Reached - Morph Model'),

(84200,9,0,0,0,0,100,0,0,0,0,0,0,40,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Lumberjack - On Script - Ready Melee Weapon'),
(84200,9,1,0,0,0,100,0,0,0,0,0,0,17,234,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Lumberjack - On Script - Set Emote State ''STATE_WORK_CHOPWOOD'''),
(84200,9,2,0,0,0,100,0,25000,50000,0,0,0,239,5000,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Lumberjack - On Script - Resume WP Path After 5 Seconds'),

(6670,0,0,0,34,0,100,0,2,1,0,0,0,80,667000,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Westfall Woodworker - On WP 2 Reached - Call Timed Action List'),
(6670,0,1,0,34,0,100,0,2,2,0,0,0,80,667000,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Westfall Woodworker - On WP 3 Reached - Call Timed Action List'),

(-45521,0,0,0,34,0,100,0,2,1,0,0,0,80,667001,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Westfall Woodworker - On WP 2 Reached - Call Timed Action List'),
(-45521,0,1,0,34,0,100,0,2,2,0,0,0,80,667000,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Westfall Woodworker - On WP 3 Reached - Call Timed Action List'),

(667000,9,0,0,0,0,100,0,1000,1000,0,0,0,17,69,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Westfall Woodworker - On Script - Set Emote State ''STATE_USESTANDING'''),
(667000,9,1,0,0,0,100,0,55000,80000,0,0,0,239,1000,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Westfall Woodworker - On Script - Resume WP Path After 1 Second'),
(667000,9,2,0,0,0,100,0,0,0,0,0,0,17,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Westfall Woodworker - On Script - Set Emote State ''ONESHOT_NONE'''),

(667001,9,0,0,0,0,100,0,1000,1000,0,0,0,5,16,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Westfall Woodworker - On Script - Play Emote ''ONESHOT_KNEEL''');

DELETE FROM `waypoint_scripts` WHERE `id` IN (4429600,4429601,4429602,4429603,4430300,4430301);

DELETE FROM `waypoint_data` WHERE `id` IN (442960,455240,898610,454720,898600,443030,455210);
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `pathfinding`, `action`, `action_chance`, `wpguid`)
VALUES
-- Lumberjack
(442960,1,-10611.8,1180.39,34.4925,0,0,0,0,0,100,0),
(442960,2,-10611.8,1180.39,34.4925,5.11381,60000,0,0,0,100,0),
(442960,3,-10611.8,1180.39,34.4925,0,2000,0,0,0,100,0),
(442960,4,-10611.8,1180.39,34.4925,0,0,0,0,0,100,0),
(442960,5,-10625.5,1172.63,34.2449,0,0,0,0,0,100,0),
(442960,6,-10632.2,1166.03,34.3671,0,0,0,0,0,100,0),
(442960,7,-10643.8,1154.6,33.3627,0,0,0,0,0,100,0),
(442960,8,-10651.6,1152.36,33.5276,0,0,0,0,0,100,0),
(442960,9,-10653,1147.78,33.7411,0,0,0,0,0,100,0),
(442960,10,-10650.3,1138.37,33.7858,0,0,0,0,0,100,0),
(442960,11,-10651.8,1136.93,34.2034,0,0,0,0,0,100,0),
(442960,12,-10660.2,1128.05,34.1984,0,0,0,0,0,100,0),
(442960,13,-10660,1124.38,34.1995,0,0,0,0,0,100,0),
(442960,14,-10657,1122.33,34.1972,0,0,0,0,0,100,0),
(442960,15,-10654.2,1120.44,35.6403,0,0,0,0,0,100,0),
(442960,16,-10649.4,1117.28,35.6169,0,2000,0,0,0,100,0),
(442960,17,-10654.2,1120.44,35.6403,0,0,0,0,0,100,0),
(442960,18,-10657,1122.33,34.1972,0,0,0,0,0,100,0),
(442960,19,-10660,1124.38,34.1995,0,0,0,0,0,100,0),
(442960,20,-10660.2,1128.05,34.1984,0,0,0,0,0,100,0),
(442960,21,-10651.8,1136.93,34.2034,0,0,0,0,0,100,0),
(442960,22,-10650.3,1138.37,33.7858,0,0,0,0,0,100,0),
(442960,23,-10653,1147.78,33.7411,0,0,0,0,0,100,0),
(442960,24,-10651.6,1152.36,33.5276,0,0,0,0,0,100,0),
(442960,25,-10643.8,1154.6,33.3627,0,0,0,0,0,100,0),
(442960,26,-10632.2,1166.03,34.3671,0,0,0,0,0,100,0),
(442960,27,-10625.5,1172.63,34.2449,0,0,0,0,0,100,0),
-- Lumberjack
(455240,1,-10597.2,1160.67,38.4581,0,0,0,0,0,100,0),
(455240,2,-10597.2,1160.67,38.4581,6.233,60000,0,0,0,100,0),
(455240,3,-10597.2,1160.67,38.4581,0,2000,0,0,0,100,0),
(455240,4,-10597.2,1160.67,38.4581,0,0,0,0,0,100,0),
(455240,5,-10608,1158.29,36.4702,0,0,0,0,0,100,0),
(455240,6,-10619.8,1155.68,34.7295,0,0,0,0,0,100,0),
(455240,7,-10624.9,1146.2,33.968,0,0,0,0,0,100,0),
(455240,8,-10630.6,1135.5,33.7792,0,0,0,0,0,100,0),
(455240,9,-10627.9,1123.15,33.7425,0,0,0,0,0,100,0),
(455240,10,-10623.6,1106.81,33.8386,0,0,0,0,0,100,0),
(455240,11,-10625.5,1098.7,33.7295,0,0,0,0,0,100,0),
(455240,12,-10632.8,1102.75,34.4315,0,0,0,0,0,100,0),
(455240,13,-10636.5,1104.86,34.5324,0,0,0,0,0,100,0),
(455240,14,-10638.4,1105.88,35.6192,0,0,0,0,0,100,0),
(455240,15,-10641.1,1107.4,35.6298,0,0,0,0,0,100,0),
(455240,16,-10644.3,1107.04,35.6531,0,2000,0,0,0,100,0),
(455240,17,-10641.1,1107.4,35.6298,0,0,0,0,0,100,0),
(455240,18,-10638.4,1105.88,35.6192,0,0,0,0,0,100,0),
(455240,19,-10636.5,1104.86,34.5324,0,0,0,0,0,100,0),
(455240,20,-10632.8,1102.75,34.4315,0,0,0,0,0,100,0),
(455240,21,-10625.5,1098.7,33.7295,0,0,0,0,0,100,0),
(455240,22,-10623.6,1106.81,33.8386,0,0,0,0,0,100,0),
(455240,23,-10627.9,1123.15,33.7425,0,0,0,0,0,100,0),
(455240,24,-10630.6,1135.5,33.7792,0,0,0,0,0,100,0),
(455240,25,-10624.9,1146.2,33.968,0,0,0,0,0,100,0),
(455240,26,-10619.8,1155.68,34.7295,0,0,0,0,0,100,0),
(455240,27,-10608,1158.29,36.4702,0,0,0,0,0,100,0),
-- Lumberjack
(898610,1,-10586,1143.73,40.2295,0,0,0,0,0,100,0),
(898610,2,-10586,1143.73,40.2295,3.52987,60000,0,0,0,100,0),
(898610,3,-10586,1143.73,40.2295,0,2000,0,0,0,100,0),
(898610,4,-10586,1143.73,40.2295,0,0,0,0,0,100,0),
(898610,5,-10583.5,1139.97,39.6076,0,0,0,0,0,100,0),
(898610,6,-10591.7,1130.52,38.7045,0,0,0,0,0,100,0),
(898610,7,-10599.1,1121.95,38.2541,0,0,0,0,0,100,0),
(898610,8,-10604.3,1115.86,37.3711,0,0,0,0,0,100,0),
(898610,9,-10608.9,1110.54,36.7127,0,0,0,0,0,100,0),
(898610,10,-10613.3,1105.43,35.7087,0,0,0,0,0,100,0),
(898610,11,-10619.3,1098.54,34.3583,0,0,0,0,0,100,0),
(898610,12,-10628.8,1097.99,33.7036,0,0,0,0,0,100,0),
(898610,13,-10634.1,1100.88,34.2376,0,0,0,0,0,100,0),
(898610,14,-10637.9,1102.94,34.4962,0,0,0,0,0,100,0),
(898610,15,-10639.8,1103.94,35.6185,0,0,0,0,0,100,0),
(898610,16,-10644.4,1106.43,35.6526,0,2000,0,0,0,100,0),
(898610,17,-10639.8,1103.94,35.6185,0,0,0,0,0,100,0),
(898610,18,-10637.9,1102.94,34.4962,0,0,0,0,0,100,0),
(898610,19,-10634.1,1100.88,34.2376,0,0,0,0,0,100,0),
(898610,20,-10628.8,1097.99,33.7036,0,0,0,0,0,100,0),
(898610,21,-10619.3,1098.54,34.3583,0,0,0,0,0,100,0),
(898610,22,-10613.3,1105.43,35.7087,0,0,0,0,0,100,0),
(898610,23,-10608.9,1110.54,36.7127,0,0,0,0,0,100,0),
(898610,24,-10604.3,1115.86,37.3711,0,0,0,0,0,100,0),
(898610,25,-10599.1,1121.95,38.2541,0,0,0,0,0,100,0),
(898610,26,-10591.7,1130.52,38.7045,0,0,0,0,0,100,0),
(898610,27,-10583.5,1139.97,39.6076,0,0,0,0,0,100,0),
-- Westfall Woodworker
(454720,1,-10650.8,1128.61,34.1978,0,0,0,0,0,100,0),
(454720,2,-10650.8,1128.61,34.1978,4.58814,90000,0,0,0,100,0),
(454720,3,-10658.8,1134.62,34.1967,2.02773,90000,0,0,0,100,0),
-- Westfall Woodworker
(898600,1,-10656.2,1126.87,34.1967,0,0,0,0,0,100,0),
(898600,2,-10656.2,1126.87,34.1967,5.50706,90000,0,0,0,100,0),
(898600,3,-10667.4,1121.39,34.1967,3.53964,90000,0,0,0,100,0),
-- Westfall Woodworker
(443030,1,-10662.1,1130.83,34.1967,0,0,0,0,0,100,0),
(443030,2,-10662.1,1130.83,34.1967,2.50056,90000,0,0,0,100,0),
(443030,3,-10661.3,1113.16,34.1967,4.252,90000,0,0,0,100,0),
-- Westfall Woodworker
(455210,1,-10651,1112.89,35.6114,0,0,0,0,0,100,0),
(455210,2,-10651,1112.89,35.6114,3.34408,4000,0,0,0,100,0),
(455210,3,-10645.6,1114.4,35.626,0.90149,90000,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
