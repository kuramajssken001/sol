-- DB update 2020_12_08_04 -> 2020_12_08_05
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2020_12_08_04';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2020_12_08_04 2020_12_08_05 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1607412549684346125'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1607412549684346125');

UPDATE `creature_template` SET `speed_walk` = 1.1 WHERE `entry` = 5354;

DELETE FROM `smart_scripts` WHERE `entryorguid` = 5354 AND `source_type` = 0 AND `id` = 1;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(5354,0,1,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Gnarl Leafbrother - On Respawn - Set Active On');

DELETE FROM `waypoint_data` WHERE `id` = 518420;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(518420,1,-5022.19,629.697,33.8359,0,0,0,0,100,0),
(518420,2,-5043.06,619.918,31.7509,0,0,0,0,100,0),
(518420,3,-5054.03,613.627,30.7986,0,0,0,0,100,0),
(518420,4,-5071.43,601.872,32.0576,0,0,0,0,100,0),
(518420,5,-5089.62,591.379,28.9511,0,0,0,0,100,0),
(518420,6,-5105.09,579.888,30.5049,0,0,0,0,100,0),
(518420,7,-5116.35,576.741,32.7647,0,0,0,0,100,0),
(518420,8,-5136.21,566.893,31.5779,0,0,0,0,100,0),
(518420,9,-5150.28,553.108,30.9446,0,0,0,0,100,0),
(518420,10,-5158.92,542.096,35.8013,0,0,0,0,100,0),
(518420,11,-5167.16,522.274,38.6004,0,0,0,0,100,0),
(518420,12,-5166.32,510.923,38.5869,0,0,0,0,100,0),
(518420,13,-5158.1,492.401,33.9916,0,0,0,0,100,0),
(518420,14,-5147.33,474.399,30.2359,0,0,0,0,100,0),
(518420,15,-5134.92,457.462,26.0815,0,0,0,0,100,0),
(518420,16,-5122.42,440.587,21.5833,0,0,0,0,100,0),
(518420,17,-5109.22,424.297,16.5536,0,0,0,0,100,0),
(518420,18,-5094.23,409.595,11.2969,0,0,0,0,100,0),
(518420,19,-5080.25,393.952,10.3456,0,0,0,0,100,0),
(518420,20,-5070.76,379.526,13.7113,0,0,0,0,100,0),
(518420,21,-5063.31,359.271,18.1229,0,0,0,0,100,0),
(518420,22,-5063.43,338.488,24.4114,0,0,0,0,100,0),
(518420,23,-5059.11,312.621,24.1474,0,0,0,0,100,0),
(518420,24,-5054.88,292.803,29.3839,0,0,0,0,100,0),
(518420,25,-5054.42,273.846,34.5728,0,0,0,0,100,0),
(518420,26,-5070.98,257.049,38.0706,0,0,0,0,100,0),
(518420,27,-5087.89,264.232,40.3637,0,0,0,0,100,0),
(518420,28,-5090.11,281.699,35.7167,0,0,0,0,100,0),
(518420,29,-5081.8,296.34,31.364,0,0,0,0,100,0),
(518420,30,-5068.38,313.534,24.3237,0,0,0,0,100,0),
(518420,31,-5063.65,332.752,25.1584,0,0,0,0,100,0),
(518420,32,-5060.01,353.435,20.3948,0,0,0,0,100,0),
(518420,33,-5056.83,373.165,13.2976,0,0,0,0,100,0),
(518420,34,-5051.16,389.049,12.1913,0,0,0,0,100,0),
(518420,35,-5053.75,410.56,11.4389,0,0,0,0,100,0),
(518420,36,-5053.37,435.001,12.6685,0,0,0,0,100,0),
(518420,37,-5047.56,449.831,12.9624,0,0,0,0,100,0),
(518420,38,-5044.73,457.494,12.417,0,0,0,0,100,0),
(518420,39,-5041.59,465.988,9.92711,0,0,0,0,100,0),
(518420,40,-5038.05,474.865,11.7543,0,0,0,0,100,0),
(518420,41,-5034.29,484.29,14.8422,0,0,0,0,100,0),
(518420,42,-5031.07,492.359,14.3807,0,0,0,0,100,0),
(518420,43,-5017.89,502.31,13.9492,0,0,0,0,100,0),
(518420,44,-5016.62,521.595,14.871,0,0,0,0,100,0),
(518420,45,-5014.02,548.412,22.152,0,0,0,0,100,0),
(518420,46,-5010.4,557.656,25.2037,0,0,0,0,100,0),
(518420,47,-5006.89,566.593,27.2151,0,0,0,0,100,0),
(518420,48,-5006.41,575.918,28.519,0,0,0,0,100,0),
(518420,49,-5005.98,584.286,27.2142,0,0,0,0,100,0),
(518420,50,-5006.24,595.021,29.2361,0,0,0,0,100,0),
(518420,51,-5006.48,605.232,30.0563,0,0,0,0,100,0),
(518420,52,-5014.61,617.896,32.7197,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
