-- DB update 2021_03_16_01 -> 2021_03_16_02
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_03_16_01';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_03_16_01 2021_03_16_02 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1615852808405094631'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1615852808405094631');

DELETE FROM `smart_scripts` WHERE `entryorguid` IN (1654,1656) AND `source_type` = 0 AND `id` = 1;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(1654,0,1,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Gregor Agamand - On Respawn - Set Active On'),
(1656,0,1,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Thurman Agamand - On Respawn - Set Active On');

DELETE FROM `waypoint_data` WHERE `id` IN (446260,449880);
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
-- Gregor Agamand
(446260,1,2954.85,921.173,114.326,0,0,0,0,100,0),
(446260,2,2962.97,926.661,114.073,0,0,0,0,100,0),
(446260,3,2970.57,931.799,113.744,0,0,0,0,100,0),
(446260,4,2968.66,939.742,115.72,0,0,0,0,100,0),
(446260,5,2967.27,945.549,116.919,0,0,0,0,100,0),
(446260,6,2962.56,954.682,119.006,0,0,0,0,100,0),
(446260,7,2960.68,956.363,119.204,0,0,0,0,100,0),
(446260,8,2957.57,959.138,118.97,0,0,0,0,100,0),
(446260,9,2954.27,961.651,120.603,0,0,0,0,100,0),
(446260,10,2951.65,963.651,122.059,0,5000,0,0,100,0),
(446260,11,2952.17,966.375,122.133,0,5000,0,0,100,0),
(446260,12,2949.23,969.831,122.046,0,5000,0,0,100,0),
(446260,13,2949.51,965.823,122.495,0,5000,0,0,100,0),
(446260,14,2952.1,964.428,122.211,0,0,0,0,100,0),
(446260,15,2954.43,963.172,120.992,0,0,0,0,100,0),
(446260,16,2957.54,961.574,119.115,0,0,0,0,100,0),
(446260,17,2959.65,960.494,118.466,0,0,0,0,100,0),
(446260,18,2964.26,965.048,118.046,0,0,0,0,100,0),
(446260,19,2963.92,973.409,117.391,0,0,0,0,100,0),
(446260,20,2963.61,980.998,116.627,0,0,0,0,100,0),
(446260,21,2959.27,985.775,115.264,0,0,0,0,100,0),
(446260,22,2952.13,993.627,112.336,0,0,0,0,100,0),
(446260,23,2947.14,999.115,109.989,0,0,0,0,100,0),
(446260,24,2936.01,1003.32,106.581,0,0,0,0,100,0),
(446260,25,2927.24,1006.63,105.399,0,0,0,0,100,0),
(446260,26,2918.02,1006.06,105.997,0,0,0,0,100,0),
(446260,27,2907.73,1005.43,108.082,0,0,0,0,100,0),
(446260,28,2902.83,1005.13,108.718,0,10000,0,0,100,0),
(446260,29,2901.77,997.504,109.998,0,0,0,0,100,0),
(446260,30,2900.6,989.192,111.905,0,0,0,0,100,0),
(446260,31,2899.66,982.425,113.067,0,0,0,0,100,0),
(446260,32,2899.7,975.483,114.141,0,0,0,0,100,0),
(446260,33,2899.75,965.921,114.821,0,0,0,0,100,0),
(446260,34,2899.8,957.48,115.114,0,0,0,0,100,0),
(446260,35,2901.88,949.226,115.275,0,0,0,0,100,0),
(446260,36,2904.36,939.383,115.049,0,0,0,0,100,0),
(446260,37,2906.91,929.237,114.899,0,0,0,0,100,0),
(446260,38,2914.91,925.99,115.005,0,0,0,0,100,0),
(446260,39,2921.83,923.179,115.439,0,0,0,0,100,0),
(446260,40,2927.42,920.908,115.747,0,0,0,0,100,0),
(446260,41,2930.22,916.598,115.784,0,0,0,0,100,0),
(446260,42,2932.96,912.372,116.071,0,0,0,0,100,0),
(446260,43,2930.25,902.447,116.806,0,5000,0,0,100,0),
(446260,44,2932.6,911.499,116.04,0,0,0,0,100,0),
(446260,45,2936.98,913.426,116.197,0,0,0,0,100,0),
(446260,46,2943.8,916.433,115.28,0,0,0,0,100,0),
(446260,47,2949.14,918.783,114.808,0,0,0,0,100,0),
-- Thurman Agamand
(449880,1,2824.77,1045.1,110.94,0,0,0,0,100,0),
(449880,2,2815.01,1048.98,110.82,0,0,0,0,100,0),
(449880,3,2800.6,1054.72,110.82,0,0,0,0,100,0),
(449880,4,2786.83,1060.2,110.682,0,0,0,0,100,0),
(449880,5,2779.98,1059.59,110.288,0,0,0,0,100,0),
(449880,6,2772.39,1058.91,110.128,0,5000,0,0,100,0),
(449880,7,2771.32,1061.32,110.338,0,25000,0,0,100,0),
(449880,8,2778.4,1059.89,110.249,0,0,0,0,100,0),
(449880,9,2785.66,1058.43,110.559,0,0,0,0,100,0),
(449880,10,2798.38,1054.99,110.822,0,0,0,0,100,0),
(449880,11,2808.75,1052.18,110.822,0,0,0,0,100,0),
(449880,12,2818,1049.68,110.808,0,0,0,0,100,0),
(449880,13,2828.81,1050.65,110.791,0,0,0,0,100,0),
(449880,14,2840.07,1051.66,111.497,0,0,0,0,100,0),
(449880,15,2849.79,1052.53,112.733,0,0,0,0,100,0),
(449880,16,2857.03,1055.78,113.042,0,0,0,0,100,0),
(449880,17,2862.78,1058.36,113.076,0,0,0,0,100,0),
(449880,18,2867.34,1060.41,112.6,0,0,0,0,100,0),
(449880,19,2871,1067.71,111.599,0,0,0,0,100,0),
(449880,20,2874.29,1074.27,110.586,0,0,0,0,100,0),
(449880,21,2879.3,1081.58,109.853,0,0,0,0,100,0),
(449880,22,2882.95,1086.89,109.436,0,0,0,0,100,0),
(449880,23,2884.18,1093.19,109.722,0,0,0,0,100,0),
(449880,24,2880.76,1099.02,111.298,0,0,0,0,100,0),
(449880,25,2878.47,1102.94,113.046,0,0,0,0,100,0),
(449880,26,2871.94,1104.64,114.514,0,0,0,0,100,0),
(449880,27,2865.25,1102.38,115.935,0,0,0,0,100,0),
(449880,28,2861.49,1099.62,116.652,0,0,0,0,100,0),
(449880,29,2857.22,1096.48,117.33,0,5000,0,0,100,0),
(449880,30,2860.99,1099.62,116.728,0,0,0,0,100,0),
(449880,31,2864.52,1102.56,116.057,0,0,0,0,100,0),
(449880,32,2871.18,1105.3,114.799,0,0,0,0,100,0),
(449880,33,2875.75,1102.72,113.546,0,0,0,0,100,0),
(449880,34,2878.84,1100.98,112.372,0,0,0,0,100,0),
(449880,35,2881.43,1096.97,110.631,0,0,0,0,100,0),
(449880,36,2883.35,1093.99,109.841,0,0,0,0,100,0),
(449880,37,2882.14,1086.16,109.627,0,0,0,0,100,0),
(449880,38,2878.89,1080.09,109.765,0,0,0,0,100,0),
(449880,39,2874.98,1072.79,110.286,0,0,0,0,100,0),
(449880,40,2871.63,1066.52,111.402,0,0,0,0,100,0),
(449880,41,2868.81,1061.26,112.253,0,0,0,0,100,0),
(449880,42,2863.56,1060.14,113.052,0,0,0,0,100,0),
(449880,43,2855.8,1058.48,112.532,0,0,0,0,100,0),
(449880,44,2847.49,1056.7,111.74,0,0,0,0,100,0),
(449880,45,2839.8,1052.78,111.34,0,0,0,0,100,0),
(449880,46,2832.43,1049.01,110.984,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
