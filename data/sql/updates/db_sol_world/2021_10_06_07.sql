-- DB update 2021_10_06_06 -> 2021_10_06_07
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_10_06_06';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_10_06_06 2021_10_06_07 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1633517716925364668'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1633517716925364668');

UPDATE `creature_template` SET `speed_walk` = 1 WHERE `entry` = 2744;

UPDATE `creature` SET `MovementType` = 2 WHERE `guid` IN (69114,134455);

DELETE FROM `creature_addon` WHERE `guid` IN (69114,134455);
INSERT INTO `creature_addon` (`guid`, `path_id`, `mount`, `bytes1`, `bytes2`, `emote`, `isLarge`, `auras`)
VALUES
(69114,691140,0,0,1,0,0,NULL),
(134455,1344550,0,0,1,0,0,NULL);

DELETE FROM `waypoint_data` WHERE `id` IN (691140,1344550);
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(691140,1,-6336.26,-3119.93,310.836,0,0,0,0,100,0),
(691140,2,-6329.88,-3111.83,310.836,0,0,0,0,100,0),
(691140,3,-6325.14,-3105.81,310.838,0,0,0,0,100,0),
(691140,4,-6319.28,-3098.37,310.838,0,5000,0,0,100,0),
(691140,5,-6325.14,-3105.81,310.838,0,0,0,0,100,0),
(691140,6,-6329.88,-3111.83,310.836,0,0,0,0,100,0),
(691140,7,-6336.26,-3119.93,310.836,0,0,0,0,100,0),
(691140,8,-6341.22,-3126.23,310.836,0,0,0,0,100,0),
(691140,9,-6348.47,-3135.43,310.836,0,5000,0,0,100,0),
(691140,10,-6341.22,-3126.23,310.836,0,0,0,0,100,0),

(1344550,1,-6368.25,-3092.61,310.836,0,0,0,0,100,0),
(1344550,2,-6362.12,-3084.89,310.836,0,0,0,0,100,0),
(1344550,3,-6356.93,-3078.36,310.836,0,0,0,0,100,0),
(1344550,4,-6351.12,-3071.05,310.836,0,5000,0,0,100,0),
(1344550,5,-6356.93,-3078.36,310.836,0,0,0,0,100,0),
(1344550,6,-6362.12,-3084.89,310.836,0,0,0,0,100,0),
(1344550,7,-6368.25,-3092.61,310.836,0,0,0,0,100,0),
(1344550,8,-6374.64,-3100.65,310.836,0,0,0,0,100,0),
(1344550,9,-6380.72,-3108.31,310.836,0,5000,0,0,100,0),
(1344550,10,-6374.64,-3100.65,310.836,0,0,0,0,100,0);

UPDATE `creature` SET `position_x` = -6347.44, `position_y` = -3065.88, `position_z` = 310.834, `orientation` = 4.87669 WHERE `guid` = 7133; -- Shadowforge Chanter

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
