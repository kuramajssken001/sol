-- DB update 2022_03_06_00 -> 2022_03_08_00
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2022_03_06_00';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2022_03_06_00 2022_03_08_00 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1646695401089841405'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1646695401089841405');

DELETE FROM `creature` WHERE `guid` = 97065;
DELETE FROM `creature_addon` WHERE `guid` = 97065;
UPDATE `creature` SET `spawntimesecs` = 30 WHERE `id` IN (19397,19398,19399,19400);

UPDATE `creature_template` SET `AIName` = 'SmartAI' WHERE `entry` IN (19397,19398,19399,19400);
DELETE FROM `smart_scripts` WHERE `source_type` = 0 AND `entryorguid` IN (19397,19398,19399,19400);
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(19397,0,0,0,11,0,100,0,0,0,0,0,0,116,10,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Mo''arg Overseer - On Respawn - Set Corpse Delay'),

(19398,0,0,0,11,0,100,0,0,0,0,0,0,116,10,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Gan''arg Peon - On Respawn - Set Corpse Delay'),

(19399,0,0,0,11,0,100,0,0,0,0,0,0,116,10,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Fel Cannon - On Respawn - Set Corpse Delay'),

(19400,0,0,1,11,0,100,0,0,0,0,0,0,116,10,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Fel Reaver Sentry - On Respawn - Set Corpse Delay'),
(19400,0,1,0,61,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Fel Reaver Sentry - Linked - Set Active On');

DELETE FROM `waypoint_data` WHERE `id` IN (692700,692680,692690);
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `pathfinding`, `action`, `action_chance`, `wpguid`)
VALUES
-- Fel Reaver Sentry
(692700,1,659.736,1763.51,106.591,0,0,0,0,0,100,0),
(692700,2,669.477,1746.46,101.607,0,0,0,0,0,100,0),
(692700,3,684.074,1743.95,102.45,0,0,0,0,0,100,0),
(692700,4,699.509,1741.29,102.543,0,0,0,0,0,100,0),
(692700,5,708.554,1739.73,95.9284,0,0,0,0,0,100,0),
(692700,6,720.718,1737.3,104.051,0,0,0,0,0,100,0),
(692700,7,734.181,1734.61,105.116,0,0,0,0,0,100,0),
(692700,8,739.359,1730.61,104.549,0,0,0,0,0,100,0),
(692700,9,749.603,1722.68,98.3612,0,0,0,0,0,100,0),
(692700,10,755.423,1718.18,100.207,0,0,0,0,0,100,0),
(692700,11,761.661,1713.36,99.1685,0,0,0,0,0,100,0),
(692700,12,774.537,1705.66,99.4153,0,0,0,0,0,100,0),
(692700,13,797.507,1693.78,101.791,0,0,0,0,0,100,0),
(692700,14,809.435,1693.61,99.9275,0,0,0,0,0,100,0),
(692700,15,819.227,1693.46,98.0619,0,0,0,0,0,100,0),
(692700,16,828.391,1693.33,95.5204,0,0,0,0,0,100,0),
(692700,17,836.525,1693.21,89.739,0,0,0,0,0,100,0),
(692700,18,846.304,1693.77,92.9111,0,0,0,0,0,100,0),
(692700,19,854.229,1694.22,91.7803,0,0,0,0,0,100,0),
(692700,20,866.422,1694.92,85.7741,0,0,0,0,0,100,0),
(692700,21,875.409,1696.15,91.7084,0,0,0,0,0,100,0),
(692700,22,883.992,1697.32,92.1665,0,0,0,0,0,100,0),
(692700,23,895.471,1698.59,93.4478,0,0,0,0,0,100,0),
(692700,24,904.682,1699.61,93.9531,0,0,0,0,0,100,0),
(692700,25,910.652,1700.27,91.6438,0,0,0,0,0,100,0),
(692700,26,918.132,1702.88,91.8592,0,0,0,0,0,100,0),
(692700,27,924.525,1705.1,92.1643,0,0,0,0,0,100,0),
(692700,28,933.446,1708.21,91.7842,0,0,0,0,0,100,0),
(692700,29,939.13,1710.19,94.0852,0,0,0,0,0,100,0),
(692700,30,945.741,1712.49,94.9908,0,0,0,0,0,100,0),
(692700,31,953.006,1715.02,94.0159,0,0,0,0,0,100,0),
(692700,32,961.665,1719.05,96.6724,0,0,0,0,0,100,0),
(692700,33,969.288,1722.59,99.5935,0,0,0,0,0,100,0),
(692700,34,974.775,1725.14,98.3354,0,0,0,0,0,100,0),
(692700,35,987.668,1726.35,99.9631,0,0,0,0,0,100,0),
(692700,36,996.61,1727.19,99.7271,0,0,0,0,0,100,0),
(692700,37,1005.15,1727.99,99.3093,0,0,0,0,0,100,0),
(692700,38,1016.68,1731.35,99.31,0,0,0,0,0,100,0),
(692700,39,1028.04,1734.65,99.2061,0,0,0,0,0,100,0),
(692700,40,1032.91,1737.85,99.4994,0,0,0,0,0,100,0),
(692700,41,1042.72,1744.28,93.2128,0,0,0,0,0,100,0),
(692700,42,1050.97,1749.7,97.9012,0,0,0,0,0,100,0),
(692700,43,1059.1,1754.06,104.512,0,0,0,0,0,100,0),
(692700,44,1065.36,1757.42,107.033,0,0,0,0,0,100,0),
(692700,45,1071.69,1760.82,108.739,0,0,0,0,0,100,0),
(692700,46,1083.56,1759.83,107.925,0,0,0,0,0,100,0),
(692700,47,1096.81,1758.73,107.676,0,0,0,0,0,100,0),
(692700,48,1110.74,1757.57,107.745,0,0,0,0,0,100,0),
(692700,49,1116.01,1763.49,109.886,0,0,0,0,0,100,0),
(692700,50,1120.44,1768.46,107.173,0,0,0,0,0,100,0),
(692700,51,1123.15,1771.5,109.921,0,0,0,0,0,100,0),
(692700,52,1125.93,1775.41,113.229,0,0,0,0,0,100,0),
(692700,53,1130.94,1782.45,114.653,0,0,0,0,0,100,0),
(692700,54,1138.1,1792.53,115.91,0,0,0,0,0,100,0),
(692700,55,1144.95,1802.16,117.535,0,0,0,0,0,100,0),
(692700,56,1137.38,1806.07,118.745,0,0,0,0,0,100,0),
(692700,57,1130.65,1809.55,119.139,0,0,0,0,0,100,0),
(692700,58,1122.88,1813.57,117.982,0,0,0,0,0,100,0),
(692700,59,1112.82,1818.77,122.239,0,0,0,0,0,100,0),
(692700,60,1097.93,1828.34,123.67,0,0,0,0,0,100,0),
(692700,61,1087.49,1835.57,124.385,0,0,0,0,0,100,0),
(692700,62,1077.23,1842.67,125.782,0,0,0,0,0,100,0),
(692700,63,1067.8,1849.2,128.47,0,0,0,0,0,100,0),
(692700,64,1058.41,1853.36,131.145,0,0,0,0,0,100,0),
(692700,65,1049.25,1857.43,133.884,0,0,0,0,0,100,0),
(692700,66,1042.27,1860.52,135.995,0,0,0,0,0,100,0),
(692700,67,1030.25,1862.13,137.546,0,0,0,0,0,100,0),
(692700,68,1017.3,1863.86,138.398,0,0,0,0,0,100,0),
(692700,69,1007.05,1865.23,138.383,0,0,0,0,0,100,0),
(692700,70,997.461,1866.57,138.173,0,0,0,0,0,100,0),
(692700,71,984.649,1868.35,137.515,0,0,0,0,0,100,0),
(692700,72,971.823,1870.14,137.451,0,0,0,0,0,100,0),
(692700,73,961.661,1871.55,137.322,0,0,0,0,0,100,0),
(692700,74,951.617,1869.45,136.711,0,0,0,0,0,100,0),
(692700,75,940.545,1867.13,139.584,0,0,0,0,0,100,0),
(692700,76,931.343,1865.2,141.056,0,0,0,0,0,100,0),
(692700,77,919.808,1860.75,140.946,0,0,0,0,0,100,0),
(692700,78,908.82,1856.52,139.951,0,0,0,0,0,100,0),
(692700,79,896.966,1855.56,139.507,0,0,0,0,0,100,0),
(692700,80,887.052,1854.75,139.527,0,0,0,0,0,100,0),
(692700,81,873.081,1853.74,139.005,0,0,0,0,0,100,0),
(692700,82,861.273,1852.89,138.846,0,0,0,0,0,100,0),
(692700,83,849.04,1850.41,137.971,0,0,0,0,0,100,0),
(692700,84,838.18,1848.21,137.193,0,0,0,0,0,100,0),
(692700,85,827.553,1846.06,136.597,0,0,0,0,0,100,0),
(692700,86,810.361,1843.41,137.034,0,0,0,0,0,100,0),
(692700,87,798.132,1841.53,138.124,0,0,0,0,0,100,0),
(692700,88,785.316,1842.29,139.202,0,0,0,0,0,100,0),
(692700,89,774.537,1842.92,139.746,0,0,0,0,0,100,0),
(692700,90,763.643,1839.97,139.789,0,0,0,0,0,100,0),
(692700,91,756.506,1838.03,139.56,0,0,0,0,0,100,0),
(692700,92,746.602,1835.34,137.053,0,0,0,0,0,100,0),
(692700,93,737.484,1832.87,138.533,0,0,0,0,0,100,0),
(692700,94,730.225,1827.21,136.436,0,0,0,0,0,100,0),
(692700,95,721.391,1820.31,130.888,0,0,0,0,0,100,0),
(692700,96,714.674,1816.31,130.861,0,0,0,0,0,100,0),
(692700,97,707.461,1812.02,130.264,0,0,0,0,0,100,0),
(692700,98,699.237,1807.13,127.616,0,0,0,0,0,100,0),
(692700,99,684.892,1806.31,125.14,0,0,0,0,0,100,0),
(692700,100,676.872,1801.31,121.441,0,0,0,0,0,100,0),
(692700,101,668.555,1796.13,115.367,0,0,0,0,0,100,0),
(692700,102,659.981,1788.51,111.544,0,0,0,0,0,100,0),
(692700,103,659.925,1782.79,112.881,0,0,0,0,0,100,0),
(692700,104,659.836,1773.69,110.259,0,0,0,0,0,100,0),
-- Fel Reaver Sentry
(692680,1,648.588,1840.11,125.469,0,0,0,0,0,100,0),
(692680,2,658.143,1844.9,128.332,0,0,0,0,0,100,0),
(692680,3,667.68,1849.02,132.162,0,0,0,0,0,100,0),
(692680,4,677.386,1853.21,136.547,0,0,0,0,0,100,0),
(692680,5,691.466,1855.27,140.345,0,0,0,0,0,100,0),
(692680,6,706.08,1857.41,144.284,0,0,0,0,0,100,0),
(692680,7,718.308,1857.79,145.838,0,0,0,0,0,100,0),
(692680,8,732.427,1858.24,144.937,0,0,0,0,0,100,0),
(692680,9,743.876,1858.6,143.204,0,0,0,0,0,100,0),
(692680,10,756.167,1856.43,141.449,0,0,0,0,0,100,0),
(692680,11,767.997,1854.35,141.916,0,0,0,0,0,100,0),
(692680,12,781.439,1851.98,141.399,0,0,0,0,0,100,0),
(692680,13,794.985,1849.59,139.869,0,0,0,0,0,100,0),
(692680,14,806.139,1847.62,138.056,0,0,0,0,0,100,0),
(692680,15,817.859,1845.55,136.709,0,0,0,0,0,100,0),
(692680,16,831.074,1843.22,136,0,0,0,0,0,100,0),
(692680,17,844.764,1840.81,135.664,0,0,0,0,0,100,0),
(692680,18,857.352,1840.57,135.58,0,0,0,0,0,100,0),
(692680,19,868.424,1840.37,135.413,0,0,0,0,0,100,0),
(692680,20,880.447,1840.14,135.341,0,0,0,0,0,100,0),
(692680,21,892.352,1839.92,135.044,0,0,0,0,0,100,0),
(692680,22,905.412,1839.67,133.954,0,0,0,0,0,100,0),
(692680,23,921.744,1839.36,133.771,0,0,0,0,0,100,0),
(692680,24,937.944,1839.06,132.934,0,0,0,0,0,100,0),
(692680,25,950.073,1838.83,131.809,0,0,0,0,0,100,0),
(692680,26,957.048,1838.7,129.656,0,0,0,0,0,100,0),
(692680,27,964.157,1838.57,130.287,0,0,0,0,0,100,0),
(692680,28,975.586,1838.35,129.369,0,0,0,0,0,100,0),
(692680,29,984.636,1838.18,129.002,0,0,0,0,0,100,0),
(692680,30,997.751,1837.92,128.278,0,0,0,0,0,100,0),
(692680,31,1009.66,1837.69,128.021,0,0,0,0,0,100,0),
(692680,32,1023.19,1837.42,127.591,0,0,0,0,0,100,0),
(692680,33,1035.34,1837.18,127.223,0,0,0,0,0,100,0),
(692680,34,1046.77,1836.96,126.689,0,0,0,0,0,100,0),
(692680,35,1057.64,1836.75,126.152,0,0,0,0,0,100,0),
(692680,36,1067.59,1822.08,123.42,0,0,0,0,0,100,0),
(692680,37,1078.04,1811.77,122.335,0,0,0,0,0,100,0),
(692680,38,1090.6,1799.38,120.745,0,0,0,0,0,100,0),
(692680,39,1094.64,1795.4,117.212,0,0,0,0,0,100,0),
(692680,40,1095.19,1788.43,113.947,0,0,0,0,0,100,0),
(692680,41,1095.97,1778.63,115.689,0,0,0,0,0,100,0),
(692680,42,1089.39,1770.91,113.554,0,0,0,0,0,100,0),
(692680,43,1082.43,1762.74,109.565,0,0,0,0,0,100,0),
(692680,44,1073.73,1752.53,104.38,0,0,0,0,0,100,0),
(692680,45,1062.69,1739.57,99.4586,0,0,0,0,0,100,0),
(692680,46,1052.08,1727.12,94.7079,0,0,0,0,0,100,0),
(692680,47,1046.03,1725.84,93.7993,0,0,0,0,0,100,0),
(692680,48,1039.29,1724.42,89.8098,0,0,0,0,0,100,0),
(692680,49,1028.79,1722.2,94.1792,0,0,0,0,0,100,0),
(692680,50,1015.58,1719.41,93.8161,0,0,0,0,0,100,0),
(692680,51,1004.52,1720.06,95.4618,0,0,0,0,0,100,0),
(692680,52,993.219,1720.73,96.7612,0,0,0,0,0,100,0),
(692680,53,978.314,1721.61,95.4055,0,0,0,0,0,100,0),
(692680,54,969.81,1722.11,99.1916,0,0,0,0,0,100,0),
(692680,55,960.72,1722.65,100.743,0,0,0,0,0,100,0),
(692680,56,953.361,1722.97,99.0017,0,0,0,0,0,100,0),
(692680,57,946.604,1723.37,101.12,0,0,0,0,0,100,0),
(692680,58,937.912,1723.88,101.714,0,0,0,0,0,100,0),
(692680,59,929.532,1724.37,102.032,0,0,0,0,0,100,0),
(692680,60,923.012,1724.76,99.233,0,0,0,0,0,100,0),
(692680,61,916.474,1725.15,103.372,0,0,0,0,0,100,0),
(692680,62,905.676,1725.78,104.761,0,0,0,0,0,100,0),
(692680,63,896.371,1720.44,103.228,0,0,0,0,0,100,0),
(692680,64,886.459,1714.75,101.225,0,0,0,0,0,100,0),
(692680,65,877.695,1709.71,98.4967,0,0,0,0,0,100,0),
(692680,66,870.108,1705.35,96.3453,0,0,0,0,0,100,0),
(692680,67,862.135,1700.77,88.6839,0,0,0,0,0,100,0),
(692680,68,852.565,1695.28,92.6096,0,0,0,0,0,100,0),
(692680,69,845.836,1691.41,91.9877,0,0,0,0,0,100,0),
(692680,70,836.426,1690.42,88.6186,0,0,0,0,0,100,0),
(692680,71,828.079,1689.55,93.8553,0,0,0,0,0,100,0),
(692680,72,819.608,1690.45,96.6083,0,0,0,0,0,100,0),
(692680,73,810.48,1691.43,98.8152,0,0,0,0,0,100,0),
(692680,74,801.806,1694.16,102.062,0,0,0,0,0,100,0),
(692680,75,795.349,1696.19,102.472,0,0,0,0,0,100,0),
(692680,76,784.438,1699.62,99.7284,0,0,0,0,0,100,0),
(692680,77,773.975,1702.92,98.2512,0,0,0,0,0,100,0),
(692680,78,757.409,1708.13,99.9823,0,0,0,0,0,100,0),
(692680,79,744.835,1712.08,99.0877,0,0,0,0,0,100,0),
(692680,80,732.164,1716.07,91.4488,0,0,0,0,0,100,0),
(692680,81,720.86,1721.37,92.2213,0,0,0,0,0,100,0),
(692680,82,712.509,1725.29,90.0605,0,0,0,0,0,100,0),
(692680,83,704.169,1729.2,88.3727,0,0,0,0,0,100,0),
(692680,84,695.407,1733.31,99.9735,0,0,0,0,0,100,0),
(692680,85,683.79,1738.76,100.534,0,0,0,0,0,100,0),
(692680,86,672.736,1743.95,101.071,0,0,0,0,0,100,0),
(692680,87,660.801,1750.82,102.306,0,0,0,0,0,100,0),
(692680,88,644.85,1759.99,103.837,0,0,0,0,0,100,0),
(692680,89,635.851,1765.17,97.6566,0,0,0,0,0,100,0),
(692680,90,628.168,1769.59,104.7,0,0,0,0,0,100,0),
(692680,91,619.818,1774.39,105.868,0,0,0,0,0,100,0),
(692680,92,616.74,1789.83,109.732,0,0,0,0,0,100,0),
(692680,93,614.368,1801.73,112.448,0,0,0,0,0,100,0),
(692680,94,617.685,1808.68,114.888,0,0,0,0,0,100,0),
(692680,95,623.012,1819.84,114.376,0,0,0,0,0,100,0),
(692680,96,627.673,1829.61,121.511,0,0,0,0,0,100,0),
(692680,97,637.681,1834.63,123.547,0,0,0,0,0,100,0),
-- Fel Reaver Sentry
(692690,1,841.64,1689.61,90.0701,0,0,0,0,0,100,0),
(692690,2,846.387,1693.54,92.8195,0,0,0,0,0,100,0),
(692690,3,852.004,1698.19,93.6057,0,0,0,0,0,100,0),
(692690,4,859.56,1704.45,91.1014,0,0,0,0,0,100,0),
(692690,5,866.788,1710.44,99.6419,0,0,0,0,0,100,0),
(692690,6,875.566,1717.71,102.683,0,0,0,0,0,100,0),
(692690,7,882.93,1723.81,104.626,0,0,0,0,0,100,0),
(692690,8,892.618,1731.83,107.105,0,0,0,0,0,100,0),
(692690,9,901.426,1739.13,109.297,0,0,0,0,0,100,0),
(692690,10,913.935,1749.49,111.939,0,0,0,0,0,100,0),
(692690,11,925.836,1759.35,114.969,0,0,0,0,0,100,0),
(692690,12,932.681,1773.42,117.792,0,0,0,0,0,100,0),
(692690,13,940.201,1788.88,120.843,0,0,0,0,0,100,0),
(692690,14,943.573,1795.81,118.729,0,0,0,0,0,100,0),
(692690,15,946.838,1802.53,122.289,0,0,0,0,0,100,0),
(692690,16,944.089,1807.93,124.971,0,0,0,0,0,100,0),
(692690,17,936.95,1821.96,129.115,0,0,0,0,0,100,0),
(692690,18,924.785,1834.05,132.427,0,0,0,0,0,100,0),
(692690,19,913.552,1845.21,135.317,0,0,0,0,0,100,0),
(692690,20,898.347,1841.06,134.92,0,0,0,0,0,100,0),
(692690,21,883.2,1836.92,134.623,0,0,0,0,0,100,0),
(692690,22,869.935,1829.32,133.416,0,0,0,0,0,100,0),
(692690,23,853.301,1819.79,131.946,0,0,0,0,0,100,0),
(692690,24,844.982,1810.81,130.5,0,0,0,0,0,100,0),
(692690,25,836.021,1801.13,129.138,0,0,0,0,0,100,0),
(692690,26,829.129,1793.69,128.069,0,0,0,0,0,100,0),
(692690,27,822.389,1786.41,123.664,0,0,0,0,0,100,0),
(692690,28,814.941,1779.05,122.954,0,0,0,0,0,100,0),
(692690,29,807.045,1769.85,124.469,0,0,0,0,0,100,0),
(692690,30,797.815,1759.88,121.931,0,0,0,0,0,100,0),
(692690,31,795.225,1746.62,117.712,0,0,0,0,0,100,0),
(692690,32,792.803,1734.26,114.148,0,0,0,0,0,100,0),
(692690,33,790.696,1723.5,111.09,0,0,0,0,0,100,0),
(692690,34,788.792,1713.78,107.911,0,0,0,0,0,100,0),
(692690,35,796.222,1710.38,107.513,0,0,0,0,0,100,0),
(692690,36,806.827,1705.53,105.171,0,0,0,0,0,100,0),
(692690,37,818.726,1700.09,101.124,0,0,0,0,0,100,0),
(692690,38,828.616,1695.57,96.5658,0,0,0,0,0,100,0),
(692690,39,835.769,1692.29,89.5719,0,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
