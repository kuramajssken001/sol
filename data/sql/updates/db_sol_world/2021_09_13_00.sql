-- DB update 2021_09_12_01 -> 2021_09_13_00
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_09_12_01';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_09_12_01 2021_09_13_00 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1631485900025610904'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1631485900025610904');

-- Overseer Azarad / Sunfury Blood Knight
UPDATE `creature` SET `MovementType` = 2 WHERE `guid` IN (72988,74121);

-- Sunfury Nethermancer
UPDATE `creature` SET `wander_distance` = 0, `MovementType` = 0 WHERE `guid` IN (71943,71947,71948,71950,71951,71957,71958,71954,71956,71975,71969,71970,71962,71959,71964,71965,71966,71967,71961);
UPDATE `creature` SET `position_x` = 3887.16, `position_y` = 3900.91, `position_z` = 179.309, `wander_distance` = 5, `MovementType` = 1 WHERE `guid` = 71952;
UPDATE `creature` SET `position_x` = 3977.15, `position_y` = 3780.8, `position_z` = 124.132 WHERE `guid` = 71946;
UPDATE `creature` SET `position_x` = 3968.53, `position_y` = 3768.9, `position_z` = 122.807 WHERE `guid` = 71944;
UPDATE `creature` SET `position_x` = 3962.82, `position_y` = 3774.64, `position_z` = 123.892 WHERE `guid` = 71945;
UPDATE `creature` SET `position_x` = 3820.36, `position_y` = 3846.39, `position_z` = 103.239 WHERE `guid` = 71949;
UPDATE `creature` SET `position_x` = 3990.92, `position_y` = 4127.48, `position_z` = 189.002 WHERE `guid` = 71968;
UPDATE `creature` SET `position_x` = 4055.36, `position_y` = 3893.03, `position_z` = 189.426 WHERE `guid` = 71963;

-- Daughter of Destiny
UPDATE `creature` SET `position_x` = 3928.81, `position_y` = 3781.06, `position_z` = 122.34 WHERE `guid` = 67419;
UPDATE `creature` SET `position_x` = 3830.99, `position_y` = 3831.48, `position_z` = 103.607 WHERE `guid` = 67420;
UPDATE `creature` SET `position_x` = 4032.66, `position_y` = 3876.38, `position_z` = 191.686 WHERE `guid` = 67421;
UPDATE `creature` SET `position_x` = 3882.15, `position_y` = 3915.77, `position_z` = 180.264 WHERE `guid` = 67422;

DELETE FROM `creature_addon` WHERE `guid` IN (72988,74121);
INSERT INTO `creature_addon` (`guid`, `path_id`, `mount`, `bytes1`, `bytes2`, `emote`, `isLarge`, `auras`)
VALUES
(72988,729880,0,0,4097,0,0,NULL),
(74121,741210,0,0,4097,0,0,NULL);

DELETE FROM `smart_scripts` WHERE `source_type` = 0 AND `id` = 4 AND `entryorguid` = 20685;
DELETE FROM `smart_scripts` WHERE `source_type` = 0 AND `entryorguid` = -74121;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(20685,0,4,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Overseer Azarad - On Respawn - Set Active On'),

(-74121,0,0,0,0,0,100,0,3700,5500,9800,13600,0,11,35871,0,0,0,0,0,2,0,0,0,0,0,0,0,0,'Sunfury Blood Knight - IC - Cast ''Spellbreaker'''),
(-74121,0,1,0,2,0,100,1,0,50,0,0,0,11,36476,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Sunfury Blood Knight - Between 0-50% Health - Cast ''Blood Heal'' (No Repeat)'),
(-74121,0,2,0,2,0,100,1,0,30,0,0,0,11,8599,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Sunfury Blood Knight - Between 0-30% Health - Cast ''Enrage'' (No Repeat)'),
(-74121,0,3,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Sunfury Blood Knight - On Respawn - Set Active On');

DELETE FROM `waypoint_data` WHERE `id` IN (729880,741210);
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(729880,1,3985.48,4021.77,193.37,0,0,0,0,100,0),
(729880,2,3996.59,4031.04,192.799,0,0,0,0,100,0),
(729880,3,4005.46,4038.43,193.199,0,0,0,0,100,0),
(729880,4,4015.59,4046.88,194.227,0,0,0,0,100,0),
(729880,5,4019.33,4054.32,194.225,0,0,0,0,100,0),
(729880,6,4022.91,4066.28,192.818,0,0,0,0,100,0),
(729880,7,4025.73,4075.72,192.818,0,0,0,0,100,0),
(729880,8,4029.61,4089.9,192.818,0,20000,0,0,100,0),
(729880,9,4025.73,4075.72,192.818,0,0,0,0,100,0),
(729880,10,4023.33,4065.73,192.818,0,0,0,0,100,0),
(729880,11,4020.43,4053.66,194.227,0,0,0,0,100,0),
(729880,12,4024.18,4043.39,194.226,0,0,0,0,100,0),
(729880,13,4028.41,4031.77,193.321,0,0,0,0,100,0),
(729880,14,4033.45,4017.96,193.033,0,0,0,0,100,0),
(729880,15,4036.68,4009.08,193.517,0,0,0,0,100,0),
(729880,16,4042.38,4007.35,194.226,0,0,0,0,100,0),
(729880,17,4050.31,4004.94,194.226,0,0,0,0,100,0),
(729880,18,4062.14,4001.35,192.818,0,0,0,0,100,0),
(729880,19,4074.74,3997.91,192.818,0,0,0,0,100,0),
(729880,20,4085.43,3994.98,192.818,0,5000,0,0,100,0),
(729880,21,4074.74,3997.91,192.818,0,0,0,0,100,0),
(729880,22,4062.14,4001.35,192.818,0,0,0,0,100,0),
(729880,23,4050.05,4003.96,194.227,0,0,0,0,100,0),
(729880,24,4040.38,4000.48,194.216,0,0,0,0,100,0),
(729880,25,4030.27,3996.84,193.444,0,0,0,0,100,0),
(729880,26,4020.29,3993.25,193.032,0,0,0,0,100,0),
(729880,27,4006.03,3988.11,193.441,0,0,0,0,100,0),
(729880,28,4003.91,3981.93,194.226,0,0,0,0,100,0),
(729880,29,4001.27,3974.21,194.226,0,0,0,0,100,0),
(729880,30,3997.3,3962.62,192.818,0,0,0,0,100,0),
(729880,31,3994.14,3950.9,192.818,0,0,0,0,100,0),
(729880,32,3991.22,3940.04,192.818,0,20000,0,0,100,0),
(729880,33,3994.14,3950.9,192.818,0,0,0,0,100,0),
(729880,34,3997.3,3962.62,192.818,0,0,0,0,100,0),
(729880,35,3999.78,3974.85,194.227,0,0,0,0,100,0),
(729880,36,3994.74,3985.24,194.227,0,0,0,0,100,0),
(729880,37,3990.21,3994.58,193.705,0,0,0,0,100,0),
(729880,38,3985.38,4004.55,193.506,0,0,0,0,100,0),
(729880,39,3980.08,4015.47,193.925,0,0,0,0,100,0),
(729880,40,3977.64,4020.5,194.226,0,0,0,0,100,0),
(729880,41,3970.3,4023.18,194.226,0,0,0,0,100,0),
(729880,42,3958.86,4027.35,192.818,0,0,0,0,100,0),
(729880,43,3944.89,4030.76,192.818,0,0,0,0,100,0),
(729880,44,3933.9,4033.44,192.818,0,20000,0,0,100,0),
(729880,45,3944.89,4030.76,192.818,0,0,0,0,100,0),
(729880,46,3958.86,4027.35,192.818,0,0,0,0,100,0),
(729880,47,3970.86,4024.83,194.227,0,0,0,0,100,0),
(729880,48,3978.51,4023.23,194.227,0,0,0,0,100,0),

(741210,1,3898.99,3828.53,124.026,0,0,0,0,100,0),
(741210,2,3906.37,3834.79,128.739,0,0,0,0,100,0),
(741210,3,3916.7,3834.39,134.67,0,0,0,0,100,0),
(741210,4,3925.67,3834.05,139.882,0,0,0,0,100,0),
(741210,5,3935.58,3833.67,145.567,0,0,0,0,100,0),
(741210,6,3946.19,3833.26,151.374,0,0,0,0,100,0),
(741210,7,3954.65,3832.93,155.514,0,0,0,0,100,0),
(741210,8,3962.58,3832.62,158.899,0,0,0,0,100,0),
(741210,9,3968.2,3838.71,161.466,0,0,0,0,100,0),
(741210,10,3973.57,3844.53,164.045,0,0,0,0,100,0),
(741210,11,3973.35,3853.51,166.382,0,0,0,0,100,0),
(741210,12,3973.2,3859.69,167.985,0,0,0,0,100,0),
(741210,13,3968.14,3867.95,170.353,0,0,0,0,100,0),
(741210,14,3963.31,3875.81,172.531,0,0,0,0,100,0),
(741210,15,3959.41,3882.17,173.881,0,0,0,0,100,0),
(741210,16,3951.94,3888.7,174.904,0,0,0,0,100,0),
(741210,17,3944.64,3895.07,175.393,0,0,0,0,100,0),
(741210,18,3938.41,3900.52,175.631,0,0,0,0,100,0),
(741210,19,3932.06,3905.08,175.882,0,0,0,0,100,0),
(741210,20,3925.05,3910.13,176.002,0,0,0,0,100,0),
(741210,21,3917.1,3915.85,176.134,0,0,0,0,100,0),
(741210,22,3909.15,3921.57,176.492,0,0,0,0,100,0),
(741210,23,3900.59,3925.31,176.932,0,0,0,0,100,0),
(741210,24,3892.99,3928.62,177.857,0,0,0,0,100,0),
(741210,25,3887.2,3934.87,178.947,0,0,0,0,100,0),
(741210,26,3881.02,3941.55,180.448,0,0,0,0,100,0),
(741210,27,3876.49,3949.71,181.731,0,0,0,0,100,0),
(741210,28,3872.47,3956.95,183.152,0,0,0,0,100,0),
(741210,29,3874.03,3964.25,183.75,0,0,0,0,100,0),
(741210,30,3876.02,3973.49,183.543,0,0,0,0,100,0),
(741210,31,3881.15,3982.92,183.082,0,0,0,0,100,0),
(741210,32,3885.44,3990.82,182.977,0,0,0,0,100,0),
(741210,33,3890.06,3999.32,183.032,0,0,0,0,100,0),
(741210,34,3891.47,4009.25,183.701,0,0,0,0,100,0),
(741210,35,3892.84,4018.95,185.055,0,0,0,0,100,0),
(741210,36,3894.05,4027.5,186.285,0,0,0,0,100,0),
(741210,37,3899.64,4033.14,187.658,0,0,0,0,100,0),
(741210,38,3910.79,4036.94,190.1,0,5000,0,0,100,0),
(741210,39,3899.64,4033.14,187.658,0,0,0,0,100,0),
(741210,40,3894.05,4027.5,186.285,0,0,0,0,100,0),
(741210,41,3892.84,4018.95,185.055,0,0,0,0,100,0),
(741210,42,3891.47,4009.25,183.701,0,0,0,0,100,0),
(741210,43,3890.06,3999.32,183.032,0,0,0,0,100,0),
(741210,44,3885.44,3990.82,182.977,0,0,0,0,100,0),
(741210,45,3881.15,3982.92,183.082,0,0,0,0,100,0),
(741210,46,3876.02,3973.49,183.543,0,0,0,0,100,0),
(741210,47,3874.03,3964.25,183.75,0,0,0,0,100,0),
(741210,48,3872.47,3956.95,183.152,0,0,0,0,100,0),
(741210,49,3876.49,3949.71,181.731,0,0,0,0,100,0),
(741210,50,3881.02,3941.55,180.448,0,0,0,0,100,0),
(741210,51,3887.2,3934.87,178.947,0,0,0,0,100,0),
(741210,52,3892.99,3928.62,177.857,0,0,0,0,100,0),
(741210,53,3900.59,3925.31,176.932,0,0,0,0,100,0),
(741210,54,3909.15,3921.57,176.492,0,0,0,0,100,0),
(741210,55,3917.1,3915.85,176.134,0,0,0,0,100,0),
(741210,56,3925.05,3910.13,176.002,0,0,0,0,100,0),
(741210,57,3932.06,3905.08,175.882,0,0,0,0,100,0),
(741210,58,3938.41,3900.52,175.631,0,0,0,0,100,0),
(741210,59,3944.64,3895.07,175.393,0,0,0,0,100,0),
(741210,60,3951.94,3888.7,174.904,0,0,0,0,100,0),
(741210,61,3959.41,3882.17,173.881,0,0,0,0,100,0),
(741210,62,3963.31,3875.81,172.531,0,0,0,0,100,0),
(741210,63,3968.14,3867.95,170.353,0,0,0,0,100,0),
(741210,64,3973.2,3859.69,167.985,0,0,0,0,100,0),
(741210,65,3973.35,3853.51,166.382,0,0,0,0,100,0),
(741210,66,3973.57,3844.53,164.045,0,0,0,0,100,0),
(741210,67,3968.2,3838.71,161.466,0,0,0,0,100,0),
(741210,68,3962.58,3832.62,158.899,0,0,0,0,100,0),
(741210,69,3954.65,3832.93,155.514,0,0,0,0,100,0),
(741210,70,3946.19,3833.26,151.374,0,0,0,0,100,0),
(741210,71,3935.58,3833.67,145.567,0,0,0,0,100,0),
(741210,72,3925.67,3834.05,139.882,0,0,0,0,100,0),
(741210,73,3916.7,3834.39,134.67,0,0,0,0,100,0),
(741210,74,3906.37,3834.79,128.739,0,0,0,0,100,0),
(741210,75,3898.99,3828.53,124.026,0,0,0,0,100,0),
(741210,76,3899.03,3820.45,122.148,0,0,0,0,100,0),
(741210,77,3899.07,3810.66,120.17,0,0,0,0,100,0),
(741210,78,3899.11,3801.56,118.999,0,0,0,0,100,0),
(741210,79,3899.16,3790.71,118.568,0,0,0,0,100,0),
(741210,80,3899.21,3780.79,118.727,0,0,0,0,100,0),
(741210,81,3899.26,3770.76,118.873,0,0,0,0,100,0),
(741210,82,3899.3,3762.12,118.456,0,0,0,0,100,0),
(741210,83,3899.34,3752.55,117.711,0,0,0,0,100,0),
(741210,84,3902.29,3744.56,116.78,0,0,0,0,100,0),
(741210,85,3905.79,3735.12,115.134,0,0,0,0,100,0),
(741210,86,3909.63,3724.73,112.964,5.60845,10000,0,0,100,0),
(741210,87,3905.79,3735.12,115.134,0,0,0,0,100,0),
(741210,88,3902.29,3744.56,116.78,0,0,0,0,100,0),
(741210,89,3899.34,3752.55,117.711,0,0,0,0,100,0),
(741210,90,3899.3,3762.12,118.456,0,0,0,0,100,0),
(741210,91,3899.26,3770.76,118.873,0,0,0,0,100,0),
(741210,92,3899.21,3780.79,118.727,0,0,0,0,100,0),
(741210,93,3895.32,3783.13,118.432,0,0,0,0,100,0),
(741210,94,3888.12,3787.46,117.452,0,0,0,0,100,0),
(741210,95,3882.34,3790.94,116.722,0,0,0,0,100,0),
(741210,96,3876.14,3794.66,115.307,0,0,0,0,100,0),
(741210,97,3869.54,3798.63,113.748,0,0,0,0,100,0),
(741210,98,3866.04,3804.14,112.108,0,0,0,0,100,0),
(741210,99,3861.84,3810.74,110.287,0,0,0,0,100,0),
(741210,100,3857.02,3818.32,108.221,0,0,0,0,100,0),
(741210,101,3852.89,3824.82,106.797,0,0,0,0,100,0),
(741210,102,3849.83,3829.63,105.885,0,0,0,0,100,0),
(741210,103,3843.87,3831.99,104.747,0,0,0,0,100,0),
(741210,104,3836.6,3834.86,103.689,0,0,0,0,100,0),
(741210,105,3831.5,3836.88,103.458,0,0,0,0,100,0),
(741210,106,3826.91,3841.99,103.297,0,0,0,0,100,0),
(741210,107,3821.07,3848.5,103.379,0,0,0,0,100,0),
(741210,108,3816.09,3854.06,103.756,0,0,0,0,100,0),
(741210,109,3813.98,3860.98,104.276,0,0,0,0,100,0),
(741210,110,3811.47,3869.25,104.76,0,0,0,0,100,0),
(741210,111,3809.64,3875.28,105.233,0,0,0,0,100,0),
(741210,112,3804.22,3879.89,105.713,0,0,0,0,100,0),
(741210,113,3798.63,3884.66,106.186,0,0,0,0,100,0),
(741210,114,3792.32,3890.04,106.825,0,0,0,0,100,0),
(741210,115,3790.71,3897.21,107.512,0,0,0,0,100,0),
(741210,116,3789.11,3904.39,108.42,0,0,0,0,100,0),
(741210,117,3791.01,3911.36,109.429,0,0,0,0,100,0),
(741210,118,3793.5,3920.48,110.659,0,0,0,0,100,0),
(741210,119,3795.77,3928.81,111.764,0,0,0,0,100,0),
(741210,120,3798.01,3937.03,112.784,0,0,0,0,100,0),
(741210,121,3797.18,3944.79,113.494,0,0,0,0,100,0),
(741210,122,3796.33,3952.68,114.013,0,0,0,0,100,0),
(741210,123,3792.98,3961.76,114.216,0,0,0,0,100,0),
(741210,124,3789.7,3970.62,114.509,0,0,0,0,100,0),
(741210,125,3789.32,3979.14,114.935,0,0,0,0,100,0),
(741210,126,3788.99,3986.72,115.815,0,0,0,0,100,0),
(741210,127,3791.87,3994.74,117.416,0,0,0,0,100,0),
(741210,128,3795.54,4004.94,119.478,0,5000,0,0,100,0),
(741210,129,3791.87,3994.74,117.416,0,0,0,0,100,0),
(741210,130,3788.99,3986.72,115.815,0,0,0,0,100,0),
(741210,131,3789.32,3979.14,114.935,0,0,0,0,100,0),
(741210,132,3789.7,3970.62,114.509,0,0,0,0,100,0),
(741210,133,3792.98,3961.76,114.216,0,0,0,0,100,0),
(741210,134,3796.33,3952.68,114.013,0,0,0,0,100,0),
(741210,135,3797.18,3944.79,113.494,0,0,0,0,100,0),
(741210,136,3798.01,3937.03,112.784,0,0,0,0,100,0),
(741210,137,3795.77,3928.81,111.764,0,0,0,0,100,0),
(741210,138,3793.5,3920.48,110.659,0,0,0,0,100,0),
(741210,139,3791.01,3911.36,109.429,0,0,0,0,100,0),
(741210,140,3789.11,3904.39,108.42,0,0,0,0,100,0),
(741210,141,3790.71,3897.21,107.512,0,0,0,0,100,0),
(741210,142,3792.32,3890.04,106.825,0,0,0,0,100,0),
(741210,143,3798.63,3884.66,106.186,0,0,0,0,100,0),
(741210,144,3804.22,3879.89,105.713,0,0,0,0,100,0),
(741210,145,3809.64,3875.28,105.233,0,0,0,0,100,0),
(741210,146,3811.47,3869.25,104.76,0,0,0,0,100,0),
(741210,147,3813.98,3860.98,104.276,0,0,0,0,100,0),
(741210,148,3816.09,3854.06,103.756,0,0,0,0,100,0),
(741210,149,3821.07,3848.5,103.379,0,0,0,0,100,0),
(741210,150,3826.91,3841.99,103.297,0,0,0,0,100,0),
(741210,151,3831.5,3836.88,103.458,0,0,0,0,100,0),
(741210,152,3836.6,3834.86,103.689,0,0,0,0,100,0),
(741210,153,3843.87,3831.99,104.747,0,0,0,0,100,0),
(741210,154,3849.83,3829.63,105.885,0,0,0,0,100,0),
(741210,155,3852.89,3824.82,106.797,0,0,0,0,100,0),
(741210,156,3857.02,3818.32,108.221,0,0,0,0,100,0),
(741210,157,3861.84,3810.74,110.287,0,0,0,0,100,0),
(741210,158,3866.04,3804.14,112.108,0,0,0,0,100,0),
(741210,159,3869.54,3798.63,113.748,0,0,0,0,100,0),
(741210,160,3876.14,3794.66,115.307,0,0,0,0,100,0),
(741210,161,3882.34,3790.94,116.722,0,0,0,0,100,0),
(741210,162,3888.12,3787.46,117.452,0,0,0,0,100,0),
(741210,163,3895.46,3787.74,118.24,0,0,0,0,100,0),
(741210,164,3899.16,3790.71,118.568,0,0,0,0,100,0),
(741210,165,3899.11,3801.56,118.999,0,0,0,0,100,0),
(741210,166,3899.07,3810.66,120.17,0,0,0,0,100,0),
(741210,167,3899.03,3820.45,122.148,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
