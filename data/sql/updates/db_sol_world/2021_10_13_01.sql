-- DB update 2021_10_13_00 -> 2021_10_13_01
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_10_13_00';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_10_13_00 2021_10_13_01 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1634119384809675235'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1634119384809675235');

-- Arthas' Tears
DELETE FROM `creature_loot_template` WHERE `Item` = 8836 AND `Entry` IN (
1783,1784,1787,1789,1791,1793,1794,1795,1796,1801,1809,1815,1816,1817,1821,1822,
1824,1827,1831,1833,1834,1835,1845,1852,1883,2655,2656,4474,4475,4494,5277,7086,
7097,7105,7107,7108,7109,7110,7111,7112,7113,7115,7125,7135,7137,7154,7155,7328,
7329,7334,7337,7341,7342,7344,7346,7347,7348,7352,7353,8523,8524,8529,8530,8534,
8535,8540,8541,8543,8596,8597,8598,8600,8601,8602,8603,8605,8607,8956,8957,8958,
8959,8960,8961,9878,9879,10608,11141,11897,14342,14564);

-- Blindweed
DELETE FROM `creature_loot_template` WHERE `Item` = 8839 AND `Entry` IN (
740,741,743,744,745,755,757,759,760,764,765,766,767,768,769,858,
862,1787,1789,1791,1793,1794,1795,1804,1824,1833,1834,1845,2505,2642,2646,2647,
2655,2659,4466,4644,5224,5259,5333,5472,5474,5476,5477,5622,5649,5975,5976,6129,
6188,6190,6193,6198,6199,6200,6201,6202,6500,6501,6505,6506,6507,6513,6514,6516,
6520,6551,6553,6555,6559,6649,6733,7026,7027,7028,7033,7040,7041,7042,7043,7055,
7092,7153,7154,7269,7438,7439,7440,7450,7456,7524,7855,7856,7885,7886,8529,8531,
8541,8542,8544,8546,8547,8550,8558,8561,8637,9097,9098,9163,9164,9167,9176,9197,
9200,9241,9257,9258,9259,9262,9264,9266,9447,9477,9547,9583,9681,9683,9692,9693,
9696,9778,9817,9818,9819,9878,10371,10382,10398,10400,10405,10406,10407,10408,10409,10411,
10413,10424,10447,10463,10464,10469,10637,10678,10827,11075,11352,11368,11371,11454,11476,11658,
11665,11744,11783,11785,11789,11791,11880,12206,12207,12216,12217,12223,12250,12900,13142,13323,
13599,14370,14748,15325,16383);

-- Sungrass
DELETE FROM `creature_loot_template` WHERE `Item` = 8838 AND `Entry` IN (
1783,1784,1785,1787,1789,1791,1794,1795,1796,1802,1809,1815,1816,1817,1821,1822,
1824,1827,1831,1832,1833,1834,1835,1845,1883,1884,1909,2235,2639,2642,2643,2645,
2646,2649,2650,2651,2655,2656,2657,2658,2659,2680,2686,2691,2759,2860,2923,2924,
2925,2926,2927,2928,2929,4466,4467,4474,4475,4493,4494,4844,5229,5232,5237,5239,
5245,5246,5249,5251,5253,5254,5255,5258,5259,5260,5262,5263,5267,5268,5270,5272,
5274,5276,5278,5286,5287,5288,5300,5304,5305,5306,5307,5308,5357,5358,5461,5472,
5474,5854,5977,5978,5981,5982,5984,5985,5988,5990,5991,5992,5993,6004,6005,6006,
6010,6011,6116,6117,6118,6125,6126,6131,6137,6146,6147,6148,6185,6188,6189,6190,
6193,6194,6198,6199,6200,6201,6202,6232,6375,6377,6378,6379,6380,6466,6498,6499,
6500,6501,6502,6503,6504,6505,6506,6508,6513,6516,6520,6521,6551,6552,6553,6555,
6556,6557,6559,7025,7026,7027,7028,7029,7033,7034,7037,7038,7039,7040,7041,7042,
7043,7044,7045,7047,7048,7097,7098,7099,7105,7106,7107,7108,7109,7111,7153,7154,
7155,7157,7158,7269,7438,7439,7440,7441,7450,7524,7584,7668,7726,7855,7856,7857,
7858,7885,7886,8095,8298,8318,8319,8524,8526,8527,8531,8532,8535,8539,8540,8541,
8542,8543,8546,8550,8557,8558,8560,8561,8596,8597,8598,8600,8601,8602,8603,8605,
8675,8759,8761,8762,8763,8764,8766,8892,8899,8913,8956,8957,8958,8960,8961,8981,
9045,9097,9162,9163,9164,9165,9166,9167,9197,9198,9240,9259,9261,9263,9268,9269,
9477,9583,9690,9691,9692,9693,9694,9695,9696,9716,9818,10083,10119,10381,10382,10394,
10398,10399,10400,10405,10406,10408,10409,10411,10412,10463,10464,10469,10485,10487,10488,10602,
10605,10608,10996,11053,11338,11350,11351,11352,11353,11361,11368,11370,11440,11443,11448,11450,
11477,11613,11665,11722,11735,11736,11737,11738,11739,11740,11741,11744,11745,11790,11791,11793,
11831,11880,11883,11898,12206,12216,12220,12250,12263,12418,14340,14343,14462,14532,14750,14821,
14880,15200,15307,15338,16135,16141,16299,17070,24819);

-- Mageroyal
DELETE FROM `creature_loot_template` WHERE `Item` = 785 AND `Entry` IN (
202,203,205,206,210,212,213,215,217,345,391,423,424,426,428,429,
430,431,432,433,434,435,436,437,440,441,442,445,446,449,450,452,
454,458,467,481,485,500,504,505,513,515,517,518,533,539,544,545,
547,548,565,568,580,589,590,594,615,619,625,628,634,641,657,712,
731,772,824,830,832,833,834,889,891,892,898,909,910,920,923,930,
948,1706,1707,1708,1711,1715,1716,1727,1729,1765,1766,1767,1768,1769,1770,1773,
1778,1779,1780,1782,1787,1791,1797,1806,1867,1868,1869,1870,1891,1896,1908,1912,
1923,1924,1939,1940,1943,1944,1995,1998,1999,2000,2007,2009,2012,2013,2033,2042,
2043,2069,2070,2071,2089,2090,2152,2156,2157,2158,2160,2163,2164,2165,2169,2172,
2175,2178,2180,2181,2182,2183,2185,2189,2192,2202,2206,2231,2232,2233,2235,2236,
2237,2267,2268,2270,2321,2323,2336,2338,2339,2349,2350,2351,2354,2356,2360,2374,
2375,2384,2387,2408,2427,2505,2529,2650,2655,2656,2726,3100,3111,3112,3115,3116,
3117,3118,3122,3126,3130,3131,3197,3198,3203,3234,3235,3238,3239,3240,3241,3242,
3244,3245,3246,3247,3248,3249,3250,3251,3252,3254,3255,3256,3258,3260,3261,3263,
3265,3271,3272,3273,3274,3275,3276,3277,3278,3280,3282,3283,3285,3286,3376,3379,
3381,3382,3385,3395,3396,3397,3415,3424,3425,3426,3456,3457,3458,3459,3461,3463,
3466,3473,3474,3503,3577,3630,3631,3632,3633,3634,3638,3641,3655,3662,3715,3727,
3728,3732,3737,3739,3740,3743,3748,3750,3767,3770,3771,3773,3809,3810,3811,3815,
3819,3820,3821,3823,3824,3825,3840,3844,3853,3859,3862,3863,3864,3866,3873,3875,
3917,3921,3928,3941,3947,3988,3989,3991,3999,4004,4007,4012,4014,4016,4017,4018,
4019,4023,4027,4041,4052,4053,4057,4061,4064,4065,4067,4073,4095,4096,4097,4099,
4100,4101,4104,4107,4109,4127,4128,4129,4306,4316,4438,4462,4463,4468,4518,4525,
4531,4798,4799,4812,5048,5056,5225,5232,5259,5262,5336,5422,5453,5646,5649,5755,
5756,5780,5781,5834,5837,5858,5863,6167,6211,6224,6329,6505,6506,6507,6513,6514,
6516,6520,6521,6551,6552,6555,6556,6557,6559,7034,7048,7051,7052,7053,7067,7092,
7107,7108,7113,7132,7154,7157,7233,7349,7441,7459,7668,7849,7957,8311,8319,8526,
8540,8543,8566,8762,8895,8897,8911,8957,9163,9164,9165,9166,9167,9318,9336,9477,
10157,10158,10159,10160,10221,10318,10321,10371,10405,10417,10463,10487,10489,11053,11078,11351,
11723,11736,11737,11746,11883,11910,11911,11912,12076,12206,12207,12432,12474,12676,12856,12902,
13996,14445,15168,15247,15262,15307,15325,15449,15758,15810,16135,24818);

UPDATE `creature_template` SET `lootid` = 0 WHERE `entry` IN (10321,7957);

-- Wildvine
DELETE FROM `creature_loot_template` WHERE `Item` = 8153 AND `Entry` IN (
417,587,701,1907,2655,2680,2735,2739,2740,3712,4469,4846,5232,5234,5236,5238,
5239,5240,5241,5331,5332,5334,5335,5336,5363,5364,5423,5469,5471,5473,5474,5616,
5617,5618,5646,5647,6116,6126,6190,6193,6195,6202,6375,6377,7864,8198,8608,11442,
11448,11450,11830,13022,14351,14487);

-- Purple Lotus
DELETE FROM `creature_loot_template` WHERE `Item` = 8831 AND `Entry` IN (
587,588,595,597,667,669,670,671,672,679,681,684,686,694,696,697,
701,710,736,751,772,780,781,782,783,784,818,905,1787,1789,1795,1796,
1804,1806,1808,1833,1884,1907,2530,2541,2544,2640,2641,2642,2643,2644,2645,2646,
2647,2648,2649,2650,2651,2652,2653,2654,2655,2656,2680,2681,2686,2719,2727,2731,
2735,2739,2740,2928,2929,3712,3752,3762,3767,3770,3823,3924,4459,4460,4461,4465,
4466,4467,4468,4469,4493,4494,4506,4844,4846,5232,5234,5236,5238,5239,5240,5241,
5262,5268,5305,5307,5331,5332,5333,5334,5335,5336,5337,5362,5363,5364,5366,5420,
5423,5425,5465,5469,5470,5471,5472,5473,5474,5475,5615,5616,5617,5618,5623,5645,
5646,5647,5840,5844,5861,5975,6116,6117,6125,6126,6127,6129,6130,6131,6135,6136,
6148,6190,6193,6194,6195,6196,6199,6200,6201,6202,6375,6377,6513,7011,7012,7026,
7027,7028,7033,7040,7041,7043,7055,7078,7438,7439,7440,7442,7447,7450,7767,7855,
7856,7864,7995,8075,8198,8408,8419,8504,8528,8529,8539,8542,8544,8545,8546,8550,
8555,8558,8561,8566,8581,8608,8762,8763,9096,9097,9166,9197,9216,9241,9257,9259,
9261,9262,9263,9264,9265,9269,9416,9447,9449,9583,9693,9817,9818,9819,10083,10381,
10382,10390,10398,10399,10400,10405,10406,10463,10464,10647,10943,11339,11350,11352,11353,11360,
11361,11368,11371,11372,11374,11387,11440,11442,11443,11448,11451,11457,11473,11476,11477,11791,
11830,11831,12217,12222,12418,14370,14487,14532,14757,14821,15043,15111);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
