-- DB update 2021_07_09_02 -> 2021_07_13_00
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_07_09_02';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_07_09_02 2021_07_13_00 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1626209362451848039'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1626209362451848039');

DELETE FROM `creature_text` WHERE `CreatureId` = 12818;
INSERT INTO `creature_text` (`CreatureID`, `GroupID`, `ID`, `Text`, `Type`, `Language`, `Probability`, `Emote`, `Duration`, `Sound`, `BroadcastTextId`, `TextRange`, `comment`)
VALUES
(12818,0,0,'Here we go...',12,0,100,0,0,0,864,0,'SAY_RUUL_SNOWHOOF_GO'),
(12818,1,0,'Thank you for freeing me.  Speak with my sister in Splintertree.  I... I must find a place to rest...',12,0,100,2,0,0,8265,0,'SAY_RUUL_SNOWHOOF_FREE');

UPDATE `creature_addon` SET `auras` = '' WHERE `guid` = 32333;

DELETE FROM `script_waypoint` WHERE `entry` = 12818;
INSERT INTO `script_waypoint` (`entry`, `pointid`, `location_x`, `location_y`, `location_z`, `waittime`, `point_comment`)
VALUES
(12818,0,3347.25,-694.701,159.926,0,NULL),
(12818,1,3341.53,-694.726,161.125,4000,'Say Line 0'),
(12818,2,3338.35,-686.088,163.444,0,NULL),
(12818,3,3352.74,-677.722,162.316,0,NULL),
(12818,4,3370.29,-669.367,160.751,0,NULL),
(12818,5,3381.48,-659.449,162.545,0,NULL),
(12818,6,3389.55,-648.5,163.652,0,NULL),
(12818,7,3396.65,-641.509,164.216,0,NULL),
(12818,8,3410.5,-634.3,165.773,0,NULL),
(12818,9,3418.46,-631.792,166.478,0,NULL),
(12818,10,3429.5,-631.589,166.921,0,NULL),
(12818,11,3434.95,-629.245,168.334,0,NULL),
(12818,12,3438.93,-618.503,171.503,0,NULL),
(12818,13,3444.22,-609.294,173.078,1000,'Ambush 1'),
(12818,14,3460.51,-593.794,174.342,0,NULL),
(12818,15,3480.28,-578.21,176.652,0,NULL),
(12818,16,3492.91,-562.335,181.396,0,NULL),
(12818,17,3495.23,-550.978,184.652,0,NULL),
(12818,18,3496.25,-529.194,188.172,0,NULL),
(12818,19,3497.62,-510.411,188.345,1000,'Ambush 2'),
(12818,20,3498.5,-497.788,185.806,0,NULL),
(12818,21,3484.22,-489.718,182.39,0,NULL),
(12818,22,3475.85,-486.69,179.854,0,NULL),
(12818,23,3456.1,-479.545,170.831,0,NULL),
(12818,24,3447.16,-472.674,168.404,0,NULL),
(12818,25,3431.75,-460.84,160.697,0,NULL),
(12818,26,3418.67,-450.872,156.679,0,NULL),
(12818,27,3400.58,-437.078,152.118,0,NULL),
(12818,28,3383.33,-423.934,148.55,0,NULL),
(12818,29,3370.04,-428.759,150.508,0,NULL),
(12818,30,3358.64,-432.898,151.587,0,NULL),
(12818,31,3345.93,-437.511,151.764,0,NULL),
(12818,32,3326.66,-444.508,150.533,0,NULL),
(12818,33,3310.56,-450.354,150.207,0,NULL),
(12818,34,3304.71,-464.916,151.976,0,NULL),
(12818,35,3297.94,-481.749,152.052,0,NULL),
(12818,36,3292.7,-494.765,153.289,0,NULL),
(12818,37,3287.16,-508.566,153.418,0,NULL),
(12818,38,3281.33,-523.056,155.155,0,NULL),
(12818,39,3265.45,-521.415,152.904,0,NULL),
(12818,40,3246.23,-519.428,149.943,0,NULL),
(12818,41,3236.17,-518.389,148.701,1000,'Shapechange / Reward Quest'),
(12818,42,3236.17,-518.389,148.701,1000,'Face Player'),
(12818,43,3236.17,-518.389,148.701,10000,'Say Line 1'),
(12818,44,3236.17,-518.389,148.701,2000,'Shapechange'),
(12818,45,3211.63,-510.127,144.619,0,NULL),
(12818,46,3184.15,-500.873,142.185,0,NULL);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
