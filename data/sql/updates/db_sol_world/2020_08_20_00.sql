-- DB update 2020_08_18_00 -> 2020_08_20_00
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2020_08_18_00';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2020_08_18_00 2020_08_20_00 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1597877859360329100'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1597877859360329100');

UPDATE `creature` SET `MovementType` = 0 WHERE `guid` = 3256;
UPDATE `creature_addon` SET `path_id` = 0 WHERE `guid` = 3256;
DELETE FROM `waypoint_data` WHERE `id` = 32560;
DELETE FROM `creature_formations` WHERE `leaderGUID` = 3254;
INSERT INTO `creature_formations` (`leaderGUID`, `memberGUID`, `dist`, `angle`, `groupAI`)
VALUES
(3254,3254,0,0,2),
(3254,3256,3,270,2);

UPDATE `creature_template` SET `AIName` = 'SmartAI' WHERE `entry` = 10676;
DELETE FROM `smart_scripts` WHERE `entryorguid` = 10676 AND `source_type` = 0;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(10676,0,0,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Raider Jhash - On Respawn - Set Active On');

DELETE FROM `waypoint_data` WHERE `id` = 32540;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(32540,1,285.396,-4746.17,9.48428,0,0,0,0,100,0),
(32540,2,272.08,-4747.94,9.78259,0,0,0,0,100,0),
(32540,3,258.411,-4747.67,10.0987,0,0,0,0,100,0),
(32540,4,241.189,-4739.18,10.1022,0,0,0,0,100,0),
(32540,5,223.698,-4745.11,10.1022,0,0,0,0,100,0),
(32540,6,207.872,-4748.06,10.6033,0,0,0,0,100,0),
(32540,7,192.269,-4750.57,11.1131,0,0,0,0,100,0),
(32540,8,180.128,-4753.4,11.4966,0,0,0,0,100,0),
(32540,9,169.198,-4758.37,11.5876,0,0,0,0,100,0),
(32540,10,152.776,-4765.23,11.8186,0,0,0,0,100,0),
(32540,11,135.878,-4772.29,11.967,0,0,0,0,100,0),
(32540,12,121.393,-4762.76,13.4479,0,0,0,0,100,0),
(32540,13,106.618,-4752.63,15.7554,0,0,0,0,100,0),
(32540,14,90.4136,-4744.55,17.2587,0,0,0,0,100,0),
(32540,15,75.4162,-4744.43,18.2508,0,0,0,0,100,0),
(32540,16,60.7802,-4744.4,19.4248,0,0,0,0,100,0),
(32540,17,41.2531,-4745.39,20.9696,0,0,0,0,100,0),
(32540,18,27.5351,-4746.9,21.9052,0,0,0,0,100,0),
(32540,19,12.8472,-4750.3,21.9785,0,0,0,0,100,0),
(32540,20,-4.67062,-4750.97,21.7306,0,0,0,0,100,0),
(32540,21,-22.9689,-4751.51,21.4648,0,0,0,0,100,0),
(32540,22,-35.8121,-4753.77,21.1467,0,0,0,0,100,0),
(32540,23,-50.0948,-4751.86,21.0281,0,0,0,0,100,0),
(32540,24,-66.5941,-4751.49,20.743,0,0,0,0,100,0),
(32540,25,-84.2163,-4751.13,20.995,0,0,0,0,100,0),
(32540,26,-103.175,-4751.07,21.6064,0,0,0,0,100,0),
(32540,27,-122.308,-4757.27,22.1991,0,0,0,0,100,0),
(32540,28,-143.12,-4762.82,22.8432,0,0,0,0,100,0),
(32540,29,-162.708,-4768.6,23.2985,0,0,0,0,100,0),
(32540,30,-177.954,-4774.1,23.5179,0,0,0,0,100,0),
(32540,31,-199.241,-4781.43,23.8197,0,0,0,0,100,0),
(32540,32,-222.353,-4788.78,24.9537,0,0,0,0,100,0),
(32540,33,-248.203,-4796.37,26.3034,0,0,0,0,100,0),
(32540,34,-272.99,-4802.43,28.3927,0,0,0,0,100,0),
(32540,35,-295.257,-4807.15,29.4444,0,0,0,0,100,0),
(32540,36,-324.35,-4812.95,30.6759,0,0,0,0,100,0),
(32540,37,-346.253,-4817.59,31.6167,0,0,0,0,100,0),
(32540,38,-366.055,-4819.39,32.2942,0,0,0,0,100,0),
(32540,39,-380.037,-4812.08,32.4437,0,0,0,0,100,0),
(32540,40,-393.656,-4805.13,32.3298,0,0,0,0,100,0),
(32540,41,-408.389,-4798.13,32.3008,0,0,0,0,100,0),
(32540,42,-427.748,-4788.85,32.539,0,0,0,0,100,0),
(32540,43,-440.697,-4782.7,32.6233,0,0,0,0,100,0),
(32540,44,-464.998,-4778.58,32.4097,0,0,0,0,100,0),
(32540,45,-491.962,-4773.69,32.209,0,0,0,0,100,0),
(32540,46,-509.242,-4764.36,32.4704,0,0,0,0,100,0),
(32540,47,-529.828,-4752.62,32.9936,0,0,0,0,100,0),
(32540,48,-545.507,-4745.15,33.2154,0,0,0,0,100,0),
(32540,49,-563.433,-4736.64,33.3856,0,0,0,0,100,0),
(32540,50,-577.046,-4727.71,34.0213,0,0,0,0,100,0),
(32540,51,-592.883,-4716.38,34.8526,0,0,0,0,100,0),
(32540,52,-599.385,-4705.59,35.857,0,0,0,0,100,0),
(32540,53,-607.065,-4689.99,37.8701,0,0,0,0,100,0),
(32540,54,-608.764,-4674.16,38.6431,0,0,0,0,100,0),
(32540,55,-609.691,-4657.4,39.2716,0,0,0,0,100,0),
(32540,56,-609.619,-4640.71,39.8484,0,0,0,0,100,0),
(32540,57,-609.378,-4621.92,40.5397,0,0,0,0,100,0),
(32540,58,-606.536,-4598.99,41.3401,0,0,0,0,100,0),
(32540,59,-601.376,-4580.36,40.6588,0,0,0,0,100,0),
(32540,60,-617.215,-4570.28,41.4736,0,0,0,0,100,0),
(32540,61,-635.167,-4558.02,41.4149,0,0,0,0,100,0),
(32540,62,-634.597,-4545.02,41.3378,0,0,0,0,100,0),
(32540,63,-629.829,-4535.2,41.3885,0,0,0,0,100,0),
(32540,64,-614.646,-4531.45,41.4483,0,0,0,0,100,0),
(32540,65,-600.598,-4527.37,41.357,0,0,0,0,100,0),
(32540,66,-585.511,-4515.24,42.3304,0,0,0,0,100,0),
(32540,67,-578.475,-4505.81,42.5823,0,0,0,0,100,0),
(32540,68,-573.702,-4497.27,42.566,0,0,0,0,100,0),
(32540,69,-573.773,-4476.88,42.4267,0,0,0,0,100,0),
(32540,70,-581.379,-4462.03,42.0083,0,0,0,0,100,0),
(32540,71,-591.111,-4443.99,41.413,0,0,0,0,100,0),
(32540,72,-596.079,-4430.35,42.1127,0,0,0,0,100,0),
(32540,73,-600.791,-4416.3,43.1194,0,0,0,0,100,0),
(32540,74,-605.458,-4401.06,43.2108,0,0,0,0,100,0),
(32540,75,-605.437,-4386.19,41.2672,0,0,0,0,100,0),
(32540,76,-604.78,-4370.58,39.3396,0,0,0,0,100,0),
(32540,77,-604.053,-4354.02,38.3083,0,0,0,0,100,0),
(32540,78,-603.13,-4335.39,37.614,0,0,0,0,100,0),
(32540,79,-602.266,-4320.58,37.7376,0,0,0,0,100,0),
(32540,80,-603.376,-4304.53,37.5972,0,0,0,0,100,0),
(32540,81,-604.331,-4289.5,37.8264,0,0,0,0,100,0),
(32540,82,-616.198,-4282.17,37.9677,0,0,0,0,100,0),
(32540,83,-633.136,-4264.42,38.415,0,0,0,0,100,0),
(32540,84,-632.159,-4240,38.1508,0,0,0,0,100,0),
(32540,85,-619.995,-4221.7,38.1341,0,0,0,0,100,0),
(32540,86,-594.357,-4222.88,38.1656,0,0,0,0,100,0),
(32540,87,-571.29,-4244.38,37.9757,0,0,0,0,100,0),
(32540,88,-574.484,-4273.59,37.933,0,0,0,0,100,0),
(32540,89,-585.186,-4284.12,38.149,0,0,0,0,100,0),
(32540,90,-595.473,-4293.64,37.826,0,0,0,0,100,0),
(32540,91,-595.791,-4307.44,37.5988,0,0,0,0,100,0),
(32540,92,-596.434,-4322.7,37.599,0,0,0,0,100,0),
(32540,93,-596.185,-4343,37.8774,0,0,0,0,100,0),
(32540,94,-595.453,-4365.47,39.1718,0,0,0,0,100,0),
(32540,95,-597.521,-4379.17,40.1204,0,0,0,0,100,0),
(32540,96,-597.424,-4392.32,42.1685,0,0,0,0,100,0),
(32540,97,-597.233,-4403.15,43.8014,0,0,0,0,100,0),
(32540,98,-595.365,-4415.06,43.5007,0,0,0,0,100,0),
(32540,99,-587.576,-4433.57,42.0538,0,0,0,0,100,0),
(32540,100,-583.028,-4444.58,41.748,0,0,0,0,100,0),
(32540,101,-576.401,-4457.3,41.999,0,0,0,0,100,0),
(32540,102,-569.998,-4471.68,42.3917,0,0,0,0,100,0),
(32540,103,-564.511,-4491.28,42.5658,0,0,0,0,100,0),
(32540,104,-570.483,-4506.3,42.5045,0,0,0,0,100,0),
(32540,105,-581.113,-4519.18,42.3995,0,0,0,0,100,0),
(32540,106,-583.38,-4527.43,41.4748,0,0,0,0,100,0),
(32540,107,-575.313,-4537.6,41.4315,0,0,0,0,100,0),
(32540,108,-560.402,-4548.63,41.691,0,0,0,0,100,0),
(32540,109,-550.708,-4556.57,41.5629,0,0,0,0,100,0),
(32540,110,-547.918,-4571.75,41.332,0,0,0,0,100,0),
(32540,111,-552.257,-4580.48,41.3323,0,0,0,0,100,0),
(32540,112,-563.775,-4581.39,41.3413,0,0,0,0,100,0),
(32540,113,-579.716,-4579.76,41.3685,0,0,0,0,100,0),
(32540,114,-594.226,-4581.03,40.7039,0,0,0,0,100,0),
(32540,115,-600.956,-4599.02,41.2305,0,0,0,0,100,0),
(32540,116,-601.297,-4617.44,40.6985,0,0,0,0,100,0),
(32540,117,-601.67,-4638.42,39.8888,0,0,0,0,100,0),
(32540,118,-601.875,-4656.05,39.2684,0,0,0,0,100,0),
(32540,119,-601.155,-4673.11,38.7015,0,0,0,0,100,0),
(32540,120,-596.808,-4687.49,37.452,0,0,0,0,100,0),
(32540,121,-589.222,-4701.14,35.5734,0,0,0,0,100,0),
(32540,122,-581.861,-4713.64,34.2112,0,0,0,0,100,0),
(32540,123,-571.585,-4723.29,34.1082,0,0,0,0,100,0),
(32540,124,-559.317,-4730.04,33.683,0,0,0,0,100,0),
(32540,125,-544.566,-4738.09,33.1724,0,0,0,0,100,0),
(32540,126,-531.563,-4744.83,32.96,0,0,0,0,100,0),
(32540,127,-518.368,-4751.4,32.6091,0,0,0,0,100,0),
(32540,128,-503.36,-4758.86,32.4242,0,0,0,0,100,0),
(32540,129,-485.632,-4765.38,32.146,0,0,0,0,100,0),
(32540,130,-465.81,-4769.84,32.4109,0,0,0,0,100,0),
(32540,131,-451.618,-4773.24,32.4109,0,0,0,0,100,0),
(32540,132,-438.361,-4776.46,32.529,0,0,0,0,100,0),
(32540,133,-423.144,-4783.31,32.2171,0,0,0,0,100,0),
(32540,134,-409.812,-4789.75,32.3453,0,0,0,0,100,0),
(32540,135,-390.938,-4799.23,32.4073,0,0,0,0,100,0),
(32540,136,-378.118,-4805.67,32.4369,0,0,0,0,100,0),
(32540,137,-366.39,-4810.46,32.4639,0,0,0,0,100,0),
(32540,138,-353.392,-4809.19,32.0502,0,0,0,0,100,0),
(32540,139,-339.341,-4807.62,31.3661,0,0,0,0,100,0),
(32540,140,-318.583,-4803.3,30.4177,0,0,0,0,100,0),
(32540,141,-298.214,-4799.11,29.6388,0,0,0,0,100,0),
(32540,142,-273.277,-4793.16,28.169,0,0,0,0,100,0),
(32540,143,-253.735,-4788.62,26.8208,0,0,0,0,100,0),
(32540,144,-245.122,-4786.73,25.8776,0,0,0,0,100,0),
(32540,145,-222.855,-4779.59,24.6605,0,0,0,0,100,0),
(32540,146,-195.231,-4770.47,23.6482,0,0,0,0,100,0),
(32540,147,-179.182,-4764.27,23.4095,0,0,0,0,100,0),
(32540,148,-163.58,-4758.37,23.1097,0,0,0,0,100,0),
(32540,149,-145.978,-4752.32,22.8914,0,0,0,0,100,0),
(32540,150,-123.16,-4747.5,22.5099,0,0,0,0,100,0),
(32540,151,-96.1512,-4743.51,21.6903,0,0,0,0,100,0),
(32540,152,-80.9791,-4743.87,20.8896,0,0,0,0,100,0),
(32540,153,-62.5571,-4744.45,20.8013,0,0,0,0,100,0),
(32540,154,-50.2155,-4745.55,20.9886,0,0,0,0,100,0),
(32540,155,-37.0375,-4747.19,21.1859,0,0,0,0,100,0),
(32540,156,-16.0106,-4745.21,21.5803,0,0,0,0,100,0),
(32540,157,5.36878,-4743.72,21.8896,0,0,0,0,100,0),
(32540,158,20.8923,-4741.47,22.102,0,0,0,0,100,0),
(32540,159,32.8426,-4740.5,21.5665,0,0,0,0,100,0),
(32540,160,49.5951,-4742.34,20.3724,0,0,0,0,100,0),
(32540,161,66.0986,-4740.87,18.8802,0,0,0,0,100,0),
(32540,162,81.2419,-4740.42,17.8416,0,0,0,0,100,0),
(32540,163,97.3291,-4741.05,16.8945,0,0,0,0,100,0),
(32540,164,110.29,-4748.68,15.4942,0,0,0,0,100,0),
(32540,165,123.158,-4756.01,13.7911,0,0,0,0,100,0),
(32540,166,138.562,-4765.19,12.2531,0,0,0,0,100,0),
(32540,167,153.035,-4759.09,11.918,0,0,0,0,100,0),
(32540,168,168.271,-4752.56,11.5733,0,0,0,0,100,0),
(32540,169,183.265,-4746.67,11.3841,0,0,0,0,100,0),
(32540,170,199.866,-4743.13,10.8616,0,0,0,0,100,0),
(32540,171,222.974,-4738.53,10.1022,0,0,0,0,100,0),
(32540,172,237.889,-4735.19,10.1022,0,0,0,0,100,0),
(32540,173,251.169,-4739.18,10.1022,0,0,0,0,100,0),
(32540,174,263.358,-4743.46,9.97667,0,0,0,0,100,0),
(32540,175,280.697,-4740.28,9.59579,0,0,0,0,100,0),
(32540,176,296.577,-4734.17,9.33033,0,0,0,0,100,0),
(32540,177,304.568,-4728.56,9.59793,0,0,0,0,100,0),
(32540,178,310.96,-4724.71,10.2726,0,0,0,0,100,0),
(32540,179,321.05,-4731.02,10.2638,0,0,0,0,100,0),
(32540,180,327.719,-4737.41,9.75441,0,0,0,0,100,0),
(32540,181,329.468,-4748.62,9.55966,0,0,0,0,100,0),
(32540,182,319.402,-4758.26,9.55966,0,0,0,0,100,0),
(32540,183,302.67,-4755.73,9.39901,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
