-- DB update 2022_04_05_00 -> 2022_04_05_01
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2022_04_05_00';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2022_04_05_00 2022_04_05_01 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1649178618130919122'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1649178618130919122');

-- Eastvale Peasants: Nighttime
DELETE FROM `creature` WHERE `guid` IN (3008959,3008960,3008961,3008962,3008963);
INSERT INTO `creature` (`guid`, `id`, `map`, `zoneId`, `areaId`, `spawnMask`, `phaseMask`, `modelid`, `equipment_id`, `position_x`, `position_y`, `position_z`, `orientation`, `spawntimesecs`, `wander_distance`, `curhealth`, `curmana`, `MovementType`, `npcflag`, `unit_flags`, `dynamicflags`, `VerifiedBuild`)
VALUES
(3008959,11328,0,0,0,1,1,0,1,-9512.16,-1284.19,44.3192,2.99859,180,5,120,0,1,0,0,0,0),
(3008960,11328,0,0,0,1,1,0,1,-9508.8,-1280.82,44.3053,6.00732,180,5,120,0,1,0,0,0,0),
(3008961,11328,0,0,0,1,1,0,1,-9485.32,-1313.51,41.17,0.755021,180,5,120,0,1,0,0,0,0),
(3008962,11328,0,0,0,1,1,0,1,-9537.28,-1293.01,43.8631,5.339,180,5,120,0,1,0,0,0,0),
(3008963,11328,0,0,0,1,1,0,1,-9525.18,-1335.78,47.1232,1.32562,180,5,120,0,1,0,0,0,0);

-- Eastvale Peasants: Daytime
UPDATE `creature` SET `position_x` = -9524.51, `position_y` = -1291.55, `position_z` = 44.0394, `orientation` = 5.41037, `wander_distance` = 0, `MovementType` = 2 WHERE `guid` = 81249;
UPDATE `creature` SET `position_x` = -9536.23, `position_y` = -1275.84, `position_z` = 43.4816, `orientation` = 2.86562, `wander_distance` = 0, `MovementType` = 2 WHERE `guid` = 81250;
UPDATE `creature` SET `position_x` = -9533.15, `position_y` = -1303.27, `position_z` = 44.5008, `orientation` = 5.06091, `wander_distance` = 0, `MovementType` = 2 WHERE `guid` = 81252;
UPDATE `creature` SET `position_x` = -9530.47, `position_y` = -1326.97, `position_z` = 46.4445, `orientation` = 2.51222, `wander_distance` = 0, `MovementType` = 2 WHERE `guid` = 81348;
UPDATE `creature` SET `position_x` = -9499.13, `position_y` = -1346.69, `position_z` = 45.1779, `orientation` = 4.17512, `wander_distance` = 0, `MovementType` = 2 WHERE `guid` = 81349;

-- Eastvale Lumberjacks
UPDATE `creature` SET `position_x` = -9399.64, `position_y` = -1336.57, `position_z` = 50.0274, `orientation` = 0.332456, `wander_distance` = 0, `MovementType` = 2 WHERE `guid` = 81257;
UPDATE `creature` SET `wander_distance` = 4 WHERE `guid` = 81345;
UPDATE `creature` SET `wander_distance` = 0, `MovementType` = 0 WHERE `guid` = 81259;

DELETE FROM `creature_addon` WHERE `guid` IN (81249,81250,81252,81348,81349,3008959,3008960,3008961,3008962,3008963,81257);
INSERT INTO `creature_addon` (`guid`, `path_id`, `mount`, `bytes1`, `bytes2`, `emote`, `isLarge`, `auras`)
VALUES
(81249,812490,0,0,1,0,0,NULL),
(81250,812500,0,0,1,0,0,NULL),
(81252,812520,0,0,1,0,0,NULL),
(81348,813480,0,0,1,0,0,NULL),
(81349,813490,0,0,1,0,0,NULL),
(3008959,0,0,0,0,0,0,NULL),
(3008960,0,0,0,0,0,0,NULL),
(3008961,0,0,0,0,0,0,NULL),
(3008962,0,0,0,0,0,0,NULL),
(3008963,0,0,0,0,0,0,NULL),
(81257,812570,0,0,0,0,0,NULL);

DELETE FROM `game_event_creature` WHERE `guid` IN (81249,81250,81252,81348,81349,3008959,3008960,3008961,3008962,3008963);
INSERT INTO `game_event_creature` (`eventEntry`, `guid`)
VALUES
(-25,81249),
(-25,81250),
(-25,81252),
(-25,81348),
(-25,81349),

(25,3008959),
(25,3008960),
(25,3008961),
(25,3008962),
(25,3008963);

UPDATE `creature_template` SET `AIName` = 'SmartAI' WHERE `entry` IN (11328,10616,1975);
DELETE FROM `smart_scripts` WHERE `source_type` = 0 AND `entryorguid` IN (11328,10616,1975);
DELETE FROM `smart_scripts` WHERE `source_type` = 9 AND `entryorguid` IN (1132800,197500);
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(11328,0,0,0,34,0,100,0,2,1,0,0,0,80,1132800,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Eastvale Peasant - On WP 2 Reached - Call Timed Action List'),
(11328,0,1,2,34,0,100,0,2,2,0,0,0,40,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Eastvale Peasant - On WP 3 Reached - Sheath Melee Weapon'),
(11328,0,2,0,61,0,100,0,0,0,0,0,0,17,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Eastvale Peasant - Linked - Set Emote State ''ONESHOT_NONE'''),
(11328,0,3,0,34,0,100,0,2,3,0,0,0,3,0,89,0,0,0,0,1,0,0,0,0,0,0,0,0,'Eastvale Peasant - On WP 4 Reached - Morph Model'),
(11328,0,4,5,34,0,100,0,2,12,0,0,0,3,0,308,0,0,0,0,1,0,0,0,0,0,0,0,0,'Eastvale Peasant - On WP 13 Reached - Morph Model'),
(11328,0,5,0,61,0,100,0,0,0,0,0,0,45,1,1,0,0,0,0,19,10616,0,0,0,0,0,0,0,'Eastvale Peasant - Linked - Set Data 1 1 (Supervisor Raelen)'),

(1132800,9,0,0,0,0,100,0,0,0,0,0,0,40,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Eastvale Peasant - On Script - Ready Melee Weapon'),
(1132800,9,1,0,0,0,100,0,0,0,0,0,0,17,234,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Eastvale Peasant - On Script - Set Emote State ''STATE_WORK_CHOPWOOD'''),
(1132800,9,2,0,0,0,100,0,25000,50000,0,0,0,239,5000,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Eastvale Peasant - On Script - Resume WP Path After 5 Seconds'),

(10616,0,0,0,38,0,100,0,1,1,180000,180000,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Supervisor Raelen - On Data Set 1 1 - Say Line 0'),

(1975,0,0,0,34,0,100,0,2,1,0,0,0,80,197500,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Eastvale Lumberjack - On WP 2 Reached - Call Timed Action List'),
(1975,0,1,0,34,0,100,0,2,5,0,0,0,80,197500,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Eastvale Lumberjack - On WP 6 Reached - Call Timed Action List'),

(197500,9,0,0,0,0,100,0,2000,2000,0,0,0,90,8,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Eastvale Lumberjack - On Script - Set ''UNIT_STAND_STATE_KNEEL'''),
(197500,9,1,0,0,0,100,0,10000,20000,0,0,0,239,2000,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Eastvale Lumberjack - On Script - Resume WP Path After 2 Seconds'),
(197500,9,2,0,0,0,100,0,0,0,0,0,0,91,8,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Eastvale Lumberjack - On Script - Remove ''UNIT_STAND_STATE_KNEEL''');

DELETE FROM `waypoint_data` WHERE `id` IN (812490,812500,812520,813480,813490,812570);
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `pathfinding`, `action`, `action_chance`, `wpguid`)
VALUES
-- Eastvale Peasant
(812490,1,-9524.51,-1291.55,44.0394,0,0,0,0,0,100,0),
(812490,2,-9524.51,-1291.55,44.0394,5.41037,60000,0,0,0,100,0),
(812490,3,-9524.51,-1291.55,44.0394,0,2000,0,0,0,100,0),
(812490,4,-9524.51,-1291.55,44.0394,0,0,0,0,0,100,0),
(812490,5,-9522.22,-1285.98,43.999,0,0,0,0,0,100,0),
(812490,6,-9516.16,-1285.55,44.1666,0,0,0,0,0,100,0),
(812490,7,-9509.87,-1285.11,43.9492,0,0,0,0,0,100,0),
(812490,8,-9503.8,-1286.28,43.0188,0,0,0,0,0,100,0),
(812490,9,-9497.15,-1287.55,42.1599,0,0,0,0,0,100,0),
(812490,10,-9490.17,-1288.89,41.4407,0,0,0,0,0,100,0),
(812490,11,-9483.4,-1290.19,41.1296,0,0,0,0,0,100,0),
(812490,12,-9476.98,-1291.43,40.968,0,0,0,0,0,100,0),
(812490,13,-9470.55,-1292.66,41.0005,0,2000,0,0,0,100,0),
(812490,14,-9476.98,-1291.43,40.968,0,0,0,0,0,100,0),
(812490,15,-9483.4,-1290.19,41.1296,0,0,0,0,0,100,0),
(812490,16,-9490.17,-1288.89,41.4407,0,0,0,0,0,100,0),
(812490,17,-9497.15,-1287.55,42.1599,0,0,0,0,0,100,0),
(812490,18,-9503.8,-1286.28,43.0188,0,0,0,0,0,100,0),
(812490,19,-9509.87,-1285.11,43.9492,0,0,0,0,0,100,0),
(812490,20,-9516.16,-1285.55,44.1666,0,0,0,0,0,100,0),
(812490,21,-9522.22,-1285.98,43.999,0,0,0,0,0,100,0),
-- Eastvale Peasant
(812500,1,-9536.23,-1275.84,43.4816,0,0,0,0,0,100,0),
(812500,2,-9536.23,-1275.84,43.4816,2.86562,60000,0,0,0,100,0),
(812500,3,-9536.23,-1275.84,43.4816,0,2000,0,0,0,100,0),
(812500,4,-9536.23,-1275.84,43.4816,0,0,0,0,0,100,0),
(812500,5,-9528.4,-1277.72,42.7057,0,0,0,0,0,100,0),
(812500,6,-9521.63,-1279.35,43.6886,0,0,0,0,0,100,0),
(812500,7,-9514.79,-1281,44.291,0,0,0,0,0,100,0),
(812500,8,-9510.02,-1282.15,44.3177,0,0,0,0,0,100,0),
(812500,9,-9504.05,-1283.59,43.7355,0,0,0,0,0,100,0),
(812500,10,-9497.01,-1285.28,42.7268,0,0,0,0,0,100,0),
(812500,11,-9488.5,-1287.33,41.7175,0,0,0,0,0,100,0),
(812500,12,-9479.2,-1289.57,41.2011,0,0,0,0,0,100,0),
(812500,13,-9470.22,-1291.73,40.9815,0,2000,0,0,0,100,0),
(812500,14,-9479.2,-1289.57,41.2011,0,0,0,0,0,100,0),
(812500,15,-9488.5,-1287.33,41.7175,0,0,0,0,0,100,0),
(812500,16,-9497.01,-1285.28,42.7268,0,0,0,0,0,100,0),
(812500,17,-9504.05,-1283.59,43.7355,0,0,0,0,0,100,0),
(812500,18,-9510.02,-1282.15,44.3177,0,0,0,0,0,100,0),
(812500,19,-9514.79,-1281,44.291,0,0,0,0,0,100,0),
(812500,20,-9521.63,-1279.35,43.6886,0,0,0,0,0,100,0),
(812500,21,-9528.4,-1277.72,42.7057,0,0,0,0,0,100,0),
-- Eastvale Peasant
(812520,1,-9533.15,-1303.27,44.5008,0,0,0,0,0,100,0),
(812520,2,-9533.15,-1303.27,44.5008,5.06091,60000,0,0,0,100,0),
(812520,3,-9533.15,-1303.27,44.5008,0,2000,0,0,0,100,0),
(812520,4,-9533.15,-1303.27,44.5008,0,0,0,0,0,100,0),
(812520,5,-9528.69,-1291.74,43.922,0,0,0,0,0,100,0),
(812520,6,-9524.05,-1279.76,43.4712,0,0,0,0,0,100,0),
(812520,7,-9517.76,-1279.33,44.0422,0,0,0,0,0,100,0),
(812520,8,-9511.48,-1278.91,44.368,0,0,0,0,0,100,0),
(812520,9,-9503.33,-1278.35,44.2292,0,0,0,0,0,100,0),
(812520,10,-9495.66,-1281.17,43.3584,0,0,0,0,0,100,0),
(812520,11,-9487.13,-1284.31,42.4249,0,0,0,0,0,100,0),
(812520,12,-9478.8,-1287.37,41.4742,0,0,0,0,0,100,0),
(812520,13,-9469.84,-1290.67,41.0102,0,2000,0,0,0,100,0),
(812520,14,-9478.8,-1287.37,41.4742,0,0,0,0,0,100,0),
(812520,15,-9487.13,-1284.31,42.4249,0,0,0,0,0,100,0),
(812520,16,-9495.66,-1281.17,43.3584,0,0,0,0,0,100,0),
(812520,17,-9503.33,-1278.35,44.2292,0,0,0,0,0,100,0),
(812520,18,-9511.48,-1278.91,44.368,0,0,0,0,0,100,0),
(812520,19,-9517.76,-1279.33,44.0422,0,0,0,0,0,100,0),
(812520,20,-9524.05,-1279.76,43.4712,0,0,0,0,0,100,0),
(812520,21,-9528.69,-1291.74,43.922,0,0,0,0,0,100,0),
-- Eastvale Peasant
(813480,1,-9530.47,-1326.97,46.4445,0,0,0,0,0,100,0),
(813480,2,-9530.47,-1326.97,46.4445,2.51222,60000,0,0,0,100,0),
(813480,3,-9530.47,-1326.97,46.4445,0,2000,0,0,0,100,0),
(813480,4,-9530.47,-1326.97,46.4445,0,0,0,0,0,100,0),
(813480,5,-9522.18,-1330.72,46.1604,0,0,0,0,0,100,0),
(813480,6,-9514.64,-1334.13,45.3719,0,0,0,0,0,100,0),
(813480,7,-9506.38,-1330.04,43.6539,0,0,0,0,0,100,0),
(813480,8,-9498.11,-1325.95,41.9191,0,0,0,0,0,100,0),
(813480,9,-9488.83,-1317.23,40.4863,0,0,0,0,0,100,0),
(813480,10,-9480.95,-1309.83,41.7995,0,0,0,0,0,100,0),
(813480,11,-9476.09,-1305.25,42.416,0,0,0,0,0,100,0),
(813480,12,-9471.23,-1300.68,41.9268,0,0,0,0,0,100,0),
(813480,13,-9466.96,-1296.67,41.3782,0,2000,0,0,0,100,0),
(813480,14,-9471.23,-1300.68,41.9268,0,0,0,0,0,100,0),
(813480,15,-9476.09,-1305.25,42.416,0,0,0,0,0,100,0),
(813480,16,-9480.95,-1309.83,41.7995,0,0,0,0,0,100,0),
(813480,17,-9488.83,-1317.23,40.4863,0,0,0,0,0,100,0),
(813480,18,-9498.11,-1325.95,41.919,0,0,0,0,0,100,0),
(813480,19,-9506.38,-1330.04,43.6539,0,0,0,0,0,100,0),
(813480,20,-9514.64,-1334.13,45.3719,0,0,0,0,0,100,0),
(813480,21,-9522.18,-1330.72,46.1604,0,0,0,0,0,100,0),
-- Eastvale Peasant
(813490,1,-9499.13,-1346.69,45.1779,0,0,0,0,0,100,0),
(813490,2,-9499.13,-1346.69,45.1779,4.17512,60000,0,0,0,100,0),
(813490,3,-9499.13,-1346.69,45.1779,0,2000,0,0,0,100,0),
(813490,4,-9499.13,-1346.69,45.1779,0,0,0,0,0,100,0),
(813490,5,-9496.29,-1341.06,43.6582,0,0,0,0,0,100,0),
(813490,6,-9493.18,-1334.92,42.3114,0,0,0,0,0,100,0),
(813490,7,-9490.24,-1329.08,41.4998,0,0,0,0,0,100,0),
(813490,8,-9487.61,-1323.88,40.9235,0,0,0,0,0,100,0),
(813490,9,-9484.88,-1318.48,40.7537,0,0,0,0,0,100,0),
(813490,10,-9480.51,-1313.24,41.6102,0,0,0,0,0,100,0),
(813490,11,-9476.24,-1308.13,42.6176,0,0,0,0,0,100,0),
(813490,12,-9471.6,-1302.57,42.4068,0,0,0,0,0,100,0),
(813490,13,-9466.8,-1296.81,41.4222,0,2000,0,0,0,100,0),
(813490,14,-9471.6,-1302.57,42.4068,0,0,0,0,0,100,0),
(813490,15,-9476.24,-1308.13,42.6176,0,0,0,0,0,100,0),
(813490,16,-9480.51,-1313.24,41.6102,0,0,0,0,0,100,0),
(813490,17,-9484.88,-1318.48,40.7537,0,0,0,0,0,100,0),
(813490,18,-9487.61,-1323.88,40.9234,0,0,0,0,0,100,0),
(813490,19,-9490.24,-1329.08,41.4998,0,0,0,0,0,100,0),
(813490,20,-9493.18,-1334.92,42.3114,0,0,0,0,0,100,0),
(813490,21,-9496.29,-1341.06,43.6582,0,0,0,0,0,100,0),
-- Eastvale Lumberjack
(812570,1,-9399.64,-1336.57,50.0274,0,0,0,0,0,100,0),
(812570,2,-9399.64,-1336.57,50.0274,0.332456,60000,0,0,0,100,0),
(812570,3,-9408.82,-1336.09,50.0274,0,0,0,0,0,100,0),
(812570,4,-9411.76,-1333.87,51.4715,0,0,0,0,0,100,0),
(812570,5,-9418.3,-1328.91,51.4482,0,0,0,0,0,100,0),
(812570,6,-9418.12,-1326.47,51.4532,1.49983,60000,0,0,0,100,0),
(812570,7,-9418.3,-1328.91,51.4482,0,0,0,0,0,100,0),
(812570,8,-9411.76,-1333.87,51.4715,0,0,0,0,0,100,0),
(812570,9,-9408.82,-1336.09,50.0274,0,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
