-- DB update 2022_04_03_00 -> 2022_04_03_01
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2022_04_03_00';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2022_04_03_00 2022_04_03_01 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1649017655497755434'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1649017655497755434');

DELETE FROM `creature` WHERE `guid` IN (28458,134022,134023,86827,86828,86829,86830,86831,152333,152334,152335,152336,152337,152338,152339);
INSERT INTO `creature` (`guid`, `id`, `map`, `zoneId`, `areaId`, `spawnMask`, `phaseMask`, `modelid`, `equipment_id`, `position_x`, `position_y`, `position_z`, `orientation`, `spawntimesecs`, `wander_distance`, `curhealth`, `curmana`, `MovementType`, `npcflag`, `unit_flags`, `dynamicflags`, `VerifiedBuild`)
VALUES
(86827,846,0,0,0,1,1,0,0,-10085,1558.9,40.8555,3.00608,300,2,0,0,1,0,0,0,0),
(86828,846,0,0,0,1,1,0,0,-10085,1556.51,40.8078,2.17749,300,2,0,0,1,0,0,0,0),
(86829,846,0,0,0,1,1,0,0,-11281.5,1017.69,94.4474,5.30334,300,0,0,0,0,0,0,0,0),
(86830,846,0,0,0,1,1,0,0,-11275.7,1022.68,94.7905,5.70782,300,0,0,0,0,0,0,0,0),
(86831,846,0,0,0,1,1,0,0,-10988.2,1600.1,45.6427,5.37523,300,5,0,0,1,0,0,0,0),
(152333,846,0,0,0,1,1,0,0,-10958.9,1603.63,47.8132,1.78282,300,5,0,0,1,0,0,0,0),
(152334,846,0,0,0,1,1,0,0,-10976.4,1610.5,46.0335,1.98,300,5,0,0,1,0,0,0,0),
(152335,846,0,0,0,1,1,0,0,-10990.2,1623.08,45.1017,4.4604,300,5,0,0,1,0,0,0,0),
(152336,846,0,0,0,1,1,0,0,-10962.3,1625.83,46.4382,3.24442,300,5,0,0,1,0,0,0,0),
(152337,846,0,0,0,1,1,0,0,-10015.2,1424.47,40.94,3.27601,300,5,0,0,1,0,0,0,0),
(152338,846,0,0,0,1,1,0,0,-10025.1,1419.18,41.218,2.72701,300,5,0,0,1,0,0,0,0),
(152339,846,0,0,0,1,1,0,0,-10025,1427.11,41.107,1.61175,300,5,0,0,1,0,0,0,0);

UPDATE creature SET `position_x` = -11277.3, `position_y` = 1021.93, `position_z` = 94.7337, `orientation` = 5.18302, `spawntimesecs` = 32400, `wander_distance` = 0, `MovementType` = 2 WHERE `guid` = 134021;
UPDATE creature SET `position_x` = -10084.3, `position_y` = 1557.9, `position_z` = 40.8744, `spawntimesecs` = 32400, `wander_distance` = 3 WHERE `guid` = 134020;

DELETE FROM `creature_addon` WHERE `guid` = 134021;
INSERT INTO `creature_addon` (`guid`, `path_id`, `mount`, `bytes1`, `bytes2`, `emote`, `isLarge`, `auras`)
VALUES
(134021,1340210,0,0,0,0,0,NULL);

DELETE FROM `smart_scripts` WHERE `source_type` = 0 AND `entryorguid` IN (572,846);
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(572,0,0,1,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Leprithus - On Respawn - Set Active On (CONDITION_OBJECT_ENTRY_GUID)'),
(572,0,1,0,61,0,100,0,0,0,0,0,0,67,1,5000,5000,0,0,0,1,0,0,0,0,0,0,0,0,'Leprithus - Linked - Create Timed Event 1'),
(572,0,2,3,59,0,100,0,1,0,0,0,0,45,1,1,0,0,0,0,10,86829,846,0,1,0,0,0,0,'Leprithus - On Timed Event 1 Triggered - Set Data 1 1 (Rotten Ghoul)'),
(572,0,3,0,61,0,100,0,0,0,0,0,0,45,2,2,0,0,0,0,10,86830,846,0,1,0,0,0,0,'Leprithus - Linked - Set Data 2 2 (Rotten Ghoul)'),
(572,0,4,0,1,0,100,1,0,0,0,0,0,11,26047,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Leprithus - OOC - Cast ''Birth'' (No Repeat)'),
(572,0,5,0,0,0,100,0,7100,7100,8800,19700,0,11,744,0,0,0,0,0,2,0,0,0,0,0,0,0,0,'Leprithus - IC - Cast ''Poison'''),
(572,0,6,0,0,0,100,0,12000,20100,12000,20100,0,11,4974,32,0,0,0,0,2,0,0,0,0,0,0,0,0,'Leprithus - IC - Cast ''Wither Touch'''),

(846,0,0,1,11,0,100,0,0,0,0,0,0,237,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,'Rotten Ghoul - On Respawn - Leave Creature Formation (CONDITION_OBJECT_ENTRY_GUID)'),
(846,0,1,0,61,0,100,0,0,0,0,0,0,89,5,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Rotten Ghoul - Linked - Start Random Movement'),
(846,0,2,3,38,0,100,0,1,1,0,0,0,89,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Rotten Ghoul - On Data Set 1 1 - Stop Random Movement'),
(846,0,3,0,61,0,100,0,0,0,0,0,0,237,2,0,0,0,0,0,7,0,0,0,0,0,0,3,20,'Rotten Ghoul - Linked - Create Creature Formation (Invoker)'),
(846,0,4,5,38,0,100,0,2,2,0,0,0,89,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Rotten Ghoul - On Data Set 2 2 - Stop Random Movement'),
(846,0,5,0,61,0,100,0,0,0,0,0,0,237,2,0,0,0,0,0,7,0,0,0,0,0,0,3,340,'Rotten Ghoul - Linked - Create Creature Formation (Invoker)'),
(846,0,6,0,1,0,100,1,0,0,0,0,0,11,26047,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Rotten Ghoul - OOC - Cast ''Birth'' (No Repeat)'),
(846,0,7,0,0,0,100,0,4400,5900,8200,17800,0,11,11918,0,0,0,0,0,2,0,0,0,0,0,0,0,0,'Rotten Ghoul - IC - Cast ''Poison''');

DELETE FROM `conditions` WHERE `SourceTypeOrReferenceId` = 22 AND `SourceEntry` IN (572,846);
INSERT INTO `conditions` (`SourceTypeOrReferenceId`, `SourceGroup`, `SourceEntry`, `SourceId`, `ElseGroup`, `ConditionTypeOrReference`, `ConditionTarget`, `ConditionValue1`, `ConditionValue2`, `ConditionValue3`, `NegativeCondition`, `ErrorType`, `ErrorTextId`, `Comment`)
VALUES
(22,1,572,0,0,31,1,3,0,134021,0,0,0,'Leprithus - Group 0: Execute SAI ID 0 only if has GUID 134021'),

(22,1,846,0,0,31,1,3,0,86829,0,0,0,'Rotten Ghoul - Group 0: Execute SAI ID 0 only if has GUID 86829'),
(22,1,846,0,1,31,1,3,0,86830,0,0,0,'Rotten Ghoul - Group 1: Execute SAI ID 0 only if has GUID 86830');

UPDATE `game_event` SET `description` = 'Nocturnal' WHERE `eventEntry` = 25;
UPDATE `pool_template` SET `description` = 'Leprithus (1 out 2)' WHERE `entry` = 1004;
DELETE FROM `pool_creature` WHERE `guid` in (28458,134022,134023);

DELETE FROM `game_event_pool` WHERE `pool_entry` = 1004;
INSERT INTO `game_event_pool` (`eventEntry`, `pool_entry`)
VALUES
(25,1004);

DELETE FROM `game_event_creature` WHERE `guid` IN (86827,86828,86829,86830,86831,152333,152334,152335,152336,152337,152338,152339,52594,52595,52596,90280,90279);
INSERT INTO `game_event_creature` (`eventEntry`, `guid`)
VALUES
(25,86827),
(25,86828),
(25,86829),
(25,86830),
(25,86831),
(25,152333),
(25,152334),
(25,152335),
(25,152336),
(25,152337),
(25,152338),
(25,152339),

(-25,52594),
(-25,52595),
(-25,52596),
(-25,90280),
(-25,90279);

DELETE FROM `waypoint_data` WHERE `id` = 1340210;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `pathfinding`, `action`, `action_chance`, `wpguid`)
VALUES
(1340210,1,-11277.3,1021.93,94.7337,0,5000,0,0,0,100,0),
(1340210,2,-11272.9,1014.62,92.0743,0,0,0,0,0,100,0),
(1340210,3,-11267.6,1005.8,88.8217,0,0,0,0,0,100,0),
(1340210,4,-11262.9,997.895,86.0337,0,0,0,0,0,100,0),
(1340210,5,-11257.1,988.193,83.3336,0,0,0,0,0,100,0),
(1340210,6,-11252.5,982.487,81.7356,0,0,0,0,0,100,0),
(1340210,7,-11246.9,975.569,80.9419,0,0,0,0,0,100,0),
(1340210,8,-11245.9,970.301,81.7116,0,0,0,0,0,100,0),
(1340210,9,-11244.5,962.6,83.3218,0,0,0,0,0,100,0),
(1340210,10,-11240.4,956.723,79.407,0,0,0,0,0,100,0),
(1340210,11,-11240.5,948.932,75.6219,0,0,0,0,0,100,0),
(1340210,12,-11235.5,944.007,69.8979,0,0,0,0,0,100,0),
(1340210,13,-11230,938.515,63.0235,0,0,0,0,0,100,0),
(1340210,14,-11224.1,932.694,58.2766,0,0,0,0,0,100,0),
(1340210,15,-11218.3,926.952,55.4673,0,0,0,0,0,100,0),
(1340210,16,-11212.6,921.358,54.3906,0,0,0,0,0,100,0),
(1340210,17,-11209.3,916.555,53.9945,0,0,0,0,0,100,0),
(1340210,18,-11205.4,910.976,53.0378,0,0,0,0,0,100,0),
(1340210,19,-11200,903.115,50.8774,0,0,0,0,0,100,0),
(1340210,20,-11194.6,895.302,48.4349,0,0,0,0,0,100,0),
(1340210,21,-11188.6,890.262,46.2883,0,0,0,0,0,100,0),
(1340210,22,-11181.5,884.248,43.9236,0,0,0,0,0,100,0),
(1340210,23,-11172.6,876.756,41.3173,0,0,0,0,0,100,0),
(1340210,24,-11165,873.671,39.853,0,0,0,0,0,100,0),
(1340210,25,-11156.5,870.19,38.882,0,0,0,0,0,100,0),
(1340210,26,-11146.3,866.02,38.4824,0,0,0,0,0,100,0),
(1340210,27,-11141,862.214,39.1394,0,0,0,0,0,100,0),
(1340210,28,-11136,858.6,40.2543,0,0,0,0,0,100,0),
(1340210,29,-11130.5,854.673,40.5969,0,0,0,0,0,100,0),
(1340210,30,-11126,851.423,40.3828,0,0,0,0,0,100,0),
(1340210,31,-11117.5,847.838,39.6576,0,0,0,0,0,100,0),
(1340210,32,-11109.7,844.526,39.4277,0,0,0,0,0,100,0),
(1340210,33,-11102.7,841.573,39.8838,0,0,0,0,0,100,0),
(1340210,34,-11095,838.307,40.4605,0,0,0,0,0,100,0),
(1340210,35,-11086.8,834.864,40.7715,0,0,0,0,0,100,0),
(1340210,36,-11080.1,837.811,41.1727,0,0,0,0,0,100,0),
(1340210,37,-11074,840.484,41.152,0,0,0,0,0,100,0),
(1340210,38,-11067.7,843.246,40.446,0,0,0,0,0,100,0),
(1340210,39,-11059.5,846.814,38.6569,0,0,0,0,0,100,0),
(1340210,40,-11049.1,845.008,37.6343,0,0,0,0,0,100,0),
(1340210,41,-11039.1,843.255,36.3932,0,0,0,0,0,100,0),
(1340210,42,-11033.4,836.597,36.1062,0,0,0,0,0,100,0),
(1340210,43,-11028.1,830.391,36.1443,0,0,0,0,0,100,0),
(1340210,44,-11020.8,821.787,36.4443,0,0,0,0,0,100,0),
(1340210,45,-11012.4,812.002,37.4404,0,0,0,0,0,100,0),
(1340210,46,-11010,806.176,37.46,0,0,0,0,0,100,0),
(1340210,47,-11006.4,797.327,36.7479,0,0,0,0,0,100,0),
(1340210,48,-11002.7,788.433,36.4366,0,0,0,0,0,100,0),
(1340210,49,-10997.9,781.99,38.1745,0,0,0,0,0,100,0),
(1340210,50,-10993.9,776.659,40.1406,0,0,0,0,0,100,0),
(1340210,51,-10988.3,769.18,41.9865,0,0,0,0,0,100,0),
(1340210,52,-10982.7,761.666,43.9919,0,0,0,0,0,100,0),
(1340210,53,-10978.6,756.584,45.3704,0,0,0,0,0,100,0),
(1340210,54,-10974.3,751.32,46.2881,0,0,0,0,0,100,0),
(1340210,55,-10968.4,743.972,46.8686,0,0,0,0,0,100,0),
(1340210,56,-10962.6,736.809,46.4806,0,0,0,0,0,100,0),
(1340210,57,-10954,734.207,45.6402,0,0,0,0,0,100,0),
(1340210,58,-10945.2,731.538,45.2166,0,0,0,0,0,100,0),
(1340210,59,-10935.6,728.633,44.8206,0,0,0,0,0,100,0),
(1340210,60,-10923.9,725.086,44.2542,0,0,0,0,0,100,0),
(1340210,61,-10913.9,722.066,42.727,0,0,0,0,0,100,0),
(1340210,62,-10906.2,718.324,40.9781,0,0,0,0,0,100,0),
(1340210,63,-10898.8,714.762,37.4135,0,0,0,0,0,100,0),
(1340210,64,-10891.1,711.05,34.9439,0,0,0,0,0,100,0),
(1340210,65,-10885.5,708.333,33.5149,0,0,0,0,0,100,0),
(1340210,66,-10877.2,704.292,31.2032,0,0,0,0,0,100,0),
(1340210,67,-10873.8,696.479,30.8948,0,0,0,0,0,100,0),
(1340210,68,-10869.9,687.586,30.891,0,0,0,0,0,100,0),
(1340210,69,-10868.3,677.887,30.8928,0,0,0,0,0,100,0),
(1340210,70,-10866.5,667.412,30.936,4.77892,60000,0,0,0,100,0),
(1340210,71,-10867,680.255,30.8916,0,0,0,0,0,100,0),
(1340210,72,-10867.4,690.509,30.8916,0,0,0,0,0,100,0),
(1340210,73,-10865.3,694.067,31.4336,0,0,0,0,0,100,0),
(1340210,74,-10860.7,700.646,32.6398,0,0,0,0,0,100,0),
(1340210,75,-10855.6,707.796,33.535,0,0,0,0,0,100,0),
(1340210,76,-10849.6,716.377,34.5679,0,0,0,0,0,100,0),
(1340210,77,-10844.1,724.133,33.873,0,0,0,0,0,100,0),
(1340210,78,-10844.1,731.588,34.4615,0,0,0,0,0,100,0),
(1340210,79,-10844.1,740.226,34.9546,0,0,0,0,0,100,0),
(1340210,80,-10844.1,750.508,34.406,0.851926,5000,0,0,0,100,0),
(1340210,81,-10850.4,749.538,35.4279,0,0,0,0,0,100,0),
(1340210,82,-10857.3,748.48,35.1293,0,0,0,0,0,100,0),
(1340210,83,-10866.1,747.139,33.3473,0,0,0,0,0,100,0),
(1340210,84,-10875.3,745.728,30.9327,0,0,0,0,0,100,0),
(1340210,85,-10885.8,744.131,31.869,0,0,0,0,0,100,0),
(1340210,86,-10895,742.711,34.959,0,0,0,0,0,100,0),
(1340210,87,-10902.7,742.041,36.4475,0,0,0,0,0,100,0),
(1340210,88,-10911.3,741.29,37.5329,0,0,0,0,0,100,0),
(1340210,89,-10921.5,740.396,39.4493,0,0,0,0,0,100,0),
(1340210,90,-10930.5,739.614,41.5126,0,0,0,0,0,100,0),
(1340210,91,-10938.3,738.934,43.0001,0,0,0,0,0,100,0),
(1340210,92,-10946.5,738.213,44.392,0,0,0,0,0,100,0),
(1340210,93,-10954.4,737.523,45.3971,0,0,0,0,0,100,0),
(1340210,94,-10962.6,736.809,46.4806,0,0,0,0,0,100,0),
(1340210,95,-10968.4,743.972,46.8686,0,0,0,0,0,100,0),
(1340210,96,-10974.3,751.32,46.2881,0,0,0,0,0,100,0),
(1340210,97,-10978.6,756.584,45.3704,0,0,0,0,0,100,0),
(1340210,98,-10982.7,761.666,43.9919,0,0,0,0,0,100,0),
(1340210,99,-10988.3,769.18,41.9865,0,0,0,0,0,100,0),
(1340210,100,-10993.9,776.659,40.1406,0,0,0,0,0,100,0),
(1340210,101,-10997.9,781.99,38.1745,0,0,0,0,0,100,0),
(1340210,102,-11002.7,788.433,36.4366,0,0,0,0,0,100,0),
(1340210,103,-11006.4,797.327,36.7479,0,0,0,0,0,100,0),
(1340210,104,-11010,806.176,37.46,0,0,0,0,0,100,0),
(1340210,105,-11012.4,812.002,37.4404,0,0,0,0,0,100,0),
(1340210,106,-11020.8,821.787,36.4443,0,0,0,0,0,100,0),
(1340210,107,-11028.1,830.391,36.1443,0,0,0,0,0,100,0),
(1340210,108,-11033.4,836.597,36.1062,0,0,0,0,0,100,0),
(1340210,109,-11039.1,843.255,36.3932,0,0,0,0,0,100,0),
(1340210,110,-11049.1,845.008,37.6343,0,0,0,0,0,100,0),
(1340210,111,-11059.5,846.814,38.6569,0,0,0,0,0,100,0),
(1340210,112,-11067.7,843.246,40.446,0,0,0,0,0,100,0),
(1340210,113,-11074,840.484,41.152,0,0,0,0,0,100,0),
(1340210,114,-11080.1,837.811,41.1727,0,0,0,0,0,100,0),
(1340210,115,-11086.8,834.864,40.7715,0,0,0,0,0,100,0),
(1340210,116,-11095,838.307,40.4605,0,0,0,0,0,100,0),
(1340210,117,-11102.7,841.573,39.8838,0,0,0,0,0,100,0),
(1340210,118,-11109.7,844.526,39.4277,0,0,0,0,0,100,0),
(1340210,119,-11117.5,847.838,39.6576,0,0,0,0,0,100,0),
(1340210,120,-11126,851.423,40.3828,0,0,0,0,0,100,0),
(1340210,121,-11130.5,854.673,40.5969,0,0,0,0,0,100,0),
(1340210,122,-11136,858.6,40.2543,0,0,0,0,0,100,0),
(1340210,123,-11141,862.214,39.1394,0,0,0,0,0,100,0),
(1340210,124,-11146.3,866.02,38.4824,0,0,0,0,0,100,0),
(1340210,125,-11156.5,870.19,38.882,0,0,0,0,0,100,0),
(1340210,126,-11165,873.671,39.853,0,0,0,0,0,100,0),
(1340210,127,-11172.6,876.756,41.3173,0,0,0,0,0,100,0),
(1340210,128,-11181.5,884.248,43.9236,0,0,0,0,0,100,0),
(1340210,129,-11188.6,890.262,46.2883,0,0,0,0,0,100,0),
(1340210,130,-11194.6,895.302,48.4349,0,0,0,0,0,100,0),
(1340210,131,-11200,903.115,50.8774,0,0,0,0,0,100,0),
(1340210,132,-11205.4,910.976,53.0378,0,0,0,0,0,100,0),
(1340210,133,-11209.3,916.555,53.9945,0,0,0,0,0,100,0),
(1340210,134,-11212.6,921.358,54.3906,0,0,0,0,0,100,0),
(1340210,135,-11218.3,926.952,55.4673,0,0,0,0,0,100,0),
(1340210,136,-11224.1,932.694,58.2766,0,0,0,0,0,100,0),
(1340210,137,-11230,938.515,63.0235,0,0,0,0,0,100,0),
(1340210,138,-11235.5,944.007,69.8979,0,0,0,0,0,100,0),
(1340210,139,-11240.5,948.932,75.6219,0,0,0,0,0,100,0),
(1340210,140,-11240.4,956.723,79.407,0,0,0,0,0,100,0),
(1340210,141,-11244.5,962.6,83.3218,0,0,0,0,0,100,0),
(1340210,142,-11245.9,970.301,81.7116,0,0,0,0,0,100,0),
(1340210,143,-11246.9,975.569,80.9419,0,0,0,0,0,100,0),
(1340210,144,-11252.5,982.487,81.7356,0,0,0,0,0,100,0),
(1340210,145,-11257.1,988.193,83.3336,0,0,0,0,0,100,0),
(1340210,146,-11262.9,997.895,86.0337,0,0,0,0,0,100,0),
(1340210,147,-11267.6,1005.8,88.8217,0,0,0,0,0,100,0),
(1340210,148,-11272.9,1014.62,92.0743,0,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
