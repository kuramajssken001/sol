-- DB update 2021_10_01_01 -> 2021_10_01_02
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_10_01_01';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_10_01_01 2021_10_01_02 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1633098825286831957'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1633098825286831957');

UPDATE `creature` SET `MovementType` = 2 WHERE `guid` = 79875;
UPDATE `creature_addon` SET `path_id` = 798750 WHERE `guid` = 79875;

DELETE FROM `smart_scripts` WHERE `source_type` = 0 AND `entryorguid` = 3937 AND `id` = 2;
DELETE FROM `smart_scripts` WHERE `source_type` = 0 AND `entryorguid` = -79875;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(3937,0,2,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Kira Songshine - On Respawn - Set Active On'),

(-79875,0,0,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Stormwind Guard - On Respawn - Set Active On');

DELETE FROM `waypoint_data` WHERE `id` IN (802830,798750);
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
-- Kira Songshine
(802830,1,-9137.87,382.784,90.7191,0,5000,0,0,100,0),
(802830,2,-9145.05,375.98,90.7306,0,0,0,0,100,0),
(802830,3,-9150,370.703,90.529,0,0,0,0,100,0),
(802830,4,-9155.42,364.937,90.1343,0,0,0,0,100,0),
(802830,5,-9160.48,359.541,89.109,0,0,0,0,100,0),
(802830,6,-9165.25,354.182,87.7431,0,0,0,0,100,0),
(802830,7,-9170.79,347.965,85.8275,0,0,0,0,100,0),
(802830,8,-9175.93,342.185,84.2532,0,0,0,0,100,0),
(802830,9,-9179.05,333.792,82.5427,0,0,0,0,100,0),
(802830,10,-9181.78,326.43,81.1904,0,0,0,0,100,0),
(802830,11,-9183.56,314.518,79.2184,0,0,0,0,100,0),
(802830,12,-9183.77,303.341,78.2615,0,0,0,0,100,0),
(802830,13,-9184.02,290.736,76.8769,0,0,0,0,100,0),
(802830,14,-9184.23,279.656,75.8459,0,0,0,0,100,0),
(802830,15,-9184.42,269.802,74.905,0,0,0,0,100,0),
(802830,16,-9184.62,259.409,73.981,0,0,0,0,100,0),
(802830,17,-9187.71,250.225,73.27,0,0,0,0,100,0),
(802830,18,-9190.82,240.942,72.4893,0,0,0,0,100,0),
(802830,19,-9194.35,230.449,71.8101,0,0,0,0,100,0),
(802830,20,-9199.68,224.916,71.5128,0,0,0,0,100,0),
(802830,21,-9208.22,216.066,70.7692,0,0,0,0,100,0),
(802830,22,-9215.19,208.83,69.7475,0,0,0,0,100,0),
(802830,23,-9222.81,200.923,68.7306,0,0,0,0,100,0),
(802830,24,-9233.09,190.265,67.82,0,0,0,0,100,0),
(802830,25,-9239.07,183.268,67.8047,0,0,0,0,100,0),
(802830,26,-9244.75,176.627,68.0329,0,0,0,0,100,0),
(802830,27,-9250.44,169.971,68.0454,0,0,0,0,100,0),
(802830,28,-9257.91,161.229,67.623,0,0,0,0,100,0),
(802830,29,-9267.18,158.541,67.2867,0,0,0,0,100,0),
(802830,30,-9277.47,155.557,67.1376,0,0,0,0,100,0),
(802830,31,-9286.89,152.826,66.7123,0,0,0,0,100,0),
(802830,32,-9298.35,149.504,66.412,0,0,0,0,100,0),
(802830,33,-9306.51,145.284,66.014,0,0,0,0,100,0),
(802830,34,-9318.57,139.051,64.8889,0,0,0,0,100,0),
(802830,35,-9328.93,133.697,64.341,0,0,0,0,100,0),
(802830,36,-9335.91,129.488,64.2168,0,0,0,0,100,0),
(802830,37,-9344.76,124.147,63.5974,0,0,0,0,100,0),
(802830,38,-9353.3,118.99,62.64,0,0,0,0,100,0),
(802830,39,-9363.17,113.038,61.4675,0,0,0,0,100,0),
(802830,40,-9371.22,110.73,60.8969,0,0,0,0,100,0),
(802830,41,-9380.61,108.039,60.2608,0,0,0,0,100,0),
(802830,42,-9393.01,104.486,59.2978,0,0,0,0,100,0),
(802830,43,-9401.96,98.6144,58.6364,0,0,0,0,100,0),
(802830,44,-9412.46,91.7252,57.5308,0,0,0,0,100,0),
(802830,45,-9422.57,85.0895,56.8245,0,0,0,0,100,0),
(802830,46,-9431.67,79.1181,56.4296,0,0,0,0,100,0),
(802830,47,-9439.02,74.2957,56.3132,0,0,0,0,100,0),
(802830,48,-9446.71,69.2511,56.3369,0,0,0,0,100,0),
(802830,49,-9455.61,63.4114,55.8832,0,0,0,0,100,0),
(802830,50,-9463.3,63.8506,55.873,0,0,0,0,100,0),
(802830,51,-9473.09,64.4099,56.0783,0,0,0,0,100,0),
(802830,52,-9483.7,65.0161,56.1693,0,0,0,0,100,0),
(802830,53,-9492.11,57.8834,55.8784,0,0,0,0,100,0),
(802830,54,-9497.19,50.158,55.9655,0,0,0,0,100,0),
(802830,55,-9502.23,42.5029,56.2513,0,0,0,0,100,0),
(802830,56,-9507.09,35.1121,56.517,0,0,0,0,100,0),
(802830,57,-9511.33,26.4644,56.5803,0,0,0,0,100,0),
(802830,58,-9515.96,17.0373,56.4993,0,0,0,0,100,0),
(802830,59,-9521.28,6.17736,56.1163,0,0,0,0,100,0),
(802830,60,-9526.61,-4.67631,55.9695,0,0,0,0,100,0),
(802830,61,-9532.35,-16.3847,56.0039,0,0,0,0,100,0),
(802830,62,-9537.23,-26.3352,55.7945,0,0,0,0,100,0),
(802830,63,-9541.09,-34.2036,56.3947,0,0,0,0,100,0),
(802830,64,-9543.96,-40.0566,56.5451,0,0,0,0,100,0),
(802830,65,-9546.06,-49.8374,56.7293,0,0,0,0,100,0),
(802830,66,-9548.12,-59.454,56.949,0,0,0,0,100,0),
(802830,67,-9550.16,-68.9811,57.4588,0,0,0,0,100,0),
(802830,68,-9551,-78.1383,57.5632,0,0,0,0,100,0),
(802830,69,-9551.97,-88.643,57.6784,0,0,0,0,100,0),
(802830,70,-9553.2,-102.013,57.5823,0,0,0,0,100,0),
(802830,71,-9554.42,-115.34,57.8012,0,5000,0,0,100,0),
(802830,72,-9552.62,-108.02,57.5959,0,0,0,0,100,0),
(802830,73,-9550.42,-99.0966,57.334,0,0,0,0,100,0),
(802830,74,-9548.3,-90.5209,57.6371,0,0,0,0,100,0),
(802830,75,-9547.03,-80.5287,57.5344,0,0,0,0,100,0),
(802830,76,-9545.54,-68.862,57.2724,0,0,0,0,100,0),
(802830,77,-9544.48,-57.0862,56.8031,0,0,0,0,100,0),
(802830,78,-9543.49,-45.9933,56.6455,0,0,0,0,100,0),
(802830,79,-9539,-36.3303,56.4451,0,0,0,0,100,0),
(802830,80,-9533.85,-25.2327,55.8975,0,0,0,0,100,0),
(802830,81,-9529.44,-15.928,55.8608,0,0,0,0,100,0),
(802830,82,-9522.96,-2.26097,55.8343,0,0,0,0,100,0),
(802830,83,-9517,10.3164,56.2185,0,0,0,0,100,0),
(802830,84,-9511.83,19.9599,56.4422,0,0,0,0,100,0),
(802830,85,-9506.66,29.5957,56.404,0,0,0,0,100,0),
(802830,86,-9502.05,38.1935,56.3752,0,0,0,0,100,0),
(802830,87,-9497.47,47.285,55.8283,0,0,0,0,100,0),
(802830,88,-9493.71,54.7641,55.9195,0,0,0,0,100,0),
(802830,89,-9488.72,60.2183,56.0534,0,0,0,0,100,0),
(802830,90,-9484.12,65.2476,56.1655,0,0,0,0,100,0),
(802830,91,-9475.79,65.4207,56.199,0,0,0,0,100,0),
(802830,92,-9464.45,65.6562,55.9708,0,0,0,0,100,0),
(802830,93,-9455.72,65.2887,56.0159,0,0,0,0,100,0),
(802830,94,-9444.8,64.8291,56.1808,0,0,0,0,100,0),
(802830,95,-9437.44,70.2363,56.0797,0,0,0,0,100,0),
(802830,96,-9429.85,75.8084,56.2997,0,0,0,0,100,0),
(802830,97,-9420.47,82.6963,56.67,0,0,0,0,100,0),
(802830,98,-9409.65,90.6408,57.5093,0,0,0,0,100,0),
(802830,99,-9402.75,94.9227,58.3594,0,0,0,0,100,0),
(802830,100,-9395.77,99.2556,58.807,0,0,0,0,100,0),
(802830,101,-9384.28,102.955,59.712,0,0,0,0,100,0),
(802830,102,-9371.85,106.955,60.6756,0,0,0,0,100,0),
(802830,103,-9362.97,110.566,61.3533,0,0,0,0,100,0),
(802830,104,-9353.64,114.362,62.1244,0,0,0,0,100,0),
(802830,105,-9343.67,119.657,63.0754,0,0,0,0,100,0),
(802830,106,-9331.51,126.111,63.6709,0,0,0,0,100,0),
(802830,107,-9322.42,131.893,64.1578,0,0,0,0,100,0),
(802830,108,-9313.08,137.834,65.0926,0,0,0,0,100,0),
(802830,109,-9303.82,142.43,65.6974,0,0,0,0,100,0),
(802830,110,-9293.52,147.542,66.312,0,0,0,0,100,0),
(802830,111,-9284.75,149.174,66.5085,0,0,0,0,100,0),
(802830,112,-9276.33,150.74,66.8652,0,0,0,0,100,0),
(802830,113,-9268.52,152.249,67.1456,0,0,0,0,100,0),
(802830,114,-9259.15,154.058,67.573,0,0,0,0,100,0),
(802830,115,-9251.87,161.16,67.8188,0,0,0,0,100,0),
(802830,116,-9244.32,168.522,67.8771,0,0,0,0,100,0),
(802830,117,-9239.07,176.68,67.7814,0,0,0,0,100,0),
(802830,118,-9233.07,186,67.6244,0,0,0,0,100,0),
(802830,119,-9226.21,192.932,68.1921,0,0,0,0,100,0),
(802830,120,-9217,202.225,68.9962,0,0,0,0,100,0),
(802830,121,-9211.01,208.821,70.0454,0,0,0,0,100,0),
(802830,122,-9204.2,216.333,70.8871,0,0,0,0,100,0),
(802830,123,-9199.41,221.609,71.2866,0,0,0,0,100,0),
(802830,124,-9192.71,229.307,71.7533,0,0,0,0,100,0),
(802830,125,-9185.08,238.071,72.6016,0,0,0,0,100,0),
(802830,126,-9183.58,245.219,73.1176,0,0,0,0,100,0),
(802830,127,-9181.83,253.556,73.681,0,0,0,0,100,0),
(802830,128,-9180.16,261.505,74.3097,0,0,0,0,100,0),
(802830,129,-9180.48,270.214,74.9442,0,0,0,0,100,0),
(802830,130,-9180.88,281.162,75.7715,0,0,0,0,100,0),
(802830,131,-9181.19,289.745,76.7651,0,0,0,0,100,0),
(802830,132,-9181.51,298.58,77.9474,0,0,0,0,100,0),
(802830,133,-9181.63,306.722,78.6715,0,0,0,0,100,0),
(802830,134,-9181.75,315.31,79.3773,0,0,0,0,100,0),
(802830,135,-9178.72,323.8,80.8976,0,0,0,0,100,0),
(802830,136,-9175.23,333.557,83.0459,0,0,0,0,100,0),
(802830,137,-9172.64,340.815,84.4371,0,0,0,0,100,0),
(802830,138,-9168.52,346.316,86.1767,0,0,0,0,100,0),
(802830,139,-9163.49,353.028,87.7949,0,0,0,0,100,0),
(802830,140,-9159.13,358.103,89.0049,0,0,0,0,100,0),
(802830,141,-9154.27,363.755,90.0988,0,0,0,0,100,0),
(802830,142,-9149.9,368.238,90.3886,0,0,0,0,100,0),
(802830,143,-9145.87,372.378,90.5645,0,0,0,0,100,0),
(802830,144,-9142.12,377.251,90.6985,0,0,0,0,100,0),
-- Stormwind Guard
(798750,1,-9181.74,310.279,78.9207,0,0,0,0,100,0),
(798750,2,-9179.95,322.036,80.4598,0,0,0,0,100,0),
(798750,3,-9178.63,330.661,81.9748,0,0,0,0,100,0),
(798750,4,-9175.47,337.413,83.5667,0,0,0,0,100,0),
(798750,5,-9172.88,342.944,84.7112,0,0,0,0,100,0),
(798750,6,-9167.79,348.383,86.5109,0,5000,0,0,100,0),
(798750,7,-9172.88,342.944,84.7112,0,0,0,0,100,0),
(798750,8,-9175.47,337.413,83.5667,0,0,0,0,100,0),
(798750,9,-9178.63,330.661,81.9748,0,0,0,0,100,0),
(798750,10,-9179.95,322.036,80.4598,0,0,0,0,100,0),
(798750,11,-9181.74,310.279,78.9207,0,0,0,0,100,0),
(798750,12,-9181.99,301.581,78.2439,0,0,0,0,100,0),
(798750,13,-9182.32,289.84,76.7658,0,0,0,0,100,0),
(798750,14,-9182.64,278.519,75.6629,0,0,0,0,100,0),
(798750,15,-9182.92,268.394,74.7349,0,0,0,0,100,0),
(798750,16,-9183.19,259.01,73.8847,0,0,0,0,100,0),
(798750,17,-9185.83,250.765,73.3716,0,0,0,0,100,0),
(798750,18,-9188.79,241.525,72.5397,0,0,0,0,100,0),
(798750,19,-9192.02,231.453,71.8089,0,0,0,0,100,0),
(798750,20,-9199.38,223.612,71.4346,0,0,0,0,100,0),
(798750,21,-9207.22,215.255,70.7593,0,0,0,0,100,0),
(798750,22,-9214.15,207.869,69.7123,0,0,0,0,100,0),
(798750,23,-9221.41,200.13,68.667,0,0,0,0,100,0),
(798750,24,-9227.83,193.29,68.0912,0,0,0,0,100,0),
(798750,25,-9234.43,186.25,67.6056,0,0,0,0,100,0),
(798750,26,-9239.92,179.109,67.8094,0,0,0,0,100,0),
(798750,27,-9245.59,171.724,67.917,0,0,0,0,100,0),
(798750,28,-9251.1,164.54,67.8308,0,0,0,0,100,0),
(798750,29,-9255.65,158.621,67.6945,0,0,0,0,100,0),
(798750,30,-9265.78,155.963,67.2171,0,0,0,0,100,0),
(798750,31,-9275.44,153.431,66.9839,0,0,0,0,100,0),
(798750,32,-9284.89,150.953,66.5936,0,0,0,0,100,0),
(798750,33,-9295.17,148.258,66.3238,0,0,0,0,100,0),
(798750,34,-9303.8,143.789,65.7881,0,0,0,0,100,0),
(798750,35,-9312.6,139.231,65.242,0,0,0,0,100,0),
(798750,36,-9322.75,133.974,64.3079,0,0,0,0,100,0),
(798750,37,-9331.18,129.608,64.0486,0,0,0,0,100,0),
(798750,38,-9339.37,125.368,63.6347,0,0,0,0,100,0),
(798750,39,-9349.99,119.348,62.8964,0,0,0,0,100,0),
(798750,40,-9357.92,114.85,61.9082,0,0,0,0,100,0),
(798750,41,-9363.28,111.813,61.349,0,0,0,0,100,0),
(798750,42,-9372.63,108.623,60.6658,0,0,0,0,100,0),
(798750,43,-9382.4,105.289,59.9353,0,0,0,0,100,0),
(798750,44,-9391.63,102.137,59.1602,0,0,0,0,100,0),
(798750,45,-9397.41,100.166,58.7989,0,0,0,0,100,0),
(798750,46,-9403.73,95.8647,58.3372,0,0,0,0,100,0),
(798750,47,-9411.65,90.4724,57.4396,0,0,0,0,100,0),
(798750,48,-9421.51,83.7644,56.6747,0,0,0,0,100,0),
(798750,49,-9430.52,77.6276,56.3069,0,0,0,0,100,0),
(798750,50,-9438.2,72.4046,56.1554,0,0,0,0,100,0),
(798750,51,-9444.75,67.9418,56.1566,0,5000,0,0,100,0),
(798750,52,-9438.2,72.4046,56.1554,0,0,0,0,100,0),
(798750,53,-9430.52,77.6276,56.3069,0,0,0,0,100,0),
(798750,54,-9421.51,83.7644,56.6747,0,0,0,0,100,0),
(798750,55,-9411.65,90.4724,57.4396,0,0,0,0,100,0),
(798750,56,-9403.73,95.8647,58.3372,0,0,0,0,100,0),
(798750,57,-9397.41,100.166,58.7989,0,0,0,0,100,0),
(798750,58,-9391.63,102.137,59.1602,0,0,0,0,100,0),
(798750,59,-9382.4,105.289,59.9353,0,0,0,0,100,0),
(798750,60,-9372.63,108.623,60.6658,0,0,0,0,100,0),
(798750,61,-9363.28,111.813,61.349,0,0,0,0,100,0),
(798750,62,-9357.92,114.85,61.9082,0,0,0,0,100,0),
(798750,63,-9349.99,119.348,62.8964,0,0,0,0,100,0),
(798750,64,-9339.37,125.368,63.6347,0,0,0,0,100,0),
(798750,65,-9331.18,129.608,64.0486,0,0,0,0,100,0),
(798750,66,-9322.75,133.974,64.3079,0,0,0,0,100,0),
(798750,67,-9312.6,139.231,65.242,0,0,0,0,100,0),
(798750,68,-9303.8,143.789,65.7881,0,0,0,0,100,0),
(798750,69,-9295.17,148.258,66.3238,0,0,0,0,100,0),
(798750,70,-9284.89,150.953,66.5936,0,0,0,0,100,0),
(798750,71,-9275.44,153.431,66.9839,0,0,0,0,100,0),
(798750,72,-9265.78,155.963,67.2171,0,0,0,0,100,0),
(798750,73,-9255.65,158.621,67.6945,0,0,0,0,100,0),
(798750,74,-9251.1,164.54,67.8308,0,0,0,0,100,0),
(798750,75,-9245.59,171.724,67.917,0,0,0,0,100,0),
(798750,76,-9239.92,179.109,67.8094,0,0,0,0,100,0),
(798750,77,-9234.43,186.25,67.6056,0,0,0,0,100,0),
(798750,78,-9227.83,193.29,68.0912,0,0,0,0,100,0),
(798750,79,-9221.41,200.13,68.667,0,0,0,0,100,0),
(798750,80,-9214.15,207.869,69.7123,0,0,0,0,100,0),
(798750,81,-9207.22,215.255,70.7593,0,0,0,0,100,0),
(798750,82,-9199.38,223.612,71.4346,0,0,0,0,100,0),
(798750,83,-9192.02,231.453,71.8089,0,0,0,0,100,0),
(798750,84,-9188.79,241.525,72.5397,0,0,0,0,100,0),
(798750,85,-9185.83,250.765,73.3716,0,0,0,0,100,0),
(798750,86,-9183.19,259.01,73.8847,0,0,0,0,100,0),
(798750,87,-9182.92,268.394,74.7349,0,0,0,0,100,0),
(798750,88,-9182.64,278.519,75.6629,0,0,0,0,100,0),
(798750,89,-9182.32,289.84,76.7658,0,0,0,0,100,0),
(798750,90,-9181.99,301.581,78.2439,0,0,0,0,100,0);

UPDATE `creature` SET `position_x` = -9265.27, `position_y` = 133.176, `position_z` = 70.293 WHERE `guid` = 80278;  -- Deer
UPDATE `creature` SET `position_x` = -9363.48, `position_y` = 126.023, `position_z` = 63.3433 WHERE `guid` = 79649; -- Rabbit
UPDATE `creature` SET `position_x` = -9322.07, `position_y` = 118.355, `position_z` = 64.4255 WHERE `guid` = 80319; -- Rabbit
UPDATE `creature` SET `position_x` = -9221, `position_y` = 181.986, `position_z` = 69.1502 WHERE `guid` = 79884;    -- Rabbit

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
