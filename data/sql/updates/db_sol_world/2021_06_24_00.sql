-- DB update 2021_06_23_01 -> 2021_06_24_00
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2021_06_23_01';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2021_06_23_01 2021_06_24_00 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1624487694453010125'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1624487694453010125');

DELETE FROM `smart_scripts` WHERE `source_type` = 0 AND `id` = 1 AND `entryorguid` = 5314;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(5314,0,1,0,11,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Phantim - On Respawn - Set Active On');

DELETE FROM `creature_formations` WHERE `leaderGUID` IN (33210,33243,33240,33242,33245,33246,33244);
INSERT INTO `creature_formations` (`leaderGUID`, `memberGUID`, `dist`, `angle`, `groupAI`)
VALUES
(33210,33210,0,0,2),
(33210,33226,4,300,2),
(33210,33241,4,60,2),

(33243,33243,0,0,2),
(33243,33229,4,300,2),
(33243,33228,4,60,2),

(33240,33240,0,0,2),
(33240,33209,4,300,2),
(33240,33208,4,60,2),

(33242,33242,0,0,2),
(33242,33211,4,300,2),
(33242,33227,4,60,2),

(33245,33245,0,0,2),
(33245,33230,4,300,2),
(33245,33231,4,60,2),

(33246,33246,0,0,2),
(33246,33214,4,300,2),
(33246,33215,4,60,2),

(33244,33244,0,0,2),
(33244,33212,4,300,2),
(33244,33213,4,60,2);

UPDATE `creature` SET `MovementType` = 2 WHERE `guid` IN (33244,33246,33245,33242,33240,33243,33210);

DELETE FROM `creature_addon` WHERE `guid` IN (33244,33246,33245,33242,33240,33243,33210);
INSERT INTO `creature_addon` (`guid`, `path_id`, `mount`, `bytes1`, `bytes2`, `emote`, `isLarge`, `auras`)
VALUES
(33244,332440,0,0,4097,0,0,''),
(33246,332460,0,0,4097,0,0,''),
(33245,332450,0,0,4097,0,0,''),
(33242,332420,0,0,4097,0,0,''),
(33240,332400,0,0,4097,0,0,''),
(33243,332430,0,0,4097,0,0,''),
(33210,332100,0,0,4097,0,0,'');

DELETE FROM `waypoint_data` WHERE `id` IN (332440,332460,332450,332420,332400,332430,332100);
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`)
VALUES
(332440,1,3240.11,-3793.59,124.537,0,0,0,0,100,0),
(332440,2,3224.42,-3806.43,125.528,0,0,0,0,100,0),
(332440,3,3215.6,-3809.82,124.902,0,0,0,0,100,0),
(332440,4,3200.01,-3803.24,122.472,0,0,0,0,100,0),
(332440,5,3195.33,-3797.57,122.311,0,0,0,0,100,0),
(332440,6,3188.85,-3781.41,121.209,0,0,0,0,100,0),
(332440,7,3194.22,-3769.42,121.51,0,0,0,0,100,0),
(332440,8,3201.5,-3766.03,121.721,0,0,0,0,100,0),
(332440,9,3208.76,-3764.08,120.822,0,0,0,0,100,0),
(332440,10,3216.76,-3763.17,121.848,0,0,0,0,100,0),
(332440,11,3230.65,-3763.07,122.713,0,0,0,0,100,0),
(332440,12,3239.99,-3769.46,123.004,0,0,0,0,100,0),
(332440,13,3243.72,-3780.04,124.52,0,0,0,0,100,0),

(332460,1,3140.91,-3777.18,122.434,0,0,0,0,100,0),
(332460,2,3132.42,-3784.48,123.156,0,0,0,0,100,0),
(332460,3,3121.42,-3783.85,123.304,0,0,0,0,100,0),
(332460,4,3113.42,-3777.49,124.119,0,0,0,0,100,0),
(332460,5,3111.9,-3767.46,124.444,0,0,0,0,100,0),
(332460,6,3110.4,-3754.72,123.586,0,0,0,0,100,0),
(332460,7,3109.22,-3744.75,122.88,0,0,0,0,100,0),
(332460,8,3107.68,-3731.66,122.9,0,0,0,0,100,0),
(332460,9,3108.88,-3721.54,122.185,0,0,0,0,100,0),
(332460,10,3110.53,-3707.64,119.361,0,0,0,0,100,0),
(332460,11,3114.92,-3695.82,120.05,0,0,0,0,100,0),
(332460,12,3122.59,-3690.79,120.014,0,0,0,0,100,0),
(332460,13,3134.88,-3689.51,120.323,0,0,0,0,100,0),
(332460,14,3148.46,-3694.8,121.17,0,0,0,0,100,0),
(332460,15,3156.27,-3705.99,122.366,0,0,0,0,100,0),
(332460,16,3158.84,-3720.47,124.209,0,0,0,0,100,0),
(332460,17,3160.24,-3728.33,123.65,0,0,0,0,100,0),
(332460,18,3162.7,-3742.1,121.791,0,0,0,0,100,0),
(332460,19,3161.81,-3749.64,122.266,0,0,0,0,100,0),
(332460,20,3159.61,-3765.47,122.724,0,0,0,0,100,0),

(332450,1,3158.41,-3655.17,121.782,0,0,0,0,100,0),
(332450,2,3169.14,-3655.11,122.62,0,0,0,0,100,0),
(332450,3,3179.79,-3657.5,123.156,0,0,0,0,100,0),
(332450,4,3192.92,-3660.25,122.777,0,0,0,0,100,0),
(332450,5,3203.84,-3662.19,122.881,0,0,0,0,100,0),
(332450,6,3212.97,-3659.93,124.285,0,0,0,0,100,0),
(332450,7,3220.19,-3651.93,125.336,0,0,0,0,100,0),
(332450,8,3222.52,-3638.84,126.89,0,0,0,0,100,0),
(332450,9,3218.01,-3625.48,129.237,0,0,0,0,100,0),
(332450,10,3209.04,-3611.84,131.1,0,0,0,0,100,0),
(332450,11,3202.6,-3609.99,131.125,0,0,0,0,100,0),
(332450,12,3191.16,-3606.74,130.461,0,0,0,0,100,0),
(332450,13,3178.68,-3608.37,129.903,0,0,0,0,100,0),
(332450,14,3166.98,-3612.75,128.916,0,0,0,0,100,0),
(332450,15,3156.22,-3620.76,127.553,0,0,0,0,100,0),
(332450,16,3148.32,-3626.76,125.524,0,0,0,0,100,0),
(332450,17,3139.22,-3633.67,123.172,0,0,0,0,100,0),
(332450,18,3130.3,-3640.44,121.505,0,0,0,0,100,0),
(332450,19,3123.34,-3649.22,120.631,0,0,0,0,100,0),
(332450,20,3130.17,-3662.52,119.57,0,0,0,0,100,0),
(332450,21,3143.6,-3660.19,120.426,0,0,0,0,100,0),

(332420,1,3242.05,-3642.06,128.389,0,0,0,0,100,0),
(332420,2,3239.39,-3632.6,129.552,0,0,0,0,100,0),
(332420,3,3241.93,-3622.03,131.681,0,0,0,0,100,0),
(332420,4,3252.51,-3615.68,134.111,0,0,0,0,100,0),
(332420,5,3265.11,-3615.73,136.259,0,0,0,0,100,0),
(332420,6,3276.98,-3617.88,137.127,0,0,0,0,100,0),
(332420,7,3283.48,-3626.38,137.508,0,0,0,0,100,0),
(332420,8,3285.81,-3638.79,137.205,0,0,0,0,100,0),
(332420,9,3281,-3656.11,133.032,0,0,0,0,100,0),
(332420,10,3267.97,-3662.12,129.127,0,0,0,0,100,0),
(332420,11,3258,-3659.77,128.604,0,0,0,0,100,0),
(332420,12,3250.86,-3652.33,129.896,0,0,0,0,100,0),

(332400,1,3177.21,-3578.26,131.537,0,0,0,0,100,0),
(332400,2,3181.67,-3571.39,131.775,0,0,0,0,100,0),
(332400,3,3181.85,-3559.31,131.223,0,0,0,0,100,0),
(332400,4,3179.8,-3546.46,130.512,0,0,0,0,100,0),
(332400,5,3172.74,-3538.8,130.884,0,0,0,0,100,0),
(332400,6,3163.02,-3536.26,130.878,0,0,0,0,100,0),
(332400,7,3153.61,-3539.28,130.385,0,0,0,0,100,0),
(332400,8,3146.93,-3549.98,129.773,0,0,0,0,100,0),
(332400,9,3149.81,-3560.46,129.452,0,0,0,0,100,0),
(332400,10,3152.76,-3571.06,129.947,0,0,0,0,100,0),
(332400,11,3162.49,-3579.57,130.423,0,0,0,0,100,0),
(332400,12,3170.55,-3578.85,131.131,0,0,0,0,100,0),

(332430,1,3182.94,-3509.48,134.422,0,0,0,0,100,0),
(332430,2,3187.52,-3501.13,137.267,0,0,0,0,100,0),
(332430,3,3195.82,-3495.27,141.111,0,0,0,0,100,0),
(332430,4,3201.32,-3485.92,143.568,0,0,0,0,100,0),
(332430,5,3199.96,-3473.57,144.938,0,0,0,0,100,0),
(332430,6,3193.45,-3466.36,145.684,0,0,0,0,100,0),
(332430,7,3181.53,-3462.68,144.076,0,0,0,0,100,0),
(332430,8,3172.96,-3464.91,141.975,0,0,0,0,100,0),
(332430,9,3165.07,-3472.18,138.513,0,0,0,0,100,0),
(332430,10,3155.02,-3481.47,135.969,0,0,0,0,100,0),
(332430,11,3150.42,-3493.36,134.137,0,0,0,0,100,0),
(332430,12,3151.32,-3504.85,132.194,0,0,0,0,100,0),
(332430,13,3158.37,-3516.66,130.366,0,0,0,0,100,0),
(332430,14,3174.44,-3520.67,131.359,0,0,0,0,100,0),

(332100,1,3147.45,-3462.05,139.282,0,0,0,0,100,0),
(332100,2,3144.71,-3472.54,136.815,0,0,0,0,100,0),
(332100,3,3137.17,-3479.74,135.531,0,0,0,0,100,0),
(332100,4,3128.02,-3481.09,134.95,0,0,0,0,100,0),
(332100,5,3121.52,-3474.69,135.332,0,0,0,0,100,0),
(332100,6,3118.13,-3467.87,136.015,0,0,0,0,100,0),
(332100,7,3112.92,-3457.3,136.268,0,0,0,0,100,0),
(332100,8,3107.99,-3446.12,137.258,0,0,0,0,100,0),
(332100,9,3115.01,-3438.19,139.21,0,0,0,0,100,0),
(332100,10,3125.23,-3438.78,140.006,0,0,0,0,100,0),
(332100,11,3136.73,-3443.94,140.164,0,0,0,0,100,0),
(332100,12,3145.01,-3451.37,139.895,0,0,0,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
