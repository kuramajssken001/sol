-- DB update 2022_04_01_00 -> 2022_04_01_01
DROP PROCEDURE IF EXISTS `updateDb`;
DELIMITER //
CREATE PROCEDURE updateDb ()
proc:BEGIN DECLARE OK VARCHAR(100) DEFAULT 'FALSE';
SELECT COUNT(*) INTO @COLEXISTS
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'version_db_sol_world' AND COLUMN_NAME = '2022_04_01_00';
IF @COLEXISTS = 0 THEN LEAVE proc; END IF;
START TRANSACTION;
ALTER TABLE version_db_sol_world CHANGE COLUMN 2022_04_01_00 2022_04_01_01 bit;
SELECT sql_rev INTO OK FROM version_db_sol_world WHERE sql_rev = '1648796393717227510'; IF OK <> 'FALSE' THEN LEAVE proc; END IF;
--
-- START UPDATING QUERIES
--

INSERT INTO `version_db_sol_world` (`sql_rev`) VALUES ('1648796393717227510');

UPDATE `creature` SET `position_x` = -8584.71, `position_y` = 638.388, `position_z` = 96.338 WHERE `guid` = 79815;
UPDATE `creature` SET `position_x` = -8586.28, `position_y` = 638.079, `position_z` = 96.338, `MovementType` = 0 WHERE `guid` = 79816;
UPDATE `creature` SET `position_x` = -8583.22, `position_y` = 638.898, `position_z` = 96.338, `MovementType` = 0 WHERE `guid` = 79817;
UPDATE `creature_addon` SET `path_id` = 0 WHERE `guid` IN (79816,79817);

DELETE FROM `creature_formations` WHERE `leaderGUID` = 79815;
INSERT INTO `creature_formations` (`leaderGUID`, `memberGUID`, `dist`, `angle`, `groupAI`)
VALUES
(79815,79815,0,0,0),
(79815,79816,1,90,0),
(79815,79817,1,270,0);

DELETE FROM `creature_text` WHERE `CreatureId` IN (1368,1370,1371);
INSERT INTO `creature_text` (`CreatureID`, `GroupID`, `ID`, `Text`, `Type`, `Language`, `Probability`, `Emote`, `Duration`, `Sound`, `BroadcastTextId`, `TextRange`, `comment`)
VALUES
(1368,0,0,'And so the knights stood before the charging Horde and held their ground as a thousand berserk orcs came through the valley.',12,7,100,1,0,0,150,0,'Justin - Talk'),
(1368,0,1,'And that''s how Lothar killed thirty six orcs with his bare hands!',12,7,100,1,0,0,149,0,'Justin - Talk'),
(1368,0,2,'And then the rabbit just bit his head off... I swear.',12,7,100,1,0,0,155,0,'Justin - Talk'),
(1368,0,3,'They say he can turn into a raven sometimes.',12,7,100,1,0,0,151,0,'Justin - Talk'),
(1368,0,4,'You know there are crocolisks in the Canals. They were brought from the swamp as pets, but got thrown in the canals.',12,7,100,1,0,0,156,0,'Justin - Talk'),
(1368,0,5,'You know why orc eyes glow red? It''s because they drink blood!',12,7,100,1,0,0,152,0,'Justin - Talk'),
(1368,0,6,'I swear, people have actually seen them. Pandaren really do exist!',12,7,100,1,0,0,154,0,'Justin - Talk'),
(1368,0,7,'There is no spoon.',12,7,100,1,0,0,153,0,'Justin - Talk'),

(1370,0,0,'My father says that''s just a story.',12,7,100,1,0,0,168,0,'Brandon - Talk'),
(1370,0,1,'Can you imagine?',12,7,100,1,0,0,169,0,'Brandon - Talk'),
(1370,0,2,'Oh c''mon, that''s not true.',12,7,100,1,0,0,166,0,'Brandon - Talk'),
(1370,0,3,'Oh yeah, I heard about that.',12,7,100,1,0,0,158,0,'Brandon - Talk'),
(1370,0,4,'Really?',12,7,100,1,0,0,147,0,'Brandon - Talk'),
(1370,0,5,'Sounds kinda like one of Billy''s fish stories to me.',12,7,100,1,0,0,170,0,'Brandon - Talk'),
(1370,0,6,'That''s neat.',12,7,100,1,0,0,167,0,'Brandon - Talk'),
(1370,0,7,'Wow.',12,7,100,1,0,0,157,0,'Brandon - Talk'),

(1371,0,0,'Eww... that''s not a fish!',12,7,100,1,0,0,173,0,'Roman - Talk'),
(1371,0,1,'I don''t think there''s any fish in these canals.',12,7,100,1,0,0,177,0,'Roman - Talk'),
(1371,0,2,'I got worm guts on my shoes.',12,7,100,1,0,0,174,0,'Roman - Talk'),
(1371,0,3,'I hope that was a fish!',12,7,100,1,0,0,176,0,'Roman - Talk'),
(1371,0,4,'I think I see something.',12,7,100,1,0,0,172,0,'Roman - Talk'),
(1371,0,5,'Something smells funny.',12,7,100,1,0,0,175,0,'Roman - Talk'),
(1371,0,6,'Worm goes on the hook, hook goes in the water. Fish is in the water, our fish.',12,7,100,1,0,0,178,0,'Roman - Talk'),
(1371,0,7,'I thought I heard something.',12,7,100,1,0,0,171,0,'Roman - Talk');

UPDATE `creature_template` SET `AIName` = 'SmartAI' WHERE `entry` IN (1368,1370,1371);
DELETE FROM `smart_scripts` WHERE `source_type` = 0 AND `entryorguid` IN (1368,1370,1371);
DELETE FROM `smart_scripts` WHERE `source_type` = 9 AND `entryorguid` IN (136800,137000,137100);
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`)
VALUES
(1368,0,0,1,11,0,100,0,0,0,0,0,0,74,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Justin - On Respawn - Remove Timed Event 1'),
(1368,0,1,2,61,0,100,0,0,0,0,0,0,74,2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Justin - Linked - Remove Timed Event 2'),
(1368,0,2,0,61,0,100,0,0,0,0,0,0,48,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Justin - Linked - Set Active On'),
(1368,0,4,0,59,0,100,0,1,0,0,0,0,45,1,1,0,0,0,0,19,1371,0,0,0,0,0,0,0,'Justin - On Timed Event 1 Triggered - Set Data 1 1 (Roman)'),
(1368,0,3,0,59,0,100,0,2,0,0,0,0,45,1,1,0,0,0,0,19,1370,0,0,0,0,0,0,0,'Justin - On Timed Event 2 Triggered - Set Data 1 1 (Brandon)'),
(1368,0,5,0,34,0,100,0,2,1,0,0,0,80,136800,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Justin - On WP 2 Reached - Call Timed Action List'),
(1368,0,6,0,34,0,100,0,2,54,0,0,0,80,136800,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Justin - On WP 55 Reached - Call Timed Action List'),

(136800,9,0,0,0,0,100,0,0,0,0,0,0,74,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Justin - On Script - Remove Timed Event 1'),
(136800,9,1,0,0,0,100,0,0,0,0,0,0,74,2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Justin - On Script - Remove Timed Event 2'),
(136800,9,2,0,0,0,100,0,5000,5000,0,0,0,67,1,90000,180000,90000,180000,0,1,0,0,0,0,0,0,0,0,'Justin - On Script - Create Timed Event 1'),
(136800,9,3,0,0,0,100,0,1800000,2700000,0,0,0,74,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Justin - On Script - Remove Timed Event 1'),
(136800,9,4,0,0,0,100,0,50000,50000,0,0,0,239,5000,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Justin - On Script - Resume WP Path After 5 Seconds'),
(136800,9,5,0,0,0,100,0,0,0,0,0,0,67,2,90000,180000,90000,180000,0,1,0,0,0,0,0,0,0,0,'Justin - On Script - Create Timed Event 2'),

(1370,0,0,0,38,0,100,0,1,1,0,0,0,80,137000,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Brandon - On Data Set 1 1 - Call Timed Action List'),

(137000,9,0,0,0,0,100,0,0,0,0,0,0,1,0,0,0,0,0,0,19,1368,0,0,0,0,0,0,0,'Brandon - On Script - Say Line 0 (Justin)'),
(137000,9,1,0,0,0,100,0,7000,7000,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Brandon - On Script - Say Line 0'),

(1371,0,0,0,38,0,100,0,1,1,0,0,0,80,137100,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Roman - On Data Set 1 1 - Call Timed Action List'),

(137100,9,0,0,0,0,100,0,0,0,0,0,0,1,0,0,0,0,0,0,19,1368,0,0,0,0,0,0,0,'Roman - On Script - Say Line 0 (Justin)'),
(137100,9,1,0,0,0,100,0,7000,7000,0,0,0,1,0,0,0,0,0,0,19,1370,0,0,0,0,0,0,0,'Roman - On Script - Say Line 0 (Brandon)'),
(137100,9,2,0,0,0,100,0,30000,60000,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,'Roman - On Script - Say Line 0');

DELETE FROM `waypoint_scripts` WHERE `id` BETWEEN 285 AND 307;

DELETE FROM `waypoint_data` WHERE `id` IN (798150,798160,798170);
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `pathfinding`, `action`, `action_chance`, `wpguid`)
VALUES
(798150,1,-8584.71,638.388,96.338,0,0,0,2,0,100,0),
(798150,2,-8583.09,633.256,96.338,4.93228,3600000,0,2,0,100,0),
(798150,3,-8584.71,638.388,96.338,0,0,0,2,0,100,0),
(798150,4,-8586.76,644.842,96.8079,0,0,0,2,0,100,0),
(798150,5,-8588.13,649.174,97.9098,0,0,0,2,0,100,0),
(798150,6,-8589.81,654.507,98.0831,0,0,0,2,0,100,0),
(798150,7,-8593.05,656.774,98.221,0,0,0,0,0,100,0),
(798150,8,-8597.95,657.882,98.377,0,0,0,0,0,100,0),
(798150,9,-8606.2,656.605,98.7889,0,0,0,0,0,100,0),
(798150,10,-8613.92,655.41,98.9141,0,0,0,0,0,100,0),
(798150,11,-8620.59,654.378,99.1946,0,0,0,0,0,100,0),
(798150,12,-8626.61,655.054,99.9207,0,0,0,0,0,100,0),
(798150,13,-8631.83,655.639,100.63,0,0,0,0,0,100,0),
(798150,14,-8638.32,657.008,101.079,0,0,0,0,0,100,0),
(798150,15,-8645.55,657.974,101.085,0,0,0,0,0,100,0),
(798150,16,-8653.65,659.034,100.796,0,0,0,0,0,100,0),
(798150,17,-8662.72,666.586,100.377,0,0,0,0,0,100,0),
(798150,18,-8666.01,671.875,100.071,0,0,0,0,0,100,0),
(798150,19,-8668.14,678.414,99.499,0,0,0,0,0,100,0),
(798150,20,-8674.62,687.131,98.5636,0,0,0,0,0,100,0),
(798150,21,-8683.28,695.683,97.8567,0,0,0,0,0,100,0),
(798150,22,-8691.63,704.794,97.1053,0,0,0,0,0,100,0),
(798150,23,-8698.59,714.268,97.0168,0,0,0,0,0,100,0),
(798150,24,-8704.36,721.764,97.0168,0,0,0,0,0,100,0),
(798150,25,-8710.69,729.996,97.7366,0,0,0,0,0,100,0),
(798150,26,-8715.87,736.869,97.7905,0,0,0,0,0,100,0),
(798150,27,-8719.06,745.155,97.8767,0,0,0,0,0,100,0),
(798150,28,-8725.24,753.064,98.2692,0,0,0,0,0,100,0),
(798150,29,-8730.23,760.395,98.2232,0,0,0,0,0,100,0),
(798150,30,-8731.49,767.997,98.1213,0,0,0,0,0,100,0),
(798150,31,-8727.34,774.189,98.1597,0,0,0,0,0,100,0),
(798150,32,-8720.58,783.973,97.7941,0,0,0,0,0,100,0),
(798150,33,-8718.88,790.763,97.2122,0,0,0,0,0,100,0),
(798150,34,-8717.01,798.201,97.1855,0,0,0,0,0,100,0),
(798150,35,-8721.84,805.772,97.2833,0,0,0,0,0,100,0),
(798150,36,-8726.35,812.836,97.0629,0,0,0,0,0,100,0),
(798150,37,-8726.04,822.071,97.1411,0,0,0,0,0,100,0),
(798150,38,-8725.84,830.097,96.3317,0,0,0,0,0,100,0),
(798150,39,-8725.68,836.514,96.1282,0,0,0,0,0,100,0),
(798150,40,-8719.13,845.016,96.3256,0,0,0,0,0,100,0),
(798150,41,-8712.47,853.661,96.86,0,0,0,0,0,100,0),
(798150,42,-8709.6,858.748,96.993,0,0,0,0,0,100,0),
(798150,43,-8700.6,865.095,97.1136,0,0,0,0,0,100,0),
(798150,44,-8691.53,871.492,97.019,0,0,0,0,0,100,0),
(798150,45,-8682.01,878.208,97.0173,0,0,0,0,0,100,0),
(798150,46,-8671.96,887.607,97.1445,0,0,0,0,0,100,0),
(798150,47,-8664.8,894.301,97.4849,0,0,0,0,0,100,0),
(798150,48,-8658.6,900.099,97.549,0,0,0,0,0,100,0),
(798150,49,-8659.7,904.508,97.4144,0,0,0,2,0,100,0),
(798150,50,-8661.3,906.517,97.3947,0,0,0,2,0,100,0),
(798150,51,-8663.85,909.713,96.9587,0,0,0,2,0,100,0),
(798150,52,-8665.51,911.565,96.3379,0,0,0,2,0,100,0),
(798150,53,-8667.92,911.95,96.3379,0,0,0,2,0,100,0),
(798150,54,-8670.7,910.266,96.3379,0,0,0,2,0,100,0),
(798150,55,-8674.44,907.336,96.3379,3.80705,3600000,0,2,0,100,0),
(798150,56,-8670.7,910.266,96.3379,0,0,0,2,0,100,0),
(798150,57,-8667.92,911.95,96.3379,0,0,0,2,0,100,0),
(798150,58,-8665.51,911.565,96.3379,0,0,0,2,0,100,0),
(798150,59,-8663.85,909.713,96.9587,0,0,0,2,0,100,0),
(798150,60,-8661.3,906.517,97.3947,0,0,0,2,0,100,0),
(798150,61,-8659.7,904.508,97.4144,0,0,0,2,0,100,0),
(798150,62,-8658.6,900.099,97.549,0,0,0,0,0,100,0),
(798150,63,-8664.8,894.301,97.4849,0,0,0,0,0,100,0),
(798150,64,-8671.96,887.607,97.1445,0,0,0,0,0,100,0),
(798150,65,-8682.01,878.208,97.0173,0,0,0,0,0,100,0),
(798150,66,-8691.53,871.492,97.019,0,0,0,0,0,100,0),
(798150,67,-8700.6,865.095,97.1136,0,0,0,0,0,100,0),
(798150,68,-8709.6,858.748,96.993,0,0,0,0,0,100,0),
(798150,69,-8712.47,853.661,96.86,0,0,0,0,0,100,0),
(798150,70,-8719.13,845.016,96.3256,0,0,0,0,0,100,0),
(798150,71,-8725.68,836.514,96.1282,0,0,0,0,0,100,0),
(798150,72,-8725.84,830.097,96.3317,0,0,0,0,0,100,0),
(798150,73,-8726.04,822.071,97.1411,0,0,0,0,0,100,0),
(798150,74,-8726.35,812.836,97.0629,0,0,0,0,0,100,0),
(798150,75,-8721.84,805.772,97.2833,0,0,0,0,0,100,0),
(798150,76,-8717.01,798.201,97.1855,0,0,0,0,0,100,0),
(798150,77,-8718.88,790.763,97.2122,0,0,0,0,0,100,0),
(798150,78,-8720.58,783.973,97.7941,0,0,0,0,0,100,0),
(798150,79,-8727.34,774.189,98.1597,0,0,0,0,0,100,0),
(798150,80,-8731.49,767.997,98.1213,0,0,0,0,0,100,0),
(798150,81,-8730.23,760.395,98.2232,0,0,0,0,0,100,0),
(798150,82,-8725.24,753.064,98.2692,0,0,0,0,0,100,0),
(798150,83,-8719.06,745.155,97.8767,0,0,0,0,0,100,0),
(798150,84,-8715.87,736.869,97.7905,0,0,0,0,0,100,0),
(798150,85,-8710.69,729.996,97.7366,0,0,0,0,0,100,0),
(798150,86,-8704.36,721.764,97.0168,0,0,0,0,0,100,0),
(798150,87,-8698.59,714.268,97.0168,0,0,0,0,0,100,0),
(798150,88,-8691.63,704.794,97.1053,0,0,0,0,0,100,0),
(798150,89,-8683.28,695.683,97.8567,0,0,0,0,0,100,0),
(798150,90,-8674.62,687.131,98.5636,0,0,0,0,0,100,0),
(798150,91,-8668.14,678.414,99.499,0,0,0,0,0,100,0),
(798150,92,-8666.01,671.875,100.071,0,0,0,0,0,100,0),
(798150,93,-8662.72,666.586,100.377,0,0,0,0,0,100,0),
(798150,94,-8653.65,659.034,100.796,0,0,0,0,0,100,0),
(798150,95,-8645.55,657.974,101.085,0,0,0,0,0,100,0),
(798150,96,-8638.32,657.008,101.079,0,0,0,0,0,100,0),
(798150,97,-8631.83,655.639,100.63,0,0,0,0,0,100,0),
(798150,98,-8626.61,655.054,99.9207,0,0,0,0,0,100,0),
(798150,99,-8620.59,654.378,99.1946,0,0,0,0,0,100,0),
(798150,100,-8613.92,655.41,98.9141,0,0,0,0,0,100,0),
(798150,101,-8606.2,656.605,98.7889,0,0,0,0,0,100,0),
(798150,102,-8597.95,657.882,98.377,0,0,0,0,0,100,0),
(798150,103,-8593.05,656.774,98.221,0,0,0,0,0,100,0),
(798150,104,-8589.81,654.507,98.0831,0,0,0,2,0,100,0),
(798150,105,-8588.13,649.174,97.9098,0,0,0,2,0,100,0),
(798150,106,-8586.76,644.842,96.8079,0,0,0,2,0,100,0);

--
-- END UPDATING QUERIES
--
COMMIT;
END //
DELIMITER ;
CALL updateDb();
DROP PROCEDURE IF EXISTS `updateDb`;
